<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>XSLT Explorer: explorer.xsl</title><meta name="viewport" content="width=device-width,initial-scale=1" /><link rel="shortcut icon" href="https://xslt.xmlexplorer.com/img/icon64.png" type="image/png" /><link href="https://fonts.googleapis.com/css?family=B612+Mono" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Noto+Serif" rel="stylesheet" /><link rel="stylesheet" href="css/prism.css" /><link rel="stylesheet" href="css/xsltexplorer.css" /><link rel="schema.dc" href="http://purl.org/dc/elements/1.1/" /><meta name="dc.modified" content="2020-06-02T20:50:14Z" /><meta name="generator" content="XSLT Explorer 0.1.0 / c9d7078" /><script src="js/prism.js"></script></head><body><main><h1><a href="https://xslt.xmlexplorer.com/"><img class="logo" src="https://xslt.xmlexplorer.com/img/logo256.png" /></a>XSLT Explorer: explorer.xsl</h1><p>5 imports, 41 templates, 21 functions, 4 variables, 11 params</p><div class="toc"><span class="closed">List of Imports</span><ul><li><a href="#S-16674">VERSION.xsl</a></li><li><a href="#S-56087">parse.xsl</a></li><li><a href="#S-6140">resolve.xsl</a></li><li><a href="#S-28400">analyze.xsl</a></li><li><a href="#S-60890">summarize.xsl</a></li></ul></div><div class="lot"><span class="closed">List of Templates</span><dl class="columns"><dt><a href="#S-60890-nwalsh.com.ns.xslt.templates.functions-called">t:functions-called</a></dt><dt><a href="#S-60890-nwalsh.com.ns.xslt.templates.templates-called">t:templates-called</a></dt><dt><a href="#S-60890-nwalsh.com.ns.xslt.templates.variables-referenced">t:variables-referenced</a></dt></dl></div><div class="lof"><span class="closed">List of Functions</span><dl class="columns"><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.function-calls,1">f:function-calls()</a></dt><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.function-shadows,2">f:function-shadows()</a></dt><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.generate-id,1">f:generate-id()</a></dt><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.template-calls,1">f:template-calls()</a></dt><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.template-shadows,2">f:template-shadows()</a></dt><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.variable,2">f:variable()</a></dt><dt><a href="#S-28400-nwalsh.com.ns.xslt.functions.variables-referenced,1">f:variables-referenced()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.checksum,1">f:checksum()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,2">f:clark-name()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.encode-for-id,1">f:encode-for-id()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.fletcher16,5">f:fletcher16()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.parse-expr,2">f:parse-expr()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.process-avts,2">f:process-avts()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a></dt><dt><a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></dt><dt><a href="#S-60890-nwalsh.com.ns.xslt.functions.line-link,1">f:line-link()</a></dt><dt><a href="#S-60890-nwalsh.com.ns.xslt.functions.reference-list,1">f:reference-list()</a></dt><dt><a href="#S-60890-nwalsh.com.ns.xslt.functions.summary-count,2">f:summary-count()</a></dt><dt><a href="#S-60890-nwalsh.com.ns.xslt.functions.summary-details,1">f:summary-details()</a></dt><dt><a href="#S-6140-nwalsh.com.ns.xslt.functions.xvariable,2">f:xvariable()</a></dt></dl></div><div class="stylesheet" id="S-49518"><h1>explorer.xsl</h1><p><span class="import all">5 imports</span>, <span><span class="template all">4 templates</span></span>, <span><span class="param all">6 params</span> (<span class="param elsewhere">1 used only in one other module</span>)</span></p><div class="stylesheet" id="S-16674"><h2>VERSION.xsl</h2><p><span><span class="variable all">3 variables</span> (<span class="variable elsewhere">3 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-16674-..TITLE" class="instruction variable elsewhere"><div class="title"><span class="link" title="Line 2"><a href="#line-d46064e9-2" class="goto-lno">§</a></span>Variable <code>$TITLE</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-16674-..VERSION" class="instruction variable elsewhere"><div class="title"><span class="link" title="Line 3"><a href="#line-d46064e9-3" class="goto-lno">§</a></span>Variable <code>$VERSION</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-16674-..VERHASH" class="instruction variable elsewhere"><div class="title"><span class="link" title="Line 4"><a href="#line-d46064e9-4" class="goto-lno">§</a></span>Variable <code>$VERHASH</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-d46064e9-1">1</span>
<span id="line-d46064e9-2"><span class="lno">2</span></span>
<span id="line-d46064e9-3"><span class="lno">3</span></span>
<span id="line-d46064e9-4"><span class="lno">4</span></span>
<span id="line-d46064e9-5">5</span>
<span id="line-d46064e9-6"><span class="lno">6</span></span>
<span id="line-d46064e9-7"><span class="lno">7</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="3.0"&gt;
   &lt;xsl:variable name="TITLE" select="'XSLT Explorer'"/&gt;
   &lt;xsl:variable name="VERSION" select="'0.1.0'"/&gt;
   &lt;xsl:variable name="VERHASH" select="'c9d7078'"/&gt;
&lt;/xsl:stylesheet&gt;

</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-56087"><h2>parse.xsl</h2><p><span><span class="template all">13 templates</span></span>, <span><span class="function all">9 functions</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-56087-t-1" class="instruction template"><div class="title"><span class="link" title="Line 16"><a href="#line-d46064e35-16" class="goto-lno">§</a></span>Template match ≅ /</div><div class="props"><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-56087-t-2" class="instruction template"><div class="title"><span class="link" title="Line 20"><a href="#line-d46064e35-20" class="goto-lno">§</a></span>Template match ≅ xsl:stylesheet|xsl:transform</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.encode-for-id,1">f:encode-for-id()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:stylesheet</code>, <code>xsl:transform</code></div></div></div><div id="S-56087-t-3" class="instruction template"><div class="title"><span class="link" title="Line 38"><a href="#line-d46064e35-38" class="goto-lno">§</a></span>Template match ≅ xsl:import</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:import</code></div></div></div><div id="S-56087-t-4" class="instruction template"><div class="title"><span class="link" title="Line 53"><a href="#line-d46064e35-53" class="goto-lno">§</a></span>Template match ≅ xsl:include</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:include</code></div></div></div><div id="S-56087-t-5" class="instruction template"><div class="title"><span class="link" title="Line 69"><a href="#line-d46064e35-69" class="goto-lno">§</a></span>Template match ≅ xsl:template</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.encode-for-id,1">f:encode-for-id()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:template</code></div></div></div><div id="S-56087-t-6" class="instruction template"><div class="title"><span class="link" title="Line 134"><a href="#line-d46064e35-134" class="goto-lno">§</a></span>Template match ≅ xsl:function</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.encode-for-id,1">f:encode-for-id()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:function</code></div></div></div><div id="S-56087-t-7" class="instruction template"><div class="title"><span class="link" title="Line 153"><a href="#line-d46064e35-153" class="goto-lno">§</a></span>Template match ≅ xsl:param|xsl:variable</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.encode-for-id,1">f:encode-for-id()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:param</code>, <code>xsl:variable</code></div></div></div><div id="S-56087-t-8" class="instruction template"><div class="title"><span class="link" title="Line 168"><a href="#line-d46064e35-168" class="goto-lno">§</a></span>Template match ≅ xsl:call-template</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:call-template</code></div></div></div><div id="S-56087-t-9" class="instruction template"><div class="title"><span class="link" title="Line 179"><a href="#line-d46064e35-179" class="goto-lno">§</a></span>Template match ≅ xsl:apply-templates</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.source-location,1">f:source-location()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>xsl:apply-templates</code></div></div></div><div id="S-56087-t-10" class="instruction template"><div class="title"><span class="link" title="Line 208"><a href="#line-d46064e35-208" class="goto-lno">§</a></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-56087-t-11" class="instruction template"><div class="title"><span class="link" title="Line 220"><a href="#line-d46064e35-220" class="goto-lno">§</a></span>Template match ≅ @select|xsl:evaluate/@context-…</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.parse-expr,2">f:parse-expr()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>@select</code>, <code>xsl:evaluate/@context-item</code>, <code>xsl:evaluate/@xpath</code>, <code>xsl:group-by/@group-by</code>, <code>xsl:if/@test</code>, <code>xsl:template/@match</code>, <code>xsl:when/@test</code></div></div></div><div id="S-56087-t-12" class="instruction template"><div class="title"><span class="link" title="Line 224"><a href="#line-d46064e35-224" class="goto-lno">§</a></span>Template match ≅ @*</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.process-avts,2">f:process-avts()</a></div><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>@*</code></div></div></div><div id="S-56087-t-13" class="instruction template"><div class="title"><span class="link" title="Line 233"><a href="#line-d46064e35-233" class="goto-lno">§</a></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:parse</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.process-avts,2" class="instruction function"><div class="title"><span class="link" title="Line 237"><a href="#line-d46064e35-237" class="goto-lno">§</a></span>Function f:process-avts($context as element(), $value as xs:string) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-t-12">template</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.process-avts,2">f:process-avts()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.parse-expr,2" class="instruction function"><div class="title"><span class="link" title="Line 250"><a href="#line-d46064e35-250" class="goto-lno">§</a></span>Function f:parse-expr($context as element(), $expr as xs:string)</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.process-avts,2">f:process-avts()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-t-11">template</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.process-avts,2">f:process-avts()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.unique-id,1" class="instruction function"><div class="title"><span class="link" title="Line 327"><a href="#line-d46064e35-327" class="goto-lno">§</a></span>Function f:unique-id($ref as element()) as xs:string <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-t-2">template</a>, <a href="#S-56087-t-5">template</a>, <a href="#S-56087-t-6">template</a>, <a href="#S-56087-t-7">template</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.encode-for-id,1" class="instruction function"><div class="title"><span class="link" title="Line 351"><a href="#line-d46064e35-351" class="goto-lno">§</a></span>Function f:encode-for-id($name as xs:string) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-t-2">template</a>, <a href="#S-56087-t-5">template</a>, <a href="#S-56087-t-6">template</a>, <a href="#S-56087-t-7">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.clark-name,1" class="instruction function"><div class="title"><span class="link" title="Line 360"><a href="#line-d46064e35-360" class="goto-lno">§</a></span>Function f:clark-name#1($node as node()) as xs:string</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-t-5">template</a>, <a href="#S-56087-t-6">template</a>, <a href="#S-56087-t-7">template</a>, <a href="#S-56087-t-8">template</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.clark-name,2" class="instruction function"><div class="title"><span class="link" title="Line 372"><a href="#line-d46064e35-372" class="goto-lno">§</a></span>Function f:clark-name#2($node as node(), $name as xs:string) as xs:string</div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-nwalsh.com.ns.xslt.functions.clark-name,1">f:clark-name()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.source-location,1" class="instruction function"><div class="title"><span class="link" title="Line 389"><a href="#line-d46064e35-389" class="goto-lno">§</a></span>Function f:source-location($context as node()) as attribute()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-t-2">template</a>, <a href="#S-56087-t-3">template</a>, <a href="#S-56087-t-4">template</a>, <a href="#S-56087-t-5">template</a>, <a href="#S-56087-t-6">template</a>, <a href="#S-56087-t-7">template</a>, <a href="#S-56087-t-8">template</a>, <a href="#S-56087-t-9">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.checksum,1" class="instruction function"><div class="title"><span class="link" title="Line 406"><a href="#line-d46064e35-406" class="goto-lno">§</a></span>Function f:checksum($str as xs:string) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-49518-..xspec-tests">$xspec-tests</a></div><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-nwalsh.com.ns.xslt.functions.unique-id,1">f:unique-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-56087-nwalsh.com.ns.xslt.functions.fletcher16,5" class="instruction function"><div class="title"><span class="link" title="Line 422"><a href="#line-d46064e35-422" class="goto-lno">§</a></span>Function f:fletcher16($str as xs:integer*, $len as xs:integer, $index as xs:integer, $sum1 as xs:integer, $sum2 as xs:integer) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56087-nwalsh.com.ns.xslt.functions.checksum,1">f:checksum()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56087-nwalsh.com.ns.xslt.functions.checksum,1">f:checksum()</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.fletcher16,5">f:fletcher16()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56087">parse.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-d46064e35-1">1</span>
<span id="line-d46064e35-2"><span class="lno">2</span></span>
<span id="line-d46064e35-3"><span class="lno">3</span></span>
<span id="line-d46064e35-4"><span class="lno">4</span></span>
<span id="line-d46064e35-5">5</span>
<span id="line-d46064e35-6"><span class="lno">6</span></span>
<span id="line-d46064e35-7"><span class="lno">7</span></span>
<span id="line-d46064e35-8"><span class="lno">8</span></span>
<span id="line-d46064e35-9"><span class="lno">9</span></span>
<span id="line-d46064e35-10">10</span>
<span id="line-d46064e35-11"><span class="lno">11</span></span>
<span id="line-d46064e35-12"><span class="lno">12</span></span>
<span id="line-d46064e35-13"><span class="lno">13</span></span>
<span id="line-d46064e35-14"><span class="lno">14</span></span>
<span id="line-d46064e35-15">15</span>
<span id="line-d46064e35-16"><span class="lno">16</span></span>
<span id="line-d46064e35-17"><span class="lno">17</span></span>
<span id="line-d46064e35-18"><span class="lno">18</span></span>
<span id="line-d46064e35-19"><span class="lno">19</span></span>
<span id="line-d46064e35-20">20</span>
<span id="line-d46064e35-21"><span class="lno">21</span></span>
<span id="line-d46064e35-22"><span class="lno">22</span></span>
<span id="line-d46064e35-23"><span class="lno">23</span></span>
<span id="line-d46064e35-24"><span class="lno">24</span></span>
<span id="line-d46064e35-25">25</span>
<span id="line-d46064e35-26"><span class="lno">26</span></span>
<span id="line-d46064e35-27"><span class="lno">27</span></span>
<span id="line-d46064e35-28"><span class="lno">28</span></span>
<span id="line-d46064e35-29"><span class="lno">29</span></span>
<span id="line-d46064e35-30">30</span>
<span id="line-d46064e35-31"><span class="lno">31</span></span>
<span id="line-d46064e35-32"><span class="lno">32</span></span>
<span id="line-d46064e35-33"><span class="lno">33</span></span>
<span id="line-d46064e35-34"><span class="lno">34</span></span>
<span id="line-d46064e35-35">35</span>
<span id="line-d46064e35-36"><span class="lno">36</span></span>
<span id="line-d46064e35-37"><span class="lno">37</span></span>
<span id="line-d46064e35-38"><span class="lno">38</span></span>
<span id="line-d46064e35-39"><span class="lno">39</span></span>
<span id="line-d46064e35-40">40</span>
<span id="line-d46064e35-41"><span class="lno">41</span></span>
<span id="line-d46064e35-42"><span class="lno">42</span></span>
<span id="line-d46064e35-43"><span class="lno">43</span></span>
<span id="line-d46064e35-44"><span class="lno">44</span></span>
<span id="line-d46064e35-45">45</span>
<span id="line-d46064e35-46"><span class="lno">46</span></span>
<span id="line-d46064e35-47"><span class="lno">47</span></span>
<span id="line-d46064e35-48"><span class="lno">48</span></span>
<span id="line-d46064e35-49"><span class="lno">49</span></span>
<span id="line-d46064e35-50">50</span>
<span id="line-d46064e35-51"><span class="lno">51</span></span>
<span id="line-d46064e35-52"><span class="lno">52</span></span>
<span id="line-d46064e35-53"><span class="lno">53</span></span>
<span id="line-d46064e35-54"><span class="lno">54</span></span>
<span id="line-d46064e35-55">55</span>
<span id="line-d46064e35-56"><span class="lno">56</span></span>
<span id="line-d46064e35-57"><span class="lno">57</span></span>
<span id="line-d46064e35-58"><span class="lno">58</span></span>
<span id="line-d46064e35-59"><span class="lno">59</span></span>
<span id="line-d46064e35-60">60</span>
<span id="line-d46064e35-61"><span class="lno">61</span></span>
<span id="line-d46064e35-62"><span class="lno">62</span></span>
<span id="line-d46064e35-63"><span class="lno">63</span></span>
<span id="line-d46064e35-64"><span class="lno">64</span></span>
<span id="line-d46064e35-65">65</span>
<span id="line-d46064e35-66"><span class="lno">66</span></span>
<span id="line-d46064e35-67"><span class="lno">67</span></span>
<span id="line-d46064e35-68"><span class="lno">68</span></span>
<span id="line-d46064e35-69"><span class="lno">69</span></span>
<span id="line-d46064e35-70">70</span>
<span id="line-d46064e35-71"><span class="lno">71</span></span>
<span id="line-d46064e35-72"><span class="lno">72</span></span>
<span id="line-d46064e35-73"><span class="lno">73</span></span>
<span id="line-d46064e35-74"><span class="lno">74</span></span>
<span id="line-d46064e35-75">75</span>
<span id="line-d46064e35-76"><span class="lno">76</span></span>
<span id="line-d46064e35-77"><span class="lno">77</span></span>
<span id="line-d46064e35-78"><span class="lno">78</span></span>
<span id="line-d46064e35-79"><span class="lno">79</span></span>
<span id="line-d46064e35-80">80</span>
<span id="line-d46064e35-81"><span class="lno">81</span></span>
<span id="line-d46064e35-82"><span class="lno">82</span></span>
<span id="line-d46064e35-83"><span class="lno">83</span></span>
<span id="line-d46064e35-84"><span class="lno">84</span></span>
<span id="line-d46064e35-85">85</span>
<span id="line-d46064e35-86"><span class="lno">86</span></span>
<span id="line-d46064e35-87"><span class="lno">87</span></span>
<span id="line-d46064e35-88"><span class="lno">88</span></span>
<span id="line-d46064e35-89"><span class="lno">89</span></span>
<span id="line-d46064e35-90">90</span>
<span id="line-d46064e35-91"><span class="lno">91</span></span>
<span id="line-d46064e35-92"><span class="lno">92</span></span>
<span id="line-d46064e35-93"><span class="lno">93</span></span>
<span id="line-d46064e35-94"><span class="lno">94</span></span>
<span id="line-d46064e35-95">95</span>
<span id="line-d46064e35-96"><span class="lno">96</span></span>
<span id="line-d46064e35-97"><span class="lno">97</span></span>
<span id="line-d46064e35-98"><span class="lno">98</span></span>
<span id="line-d46064e35-99"><span class="lno">99</span></span>
<span id="line-d46064e35-100">100</span>
<span id="line-d46064e35-101"><span class="lno">101</span></span>
<span id="line-d46064e35-102"><span class="lno">102</span></span>
<span id="line-d46064e35-103"><span class="lno">103</span></span>
<span id="line-d46064e35-104"><span class="lno">104</span></span>
<span id="line-d46064e35-105">105</span>
<span id="line-d46064e35-106"><span class="lno">106</span></span>
<span id="line-d46064e35-107"><span class="lno">107</span></span>
<span id="line-d46064e35-108"><span class="lno">108</span></span>
<span id="line-d46064e35-109"><span class="lno">109</span></span>
<span id="line-d46064e35-110">110</span>
<span id="line-d46064e35-111"><span class="lno">111</span></span>
<span id="line-d46064e35-112"><span class="lno">112</span></span>
<span id="line-d46064e35-113"><span class="lno">113</span></span>
<span id="line-d46064e35-114"><span class="lno">114</span></span>
<span id="line-d46064e35-115">115</span>
<span id="line-d46064e35-116"><span class="lno">116</span></span>
<span id="line-d46064e35-117"><span class="lno">117</span></span>
<span id="line-d46064e35-118"><span class="lno">118</span></span>
<span id="line-d46064e35-119"><span class="lno">119</span></span>
<span id="line-d46064e35-120">120</span>
<span id="line-d46064e35-121"><span class="lno">121</span></span>
<span id="line-d46064e35-122"><span class="lno">122</span></span>
<span id="line-d46064e35-123"><span class="lno">123</span></span>
<span id="line-d46064e35-124"><span class="lno">124</span></span>
<span id="line-d46064e35-125">125</span>
<span id="line-d46064e35-126"><span class="lno">126</span></span>
<span id="line-d46064e35-127"><span class="lno">127</span></span>
<span id="line-d46064e35-128"><span class="lno">128</span></span>
<span id="line-d46064e35-129"><span class="lno">129</span></span>
<span id="line-d46064e35-130">130</span>
<span id="line-d46064e35-131"><span class="lno">131</span></span>
<span id="line-d46064e35-132"><span class="lno">132</span></span>
<span id="line-d46064e35-133"><span class="lno">133</span></span>
<span id="line-d46064e35-134"><span class="lno">134</span></span>
<span id="line-d46064e35-135">135</span>
<span id="line-d46064e35-136"><span class="lno">136</span></span>
<span id="line-d46064e35-137"><span class="lno">137</span></span>
<span id="line-d46064e35-138"><span class="lno">138</span></span>
<span id="line-d46064e35-139"><span class="lno">139</span></span>
<span id="line-d46064e35-140">140</span>
<span id="line-d46064e35-141"><span class="lno">141</span></span>
<span id="line-d46064e35-142"><span class="lno">142</span></span>
<span id="line-d46064e35-143"><span class="lno">143</span></span>
<span id="line-d46064e35-144"><span class="lno">144</span></span>
<span id="line-d46064e35-145">145</span>
<span id="line-d46064e35-146"><span class="lno">146</span></span>
<span id="line-d46064e35-147"><span class="lno">147</span></span>
<span id="line-d46064e35-148"><span class="lno">148</span></span>
<span id="line-d46064e35-149"><span class="lno">149</span></span>
<span id="line-d46064e35-150">150</span>
<span id="line-d46064e35-151"><span class="lno">151</span></span>
<span id="line-d46064e35-152"><span class="lno">152</span></span>
<span id="line-d46064e35-153"><span class="lno">153</span></span>
<span id="line-d46064e35-154"><span class="lno">154</span></span>
<span id="line-d46064e35-155">155</span>
<span id="line-d46064e35-156"><span class="lno">156</span></span>
<span id="line-d46064e35-157"><span class="lno">157</span></span>
<span id="line-d46064e35-158"><span class="lno">158</span></span>
<span id="line-d46064e35-159"><span class="lno">159</span></span>
<span id="line-d46064e35-160">160</span>
<span id="line-d46064e35-161"><span class="lno">161</span></span>
<span id="line-d46064e35-162"><span class="lno">162</span></span>
<span id="line-d46064e35-163"><span class="lno">163</span></span>
<span id="line-d46064e35-164"><span class="lno">164</span></span>
<span id="line-d46064e35-165">165</span>
<span id="line-d46064e35-166"><span class="lno">166</span></span>
<span id="line-d46064e35-167"><span class="lno">167</span></span>
<span id="line-d46064e35-168"><span class="lno">168</span></span>
<span id="line-d46064e35-169"><span class="lno">169</span></span>
<span id="line-d46064e35-170">170</span>
<span id="line-d46064e35-171"><span class="lno">171</span></span>
<span id="line-d46064e35-172"><span class="lno">172</span></span>
<span id="line-d46064e35-173"><span class="lno">173</span></span>
<span id="line-d46064e35-174"><span class="lno">174</span></span>
<span id="line-d46064e35-175">175</span>
<span id="line-d46064e35-176"><span class="lno">176</span></span>
<span id="line-d46064e35-177"><span class="lno">177</span></span>
<span id="line-d46064e35-178"><span class="lno">178</span></span>
<span id="line-d46064e35-179"><span class="lno">179</span></span>
<span id="line-d46064e35-180">180</span>
<span id="line-d46064e35-181"><span class="lno">181</span></span>
<span id="line-d46064e35-182"><span class="lno">182</span></span>
<span id="line-d46064e35-183"><span class="lno">183</span></span>
<span id="line-d46064e35-184"><span class="lno">184</span></span>
<span id="line-d46064e35-185">185</span>
<span id="line-d46064e35-186"><span class="lno">186</span></span>
<span id="line-d46064e35-187"><span class="lno">187</span></span>
<span id="line-d46064e35-188"><span class="lno">188</span></span>
<span id="line-d46064e35-189"><span class="lno">189</span></span>
<span id="line-d46064e35-190">190</span>
<span id="line-d46064e35-191"><span class="lno">191</span></span>
<span id="line-d46064e35-192"><span class="lno">192</span></span>
<span id="line-d46064e35-193"><span class="lno">193</span></span>
<span id="line-d46064e35-194"><span class="lno">194</span></span>
<span id="line-d46064e35-195">195</span>
<span id="line-d46064e35-196"><span class="lno">196</span></span>
<span id="line-d46064e35-197"><span class="lno">197</span></span>
<span id="line-d46064e35-198"><span class="lno">198</span></span>
<span id="line-d46064e35-199"><span class="lno">199</span></span>
<span id="line-d46064e35-200">200</span>
<span id="line-d46064e35-201"><span class="lno">201</span></span>
<span id="line-d46064e35-202"><span class="lno">202</span></span>
<span id="line-d46064e35-203"><span class="lno">203</span></span>
<span id="line-d46064e35-204"><span class="lno">204</span></span>
<span id="line-d46064e35-205">205</span>
<span id="line-d46064e35-206"><span class="lno">206</span></span>
<span id="line-d46064e35-207"><span class="lno">207</span></span>
<span id="line-d46064e35-208"><span class="lno">208</span></span>
<span id="line-d46064e35-209"><span class="lno">209</span></span>
<span id="line-d46064e35-210">210</span>
<span id="line-d46064e35-211"><span class="lno">211</span></span>
<span id="line-d46064e35-212"><span class="lno">212</span></span>
<span id="line-d46064e35-213"><span class="lno">213</span></span>
<span id="line-d46064e35-214"><span class="lno">214</span></span>
<span id="line-d46064e35-215">215</span>
<span id="line-d46064e35-216"><span class="lno">216</span></span>
<span id="line-d46064e35-217"><span class="lno">217</span></span>
<span id="line-d46064e35-218"><span class="lno">218</span></span>
<span id="line-d46064e35-219"><span class="lno">219</span></span>
<span id="line-d46064e35-220">220</span>
<span id="line-d46064e35-221"><span class="lno">221</span></span>
<span id="line-d46064e35-222"><span class="lno">222</span></span>
<span id="line-d46064e35-223"><span class="lno">223</span></span>
<span id="line-d46064e35-224"><span class="lno">224</span></span>
<span id="line-d46064e35-225">225</span>
<span id="line-d46064e35-226"><span class="lno">226</span></span>
<span id="line-d46064e35-227"><span class="lno">227</span></span>
<span id="line-d46064e35-228"><span class="lno">228</span></span>
<span id="line-d46064e35-229"><span class="lno">229</span></span>
<span id="line-d46064e35-230">230</span>
<span id="line-d46064e35-231"><span class="lno">231</span></span>
<span id="line-d46064e35-232"><span class="lno">232</span></span>
<span id="line-d46064e35-233"><span class="lno">233</span></span>
<span id="line-d46064e35-234"><span class="lno">234</span></span>
<span id="line-d46064e35-235">235</span>
<span id="line-d46064e35-236"><span class="lno">236</span></span>
<span id="line-d46064e35-237"><span class="lno">237</span></span>
<span id="line-d46064e35-238"><span class="lno">238</span></span>
<span id="line-d46064e35-239"><span class="lno">239</span></span>
<span id="line-d46064e35-240">240</span>
<span id="line-d46064e35-241"><span class="lno">241</span></span>
<span id="line-d46064e35-242"><span class="lno">242</span></span>
<span id="line-d46064e35-243"><span class="lno">243</span></span>
<span id="line-d46064e35-244"><span class="lno">244</span></span>
<span id="line-d46064e35-245">245</span>
<span id="line-d46064e35-246"><span class="lno">246</span></span>
<span id="line-d46064e35-247"><span class="lno">247</span></span>
<span id="line-d46064e35-248"><span class="lno">248</span></span>
<span id="line-d46064e35-249"><span class="lno">249</span></span>
<span id="line-d46064e35-250">250</span>
<span id="line-d46064e35-251"><span class="lno">251</span></span>
<span id="line-d46064e35-252"><span class="lno">252</span></span>
<span id="line-d46064e35-253"><span class="lno">253</span></span>
<span id="line-d46064e35-254"><span class="lno">254</span></span>
<span id="line-d46064e35-255">255</span>
<span id="line-d46064e35-256"><span class="lno">256</span></span>
<span id="line-d46064e35-257"><span class="lno">257</span></span>
<span id="line-d46064e35-258"><span class="lno">258</span></span>
<span id="line-d46064e35-259"><span class="lno">259</span></span>
<span id="line-d46064e35-260">260</span>
<span id="line-d46064e35-261"><span class="lno">261</span></span>
<span id="line-d46064e35-262"><span class="lno">262</span></span>
<span id="line-d46064e35-263"><span class="lno">263</span></span>
<span id="line-d46064e35-264"><span class="lno">264</span></span>
<span id="line-d46064e35-265">265</span>
<span id="line-d46064e35-266"><span class="lno">266</span></span>
<span id="line-d46064e35-267"><span class="lno">267</span></span>
<span id="line-d46064e35-268"><span class="lno">268</span></span>
<span id="line-d46064e35-269"><span class="lno">269</span></span>
<span id="line-d46064e35-270">270</span>
<span id="line-d46064e35-271"><span class="lno">271</span></span>
<span id="line-d46064e35-272"><span class="lno">272</span></span>
<span id="line-d46064e35-273"><span class="lno">273</span></span>
<span id="line-d46064e35-274"><span class="lno">274</span></span>
<span id="line-d46064e35-275">275</span>
<span id="line-d46064e35-276"><span class="lno">276</span></span>
<span id="line-d46064e35-277"><span class="lno">277</span></span>
<span id="line-d46064e35-278"><span class="lno">278</span></span>
<span id="line-d46064e35-279"><span class="lno">279</span></span>
<span id="line-d46064e35-280">280</span>
<span id="line-d46064e35-281"><span class="lno">281</span></span>
<span id="line-d46064e35-282"><span class="lno">282</span></span>
<span id="line-d46064e35-283"><span class="lno">283</span></span>
<span id="line-d46064e35-284"><span class="lno">284</span></span>
<span id="line-d46064e35-285">285</span>
<span id="line-d46064e35-286"><span class="lno">286</span></span>
<span id="line-d46064e35-287"><span class="lno">287</span></span>
<span id="line-d46064e35-288"><span class="lno">288</span></span>
<span id="line-d46064e35-289"><span class="lno">289</span></span>
<span id="line-d46064e35-290">290</span>
<span id="line-d46064e35-291"><span class="lno">291</span></span>
<span id="line-d46064e35-292"><span class="lno">292</span></span>
<span id="line-d46064e35-293"><span class="lno">293</span></span>
<span id="line-d46064e35-294"><span class="lno">294</span></span>
<span id="line-d46064e35-295">295</span>
<span id="line-d46064e35-296"><span class="lno">296</span></span>
<span id="line-d46064e35-297"><span class="lno">297</span></span>
<span id="line-d46064e35-298"><span class="lno">298</span></span>
<span id="line-d46064e35-299"><span class="lno">299</span></span>
<span id="line-d46064e35-300">300</span>
<span id="line-d46064e35-301"><span class="lno">301</span></span>
<span id="line-d46064e35-302"><span class="lno">302</span></span>
<span id="line-d46064e35-303"><span class="lno">303</span></span>
<span id="line-d46064e35-304"><span class="lno">304</span></span>
<span id="line-d46064e35-305">305</span>
<span id="line-d46064e35-306"><span class="lno">306</span></span>
<span id="line-d46064e35-307"><span class="lno">307</span></span>
<span id="line-d46064e35-308"><span class="lno">308</span></span>
<span id="line-d46064e35-309"><span class="lno">309</span></span>
<span id="line-d46064e35-310">310</span>
<span id="line-d46064e35-311"><span class="lno">311</span></span>
<span id="line-d46064e35-312"><span class="lno">312</span></span>
<span id="line-d46064e35-313"><span class="lno">313</span></span>
<span id="line-d46064e35-314"><span class="lno">314</span></span>
<span id="line-d46064e35-315">315</span>
<span id="line-d46064e35-316"><span class="lno">316</span></span>
<span id="line-d46064e35-317"><span class="lno">317</span></span>
<span id="line-d46064e35-318"><span class="lno">318</span></span>
<span id="line-d46064e35-319"><span class="lno">319</span></span>
<span id="line-d46064e35-320">320</span>
<span id="line-d46064e35-321"><span class="lno">321</span></span>
<span id="line-d46064e35-322"><span class="lno">322</span></span>
<span id="line-d46064e35-323"><span class="lno">323</span></span>
<span id="line-d46064e35-324"><span class="lno">324</span></span>
<span id="line-d46064e35-325">325</span>
<span id="line-d46064e35-326"><span class="lno">326</span></span>
<span id="line-d46064e35-327"><span class="lno">327</span></span>
<span id="line-d46064e35-328"><span class="lno">328</span></span>
<span id="line-d46064e35-329"><span class="lno">329</span></span>
<span id="line-d46064e35-330">330</span>
<span id="line-d46064e35-331"><span class="lno">331</span></span>
<span id="line-d46064e35-332"><span class="lno">332</span></span>
<span id="line-d46064e35-333"><span class="lno">333</span></span>
<span id="line-d46064e35-334"><span class="lno">334</span></span>
<span id="line-d46064e35-335">335</span>
<span id="line-d46064e35-336"><span class="lno">336</span></span>
<span id="line-d46064e35-337"><span class="lno">337</span></span>
<span id="line-d46064e35-338"><span class="lno">338</span></span>
<span id="line-d46064e35-339"><span class="lno">339</span></span>
<span id="line-d46064e35-340">340</span>
<span id="line-d46064e35-341"><span class="lno">341</span></span>
<span id="line-d46064e35-342"><span class="lno">342</span></span>
<span id="line-d46064e35-343"><span class="lno">343</span></span>
<span id="line-d46064e35-344"><span class="lno">344</span></span>
<span id="line-d46064e35-345">345</span>
<span id="line-d46064e35-346"><span class="lno">346</span></span>
<span id="line-d46064e35-347"><span class="lno">347</span></span>
<span id="line-d46064e35-348"><span class="lno">348</span></span>
<span id="line-d46064e35-349"><span class="lno">349</span></span>
<span id="line-d46064e35-350">350</span>
<span id="line-d46064e35-351"><span class="lno">351</span></span>
<span id="line-d46064e35-352"><span class="lno">352</span></span>
<span id="line-d46064e35-353"><span class="lno">353</span></span>
<span id="line-d46064e35-354"><span class="lno">354</span></span>
<span id="line-d46064e35-355">355</span>
<span id="line-d46064e35-356"><span class="lno">356</span></span>
<span id="line-d46064e35-357"><span class="lno">357</span></span>
<span id="line-d46064e35-358"><span class="lno">358</span></span>
<span id="line-d46064e35-359"><span class="lno">359</span></span>
<span id="line-d46064e35-360">360</span>
<span id="line-d46064e35-361"><span class="lno">361</span></span>
<span id="line-d46064e35-362"><span class="lno">362</span></span>
<span id="line-d46064e35-363"><span class="lno">363</span></span>
<span id="line-d46064e35-364"><span class="lno">364</span></span>
<span id="line-d46064e35-365">365</span>
<span id="line-d46064e35-366"><span class="lno">366</span></span>
<span id="line-d46064e35-367"><span class="lno">367</span></span>
<span id="line-d46064e35-368"><span class="lno">368</span></span>
<span id="line-d46064e35-369"><span class="lno">369</span></span>
<span id="line-d46064e35-370">370</span>
<span id="line-d46064e35-371"><span class="lno">371</span></span>
<span id="line-d46064e35-372"><span class="lno">372</span></span>
<span id="line-d46064e35-373"><span class="lno">373</span></span>
<span id="line-d46064e35-374"><span class="lno">374</span></span>
<span id="line-d46064e35-375">375</span>
<span id="line-d46064e35-376"><span class="lno">376</span></span>
<span id="line-d46064e35-377"><span class="lno">377</span></span>
<span id="line-d46064e35-378"><span class="lno">378</span></span>
<span id="line-d46064e35-379"><span class="lno">379</span></span>
<span id="line-d46064e35-380">380</span>
<span id="line-d46064e35-381"><span class="lno">381</span></span>
<span id="line-d46064e35-382"><span class="lno">382</span></span>
<span id="line-d46064e35-383"><span class="lno">383</span></span>
<span id="line-d46064e35-384"><span class="lno">384</span></span>
<span id="line-d46064e35-385">385</span>
<span id="line-d46064e35-386"><span class="lno">386</span></span>
<span id="line-d46064e35-387"><span class="lno">387</span></span>
<span id="line-d46064e35-388"><span class="lno">388</span></span>
<span id="line-d46064e35-389"><span class="lno">389</span></span>
<span id="line-d46064e35-390">390</span>
<span id="line-d46064e35-391"><span class="lno">391</span></span>
<span id="line-d46064e35-392"><span class="lno">392</span></span>
<span id="line-d46064e35-393"><span class="lno">393</span></span>
<span id="line-d46064e35-394"><span class="lno">394</span></span>
<span id="line-d46064e35-395">395</span>
<span id="line-d46064e35-396"><span class="lno">396</span></span>
<span id="line-d46064e35-397"><span class="lno">397</span></span>
<span id="line-d46064e35-398"><span class="lno">398</span></span>
<span id="line-d46064e35-399"><span class="lno">399</span></span>
<span id="line-d46064e35-400">400</span>
<span id="line-d46064e35-401"><span class="lno">401</span></span>
<span id="line-d46064e35-402"><span class="lno">402</span></span>
<span id="line-d46064e35-403"><span class="lno">403</span></span>
<span id="line-d46064e35-404"><span class="lno">404</span></span>
<span id="line-d46064e35-405">405</span>
<span id="line-d46064e35-406"><span class="lno">406</span></span>
<span id="line-d46064e35-407"><span class="lno">407</span></span>
<span id="line-d46064e35-408"><span class="lno">408</span></span>
<span id="line-d46064e35-409"><span class="lno">409</span></span>
<span id="line-d46064e35-410">410</span>
<span id="line-d46064e35-411"><span class="lno">411</span></span>
<span id="line-d46064e35-412"><span class="lno">412</span></span>
<span id="line-d46064e35-413"><span class="lno">413</span></span>
<span id="line-d46064e35-414"><span class="lno">414</span></span>
<span id="line-d46064e35-415">415</span>
<span id="line-d46064e35-416"><span class="lno">416</span></span>
<span id="line-d46064e35-417"><span class="lno">417</span></span>
<span id="line-d46064e35-418"><span class="lno">418</span></span>
<span id="line-d46064e35-419"><span class="lno">419</span></span>
<span id="line-d46064e35-420">420</span>
<span id="line-d46064e35-421"><span class="lno">421</span></span>
<span id="line-d46064e35-422"><span class="lno">422</span></span>
<span id="line-d46064e35-423"><span class="lno">423</span></span>
<span id="line-d46064e35-424"><span class="lno">424</span></span>
<span id="line-d46064e35-425">425</span>
<span id="line-d46064e35-426"><span class="lno">426</span></span>
<span id="line-d46064e35-427"><span class="lno">427</span></span>
<span id="line-d46064e35-428"><span class="lno">428</span></span>
<span id="line-d46064e35-429"><span class="lno">429</span></span>
<span id="line-d46064e35-430">430</span>
<span id="line-d46064e35-431"><span class="lno">431</span></span>
<span id="line-d46064e35-432"><span class="lno">432</span></span>
<span id="line-d46064e35-433"><span class="lno">433</span></span>
<span id="line-d46064e35-434"><span class="lno">434</span></span>
<span id="line-d46064e35-435">435</span>
<span id="line-d46064e35-436"><span class="lno">436</span></span>
<span id="line-d46064e35-437"><span class="lno">437</span></span>
<span id="line-d46064e35-438"><span class="lno">438</span></span>
<span id="line-d46064e35-439"><span class="lno">439</span></span>
<span id="line-d46064e35-440">440</span>
<span id="line-d46064e35-441"><span class="lno">441</span></span>
<span id="line-d46064e35-442"><span class="lno">442</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:a="http://nwalsh.com/ns/xslt/analysis"
                xmlns:f="http://nwalsh.com/ns/xslt/functions"
                xmlns:m="http://nwalsh.com/ns/xslt/modes"
                xmlns:p="xpath-31"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://nwalsh.com/ns/xslt/analysis"
                default-mode="m:parse"
                exclude-result-prefixes="a f m p xs"
                version="3.0"&gt;

&lt;?xsltexplorer-skip-import?&gt;
&lt;xsl:import href="xpath-31.xslt"/&gt;

&lt;xsl:template match="/"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:stylesheet|xsl:transform"&gt;
  &lt;xsl:param name="href" as="xs:string?" select="()"/&gt;
  &lt;xsl:param name="extra-attributes" as="attribute()*" select="()"/&gt;

  &lt;stylesheet id="{f:encode-for-id(f:unique-id(.))}"&gt;
    &lt;xsl:copy-of select="namespace::*[local-name(.) != '']"/&gt;
    &lt;xsl:attribute name="xml:base" select="resolve-uri(base-uri(.))"/&gt;
    &lt;xsl:if test="$href"&gt;
      &lt;xsl:attribute name="href" select="$href"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="if (exists($extra-attributes))
                          then $extra-attributes
                          else f:source-location(.)"/&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:apply-templates select="*"/&gt;
  &lt;/stylesheet&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:import"&gt;
  &lt;xsl:variable name="pi"
                select="preceding-sibling::node()[not(self::text())][1]"/&gt;
  &lt;xsl:if test="not($pi/self::processing-instruction('xsltexplorer-skip-import'))"&gt;
    &lt;xsl:message select="'Importing', @href/string(), '…'"/&gt;
    &lt;xsl:apply-templates select="doc(resolve-uri(@href, base-uri(.)))/*"&gt;
      &lt;xsl:with-param name="href" select="@href/string()"/&gt;
      &lt;xsl:with-param name="extra-attributes" as="attribute()+"&gt;
        &lt;xsl:sequence select="f:source-location(.)"/&gt;
        &lt;xsl:attribute name="transclusion" select="'import'"/&gt;
      &lt;/xsl:with-param&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:include"&gt;
  &lt;xsl:variable name="pi"
                select="preceding-sibling::node()[not(self::text())][1]"/&gt;
  &lt;xsl:if test="not(preceding-sibling
                    ::processing-instruction('xsltexplorer-skip-include'))"&gt;
    &lt;xsl:message select="'Including', @href/string(), '…'"/&gt;
    &lt;xsl:apply-templates select="doc(resolve-uri(@href, base-uri(.)))/*"&gt;
      &lt;xsl:with-param name="href" select="@href/string()"/&gt;
      &lt;xsl:with-param name="extra-attributes" as="attribute()+"&gt;
        &lt;xsl:sequence select="f:source-location(.)"/&gt;
        &lt;xsl:attribute name="transclusion" select="'include'"/&gt;
      &lt;/xsl:with-param&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:template"&gt;
  &lt;xsl:message use-when="false()" select="'xsl:template', @name/string()"/&gt;

  &lt;xsl:variable name="match" as="xs:string*"&gt;
    &lt;xsl:for-each select="tokenize(@match, '\|')"&gt;
      &lt;xsl:sequence select="if (contains(., '['))
                            then normalize-space(substring-before(., '['))
                            else normalize-space(.)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="match" as="xs:string*"&gt;
    &lt;xsl:for-each select="distinct-values($match)"&gt;
      &lt;xsl:sort select="."/&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="mode" as="xs:string?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@mode"&gt;
        &lt;xsl:sequence select="f:clark-name(@mode)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="ancestor::xsl:stylesheet[1]/@default-mode"&gt;
        &lt;xsl:sequence select="f:clark-name(ancestor::xsl:stylesheet[1]/@default-mode)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="()"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="display-mode" as="xs:string?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@mode"&gt;
        &lt;xsl:sequence select="@mode/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="ancestor::xsl:stylesheet[1]/@default-mode"&gt;
        &lt;xsl:sequence select="ancestor::xsl:stylesheet[1]/@default-mode/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="()"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;template id="{f:encode-for-id(f:unique-id(.))}"&gt;
    &lt;xsl:if test="@name"&gt;
      &lt;xsl:attribute name="display-name" select="@name"/&gt;
      &lt;xsl:attribute name="name" select="f:clark-name(@name)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:copy-of select="@priority,@as"/&gt;
    &lt;xsl:if test="exists($mode)"&gt;
      &lt;xsl:attribute name="mode" select="$mode"/&gt;
      &lt;xsl:attribute name="display-mode" select="$display-mode"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="exists($match)"&gt;
      &lt;xsl:attribute name="match" select="string-join($match,'|')"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:source-location(.)"/&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:function"&gt;
  &lt;xsl:message use-when="false()" select="'xsl:function', @name/string()"/&gt;

  &lt;function id="{f:encode-for-id(f:unique-id(.)||'#'||count(xsl:param))}"
            noarity-id="{f:clark-name(@name)}"
            name="{f:clark-name(@name)}#{count(xsl:param)}"
            display-name="{@name}#{count(xsl:param)}"&gt;
    &lt;xsl:sequence select="f:source-location(.)"/&gt;
    &lt;xsl:copy-of select="@as"/&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:for-each select="xsl:param"&gt;
      &lt;param&gt;
        &lt;xsl:copy-of select="@name,@as"/&gt;
      &lt;/param&gt;
    &lt;/xsl:for-each&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/function&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:variable|xsl:param"&gt;
  &lt;xsl:message use-when="false()" select="node-name(.), @name/string()"/&gt;

  &lt;variable id="{f:encode-for-id(f:unique-id(.))}"
            class="{local-name(.)}"&gt;
    &lt;xsl:copy-of select="namespace::*[local-name(.) != '']"/&gt;
    &lt;xsl:attribute name="display-name" select="@name"/&gt;
    &lt;xsl:attribute name="name" select="f:clark-name(@name)"/&gt;
    &lt;xsl:copy-of select="@static,@as"/&gt;
    &lt;xsl:sequence select="f:source-location(.)"/&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/variable&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:call-template"&gt;
  &lt;xsl:message use-when="false()" select="node-name(.), @name/string()"/&gt;

  &lt;call-template ref="{f:clark-name(@name)}"&gt;
    &lt;xsl:copy-of select="@name"/&gt;
    &lt;xsl:sequence select="f:source-location(.)"/&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="xsl:apply-templates"&gt;
  &lt;xsl:message use-when="false()" select="node-name(.), @name/string()"/&gt;

  &lt;xsl:variable name="to" as="xs:string*"&gt;
    &lt;xsl:for-each select="tokenize(@select, '\|')"&gt;
      &lt;xsl:sequence select="if (contains(., '['))
                            then normalize-space(substring-before(., '['))
                            else normalize-space(.)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="to" as="xs:string*"&gt;
    &lt;xsl:for-each select="distinct-values($to)"&gt;
      &lt;xsl:sort select="."/&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;apply-templates&gt;
    &lt;xsl:if test="exists($to)"&gt;
      &lt;xsl:attribute name="to" select="string-join($to,'|')"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:copy-of select="@name,@mode"/&gt;
    &lt;xsl:sequence select="f:source-location(.)"/&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()"&gt;
  &lt;xsl:apply-templates select="@*"/&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="@select[namespace-uri(parent::*)
                             ='http://www.w3.org/1999/XSL/Transform']
                     |xsl:if/@test
                     |xsl:when/@test
                     |xsl:evaluate/@context-item
                     |xsl:evaluate/@xpath
                     |xsl:template/@match
                     |xsl:group-by/@group-by"&gt;
  &lt;xsl:sequence select="f:parse-expr(parent::*, .)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="@*"&gt;
  &lt;xsl:if test="contains(string(.), '{')"&gt;
    &lt;!-- this is primitive --&gt;
    &lt;xsl:variable name="value" select="replace(., '\{\{', '')"/&gt;
    &lt;xsl:variable name="value" select="replace($value, '\}\}', '')"/&gt;
    &lt;xsl:sequence select="f:process-avts(parent::*, $value)"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()|comment()|processing-instruction()"/&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:process-avts"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="value" as="xs:string"/&gt;

  &lt;xsl:if test="contains($value, '{')"&gt;
    &lt;xsl:variable name="expr" select="substring-after($value, '{')"/&gt;
    &lt;xsl:variable name="rest" select="substring-after($expr, '}')"/&gt;
    &lt;xsl:variable name="expr" select="substring-before($expr, '}')"/&gt;
    &lt;xsl:sequence select="f:parse-expr($context, $expr)"/&gt;
    &lt;xsl:sequence select="f:process-avts($context, $rest)"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:parse-expr"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="expr" as="xs:string"/&gt;

  &lt;!-- If there are no $ signs and no parens, then there
       are no variable references or function calls, so
       don't bother trying to parse the whole thing --&gt;
  &lt;xsl:if test="contains($expr, '$') or contains($expr, '(')"&gt;
    &lt;xsl:variable name="parsetree"&gt;
      &lt;xsl:sequence select="p:parse-XPath($expr)"/&gt;
    &lt;/xsl:variable&gt;    

    &lt;xsl:variable name="functions" as="element()*"&gt;
      &lt;xsl:for-each select="$parsetree//FunctionCall"&gt;
        &lt;xsl:variable name="arity" select="count(ArgumentList/Argument)"/&gt;
        &lt;xsl:variable name="qname" select="FunctionEQName/FunctionName/QName"/&gt;

        &lt;xsl:variable name="ns" as="xs:string"&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="not(contains($qname, ':'))"&gt; &lt;!-- default --&gt;
              &lt;xsl:sequence select="'http://www.w3.org/2005/xpath-functions'"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:variable name="prefix" select="substring-before($qname, ':')"/&gt;
              &lt;xsl:sequence select="namespace-uri-for-prefix($prefix, $context)"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:variable name="name"
                      select="if (contains($qname, ':'))
                              then substring-after($qname, ':')
                              else string($qname)"/&gt;
        &lt;xsl:variable name="id"
                      select="'{'||$ns||'}'||$name"/&gt;
        &lt;function-call name="{$qname}" ref="{$id}#{$arity}"&gt;
          &lt;xsl:copy-of select="$context/namespace::*[local-name(.) != '']"/&gt;
        &lt;/function-call&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;xsl:for-each-group select="$functions" group-by="@ref"&gt;
      &lt;xsl:sequence select="current-group()[1]"/&gt;
    &lt;/xsl:for-each-group&gt;

    &lt;xsl:variable name="variables" as="element()*"&gt;
      &lt;xsl:for-each select="$parsetree//VarRef//FunctionName/QName"&gt;
        &lt;xsl:variable name="ns" as="xs:string"&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="not(contains(., ':'))"&gt; &lt;!-- default --&gt;
              &lt;xsl:sequence select="''"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:variable name="prefix" select="substring-before(., ':')"/&gt;
              &lt;xsl:sequence select="namespace-uri-for-prefix($prefix, $context)"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:variable name="name"
                      select="if (contains(., ':'))
                              then substring-after(., ':')
                              else string(.)"/&gt;
        &lt;xsl:variable name="id"
                      select="'{'||$ns||'}'||$name"/&gt;
        &lt;variable-ref name="{.}" ref="{$id}"&gt;
          &lt;xsl:copy-of select="$context/namespace::*[local-name(.) != '']"/&gt;
        &lt;/variable-ref&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;xsl:for-each-group select="$variables" group-by="@ref"&gt;
      &lt;xsl:sequence select="current-group()[1]"/&gt;
    &lt;/xsl:for-each-group&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:unique-id" as="xs:string"&gt;
  &lt;xsl:param name="ref" as="element()"/&gt;

  &lt;xsl:variable name="prefix"
                select="if ($ref/self::xsl:stylesheet)
                        then ''
                        else f:unique-id($ref/ancestor::xsl:stylesheet[1]) || '-'"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$ref/self::xsl:stylesheet"&gt;
      &lt;xsl:sequence select="'S-' || f:checksum(base-uri($ref))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$ref/@name"&gt;
      &lt;xsl:sequence select="$prefix || f:clark-name($ref/@name)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$ref/self::xsl:template"&gt;
      &lt;xsl:sequence select="$prefix || 't-' || (count($ref/preceding::xsl:template)+1)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$prefix || generate-id($ref)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:encode-for-id" as="xs:string"&gt;
  &lt;xsl:param name="name" as="xs:string"/&gt;

  &lt;xsl:variable name="id" select="replace($name, '\{https?:/+', '')"/&gt;
  &lt;xsl:variable name="id" select="translate($id, '{}/#', '...,')"/&gt;

  &lt;xsl:sequence select="$id"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:clark-name" as="xs:string"&gt;
  &lt;xsl:param name="node" as="node()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/self::attribute()"&gt;
      &lt;xsl:sequence select="f:clark-name($node/parent::*, string($node))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:clark-name($node, string($node))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:clark-name" as="xs:string"&gt;
  &lt;xsl:param name="node" as="node()"/&gt;
  &lt;xsl:param name="name" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="contains($name, ':')"&gt;
      &lt;xsl:variable name="prefix" select="substring-before($name, ':')"/&gt;
      &lt;xsl:variable name="name" select="substring-after($name, ':')"/&gt;
      &lt;xsl:variable name="ns" select="namespace-uri-for-prefix($prefix, $node)"/&gt;
      &lt;xsl:sequence select="'{' || $ns || '}' || $name"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="'{}' || $name"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:source-location" as="attribute()*"&gt;
  &lt;xsl:param name="context" as="node()"/&gt;

  &lt;xsl:if xmlns:saxon="http://saxon.sf.net/"
          use-when="function-available('saxon:line-number')"
          test="saxon:line-number($context) gt 0"&gt;
    &lt;xsl:attribute name="line-number" select="saxon:line-number($context)"/&gt;
    &lt;xsl:if use-when="function-available('saxon:column-number')"
            test="saxon:column-number($context) gt 0"&gt;
      &lt;xsl:attribute name="column-number" select="saxon:column-number($context)"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;
&lt;!-- From: https://stackoverflow.com/questions/6753343/using-xsl-to-make-a-hash-of-xml-file --&gt;

&lt;xsl:function name="f:checksum" as="xs:string"&gt;
  &lt;xsl:param name="str" as="xs:string"/&gt;

  &lt;xsl:variable name="filename"
                select="if (($xspec-tests = ('1', 'yes', 'true'))
                            and contains($str, 'src/test/resources/'))
                        then substring-after($str, 'src/test/resources')
                        else $str"/&gt;

  &lt;xsl:variable name="codepoints" select="string-to-codepoints($filename)"/&gt;
  &lt;xsl:variable name="checksum"
                select="f:fletcher16($codepoints, count($codepoints), 1, 0, 0)"/&gt;
  &lt;!-- FIX ME: turn this into hex --&gt;
  &lt;xsl:sequence select="string($checksum)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:fletcher16"&gt;
  &lt;xsl:param name="str" as="xs:integer*"/&gt;
  &lt;xsl:param name="len" as="xs:integer" /&gt;
  &lt;xsl:param name="index" as="xs:integer" /&gt;
  &lt;xsl:param name="sum1" as="xs:integer" /&gt;
  &lt;xsl:param name="sum2" as="xs:integer"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$index gt $len"&gt;
      &lt;xsl:sequence select="$sum2 * 256 + $sum1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="newSum1" as="xs:integer"
                    select="($sum1 + $str[$index]) mod 255"/&gt;
      &lt;xsl:sequence select="f:fletcher16($str, $len, $index + 1, $newSum1,
                                         ($sum2 + $newSum1) mod 255)" /&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-6140"><h2>resolve.xsl</h2><p><span><span class="template all">5 templates</span></span>, <span><span class="function all">1 function</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-6140-t-1" class="instruction template"><div class="title"><span class="link" title="Line 15"><a href="#line-d46064e236-15" class="goto-lno">§</a></span>Template match ≅ a:variable-ref</div><div class="props"><div class="calls">Calls: <a href="#S-6140-nwalsh.com.ns.xslt.functions.xvariable,2">f:xvariable()</a></div><div class="mode">Mode: <code>m:resolve</code></div><div class="matches">Matches: <code>a:variable-ref</code></div></div></div><div id="S-6140-t-2" class="instruction template"><div class="title"><span class="link" title="Line 39"><a href="#line-d46064e236-39" class="goto-lno">§</a></span>Template match ≅ a:call-template</div><div class="props"><div class="mode">Mode: <code>m:resolve</code></div><div class="matches">Matches: <code>a:call-template</code></div></div></div><div id="S-6140-t-3" class="instruction template"><div class="title"><span class="link" title="Line 59"><a href="#line-d46064e236-59" class="goto-lno">§</a></span>Template match ≅ a:function-call</div><div class="props"><div class="mode">Mode: <code>m:resolve</code></div><div class="matches">Matches: <code>a:function-call</code></div></div></div><div id="S-6140-t-4" class="instruction template"><div class="title"><span class="link" title="Line 90"><a href="#line-d46064e236-90" class="goto-lno">§</a></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:resolve</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-6140-t-5" class="instruction template"><div class="title"><span class="link" title="Line 96"><a href="#line-d46064e236-96" class="goto-lno">§</a></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:resolve</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-6140-nwalsh.com.ns.xslt.functions.xvariable,2" class="instruction function"><div class="title"><span class="link" title="Line 100"><a href="#line-d46064e236-100" class="goto-lno">§</a></span>Function f:xvariable($context as element(), $ref as xs:string) as element(a:variable)? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6140-t-1">template</a>, <a href="#S-6140-nwalsh.com.ns.xslt.functions.xvariable,2">f:xvariable()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6140">resolve.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-d46064e236-1">1</span>
<span id="line-d46064e236-2"><span class="lno">2</span></span>
<span id="line-d46064e236-3"><span class="lno">3</span></span>
<span id="line-d46064e236-4"><span class="lno">4</span></span>
<span id="line-d46064e236-5">5</span>
<span id="line-d46064e236-6"><span class="lno">6</span></span>
<span id="line-d46064e236-7"><span class="lno">7</span></span>
<span id="line-d46064e236-8"><span class="lno">8</span></span>
<span id="line-d46064e236-9"><span class="lno">9</span></span>
<span id="line-d46064e236-10">10</span>
<span id="line-d46064e236-11"><span class="lno">11</span></span>
<span id="line-d46064e236-12"><span class="lno">12</span></span>
<span id="line-d46064e236-13"><span class="lno">13</span></span>
<span id="line-d46064e236-14"><span class="lno">14</span></span>
<span id="line-d46064e236-15">15</span>
<span id="line-d46064e236-16"><span class="lno">16</span></span>
<span id="line-d46064e236-17"><span class="lno">17</span></span>
<span id="line-d46064e236-18"><span class="lno">18</span></span>
<span id="line-d46064e236-19"><span class="lno">19</span></span>
<span id="line-d46064e236-20">20</span>
<span id="line-d46064e236-21"><span class="lno">21</span></span>
<span id="line-d46064e236-22"><span class="lno">22</span></span>
<span id="line-d46064e236-23"><span class="lno">23</span></span>
<span id="line-d46064e236-24"><span class="lno">24</span></span>
<span id="line-d46064e236-25">25</span>
<span id="line-d46064e236-26"><span class="lno">26</span></span>
<span id="line-d46064e236-27"><span class="lno">27</span></span>
<span id="line-d46064e236-28"><span class="lno">28</span></span>
<span id="line-d46064e236-29"><span class="lno">29</span></span>
<span id="line-d46064e236-30">30</span>
<span id="line-d46064e236-31"><span class="lno">31</span></span>
<span id="line-d46064e236-32"><span class="lno">32</span></span>
<span id="line-d46064e236-33"><span class="lno">33</span></span>
<span id="line-d46064e236-34"><span class="lno">34</span></span>
<span id="line-d46064e236-35">35</span>
<span id="line-d46064e236-36"><span class="lno">36</span></span>
<span id="line-d46064e236-37"><span class="lno">37</span></span>
<span id="line-d46064e236-38"><span class="lno">38</span></span>
<span id="line-d46064e236-39"><span class="lno">39</span></span>
<span id="line-d46064e236-40">40</span>
<span id="line-d46064e236-41"><span class="lno">41</span></span>
<span id="line-d46064e236-42"><span class="lno">42</span></span>
<span id="line-d46064e236-43"><span class="lno">43</span></span>
<span id="line-d46064e236-44"><span class="lno">44</span></span>
<span id="line-d46064e236-45">45</span>
<span id="line-d46064e236-46"><span class="lno">46</span></span>
<span id="line-d46064e236-47"><span class="lno">47</span></span>
<span id="line-d46064e236-48"><span class="lno">48</span></span>
<span id="line-d46064e236-49"><span class="lno">49</span></span>
<span id="line-d46064e236-50">50</span>
<span id="line-d46064e236-51"><span class="lno">51</span></span>
<span id="line-d46064e236-52"><span class="lno">52</span></span>
<span id="line-d46064e236-53"><span class="lno">53</span></span>
<span id="line-d46064e236-54"><span class="lno">54</span></span>
<span id="line-d46064e236-55">55</span>
<span id="line-d46064e236-56"><span class="lno">56</span></span>
<span id="line-d46064e236-57"><span class="lno">57</span></span>
<span id="line-d46064e236-58"><span class="lno">58</span></span>
<span id="line-d46064e236-59"><span class="lno">59</span></span>
<span id="line-d46064e236-60">60</span>
<span id="line-d46064e236-61"><span class="lno">61</span></span>
<span id="line-d46064e236-62"><span class="lno">62</span></span>
<span id="line-d46064e236-63"><span class="lno">63</span></span>
<span id="line-d46064e236-64"><span class="lno">64</span></span>
<span id="line-d46064e236-65">65</span>
<span id="line-d46064e236-66"><span class="lno">66</span></span>
<span id="line-d46064e236-67"><span class="lno">67</span></span>
<span id="line-d46064e236-68"><span class="lno">68</span></span>
<span id="line-d46064e236-69"><span class="lno">69</span></span>
<span id="line-d46064e236-70">70</span>
<span id="line-d46064e236-71"><span class="lno">71</span></span>
<span id="line-d46064e236-72"><span class="lno">72</span></span>
<span id="line-d46064e236-73"><span class="lno">73</span></span>
<span id="line-d46064e236-74"><span class="lno">74</span></span>
<span id="line-d46064e236-75">75</span>
<span id="line-d46064e236-76"><span class="lno">76</span></span>
<span id="line-d46064e236-77"><span class="lno">77</span></span>
<span id="line-d46064e236-78"><span class="lno">78</span></span>
<span id="line-d46064e236-79"><span class="lno">79</span></span>
<span id="line-d46064e236-80">80</span>
<span id="line-d46064e236-81"><span class="lno">81</span></span>
<span id="line-d46064e236-82"><span class="lno">82</span></span>
<span id="line-d46064e236-83"><span class="lno">83</span></span>
<span id="line-d46064e236-84"><span class="lno">84</span></span>
<span id="line-d46064e236-85">85</span>
<span id="line-d46064e236-86"><span class="lno">86</span></span>
<span id="line-d46064e236-87"><span class="lno">87</span></span>
<span id="line-d46064e236-88"><span class="lno">88</span></span>
<span id="line-d46064e236-89"><span class="lno">89</span></span>
<span id="line-d46064e236-90">90</span>
<span id="line-d46064e236-91"><span class="lno">91</span></span>
<span id="line-d46064e236-92"><span class="lno">92</span></span>
<span id="line-d46064e236-93"><span class="lno">93</span></span>
<span id="line-d46064e236-94"><span class="lno">94</span></span>
<span id="line-d46064e236-95">95</span>
<span id="line-d46064e236-96"><span class="lno">96</span></span>
<span id="line-d46064e236-97"><span class="lno">97</span></span>
<span id="line-d46064e236-98"><span class="lno">98</span></span>
<span id="line-d46064e236-99"><span class="lno">99</span></span>
<span id="line-d46064e236-100">100</span>
<span id="line-d46064e236-101"><span class="lno">101</span></span>
<span id="line-d46064e236-102"><span class="lno">102</span></span>
<span id="line-d46064e236-103"><span class="lno">103</span></span>
<span id="line-d46064e236-104"><span class="lno">104</span></span>
<span id="line-d46064e236-105">105</span>
<span id="line-d46064e236-106"><span class="lno">106</span></span>
<span id="line-d46064e236-107"><span class="lno">107</span></span>
<span id="line-d46064e236-108"><span class="lno">108</span></span>
<span id="line-d46064e236-109"><span class="lno">109</span></span>
<span id="line-d46064e236-110">110</span>
<span id="line-d46064e236-111"><span class="lno">111</span></span>
<span id="line-d46064e236-112"><span class="lno">112</span></span>
<span id="line-d46064e236-113"><span class="lno">113</span></span>
<span id="line-d46064e236-114"><span class="lno">114</span></span>
<span id="line-d46064e236-115">115</span>
<span id="line-d46064e236-116"><span class="lno">116</span></span>
<span id="line-d46064e236-117"><span class="lno">117</span></span>
<span id="line-d46064e236-118"><span class="lno">118</span></span>
<span id="line-d46064e236-119"><span class="lno">119</span></span>
<span id="line-d46064e236-120">120</span>
<span id="line-d46064e236-121"><span class="lno">121</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:a="http://nwalsh.com/ns/xslt/analysis"
                xmlns:f="http://nwalsh.com/ns/xslt/functions"
                xmlns:fp="http://nwalsh.com/ns/xslt/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://nwalsh.com/ns/xslt/modes"
                xmlns:t="http://nwalsh.com/ns/xslt/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://nwalsh.com/ns/xslt/analysis"
                default-mode="m:resolve"
                exclude-result-prefixes="a f fp h m t xs"
                version="3.0"&gt;

&lt;xsl:template match="a:variable-ref"&gt;
  &lt;xsl:variable name="ref" select="f:xvariable(., @ref)"/&gt;

  &lt;!-- If it's a reference to a top-level variable, then the last one wins. --&gt;
  &lt;xsl:variable name="ref" select="if (empty($ref) or $ref/parent::a:stylesheet)
                                   then (//a:stylesheet/a:variable[@name = $ref/@name])[last()]
                                   else $ref"/&gt;

  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($ref)"&gt;
        &lt;xsl:message select="'No variable:', @ref/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:attribute name="xref" select="$ref/@id"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;

    &lt;xsl:apply-templates select="*"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:call-template"&gt;
  &lt;xsl:variable name="ref" select="@ref"/&gt;
  &lt;xsl:variable name="ref" select="(//a:stylesheet/a:template[@name = $ref])[last()]"/&gt;

  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($ref)"&gt;
        &lt;xsl:message select="'No template:', @ref/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:attribute name="xref" select="$ref/@id"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;

    &lt;xsl:apply-templates select="*"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:function-call"&gt;
  &lt;xsl:variable name="ref" select="@ref"/&gt;
  &lt;xsl:variable name="ref" select="(//a:stylesheet/a:function[@name = $ref])[last()]"/&gt;

  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($ref)"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="starts-with(@ref, '{http://www.w3.org/2005/xpath-functions}')
                          or starts-with(@ref, '{http://www.w3.org/2001/XMLSchema}')
                          or starts-with(@ref, '{http://saxon.sf.net/}')
                          or starts-with(@ref, '{http://www.w3.org/2005/xpath-functions/array}')
                          or starts-with(@ref, '{http://www.w3.org/2005/xpath-functions/map}')"&gt;
            &lt;!-- ignore standard, builtin functions --&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:message select="'No function:', @ref/string()"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:attribute name="xref" select="$ref/@id"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;

    &lt;xsl:apply-templates select="*"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="f:xvariable" as="element(a:variable)?"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="ref" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$context/preceding-sibling::a:variable[@name=$ref]"&gt;
      &lt;xsl:sequence select="$context/preceding-sibling::a:variable[@name=$ref][1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$context/self::a:stylesheet"&gt;
      &lt;xsl:sequence select="(root($context)//a:stylesheet/a:variable[@name = $ref])[last()]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($context)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:xvariable($context/parent::*, $ref)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-28400"><h2>analyze.xsl</h2><p><span><span class="template all">5 templates</span></span>, <span><span class="function all">7 functions</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-28400-t-1" class="instruction template"><div class="title"><span class="link" title="Line 19"><a href="#line-d46064e259-19" class="goto-lno">§</a></span>Template match ≅ /</div><div class="props"><div class="mode">Mode: <code>m:analyze</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-28400-t-2" class="instruction template"><div class="title"><span class="link" title="Line 38"><a href="#line-d46064e259-38" class="goto-lno">§</a></span>Template match ≅ a:stylesheet</div><div class="props"><div class="calls">Calls: <a href="#S-28400-nwalsh.com.ns.xslt.functions.function-shadows,2">f:function-shadows()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.template-shadows,2">f:template-shadows()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.variable,2">f:variable()</a></div><div class="mode">Mode: <code>m:analyze</code></div><div class="matches">Matches: <code>a:stylesheet</code></div></div></div><div id="S-28400-t-3" class="instruction template"><div class="title"><span class="link" title="Line 196"><a href="#line-d46064e259-196" class="goto-lno">§</a></span>Template match ≅ a:function</div><div class="props"><div class="calls">Calls: <a href="#S-28400-nwalsh.com.ns.xslt.functions.function-shadows,2">f:function-shadows()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.template-calls,1">f:template-calls()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.variables-referenced,1">f:variables-referenced()</a></div><div class="mode">Mode: <code>m:analyze</code></div><div class="matches">Matches: <code>a:function</code></div></div></div><div id="S-28400-t-4" class="instruction template"><div class="title"><span class="link" title="Line 261"><a href="#line-d46064e259-261" class="goto-lno">§</a></span>Template match ≅ a:variable</div><div class="props"><div class="calls">Calls: <a href="#S-28400-nwalsh.com.ns.xslt.functions.function-calls,1">f:function-calls()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.template-calls,1">f:template-calls()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.variable,2">f:variable()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.variables-referenced,1">f:variables-referenced()</a></div><div class="mode">Mode: <code>m:analyze</code></div><div class="matches">Matches: <code>a:variable</code></div></div></div><div id="S-28400-t-5" class="instruction template"><div class="title"><span class="link" title="Line 323"><a href="#line-d46064e259-323" class="goto-lno">§</a></span>Template match ≅ a:template</div><div class="props"><div class="calls">Calls: <a href="#S-28400-nwalsh.com.ns.xslt.functions.function-calls,1">f:function-calls()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.template-calls,1">f:template-calls()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.template-shadows,2">f:template-shadows()</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.variables-referenced,1">f:variables-referenced()</a></div><div class="mode">Mode: <code>m:analyze</code></div><div class="matches">Matches: <code>a:template</code></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.variables-referenced,1" class="instruction function"><div class="title"><span class="link" title="Line 385"><a href="#line-d46064e259-385" class="goto-lno">§</a></span>Function f:variables-referenced($node as element()) as element(a:variable)*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-3">template</a>, <a href="#S-28400-t-4">template</a>, <a href="#S-28400-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.function-calls,1" class="instruction function"><div class="title"><span class="link" title="Line 390"><a href="#line-d46064e259-390" class="goto-lno">§</a></span>Function f:function-calls($node as element()) as element(a:function)*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-4">template</a>, <a href="#S-28400-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.template-calls,1" class="instruction function"><div class="title"><span class="link" title="Line 395"><a href="#line-d46064e259-395" class="goto-lno">§</a></span>Function f:template-calls($node as element()) as element(a:template)*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-3">template</a>, <a href="#S-28400-t-4">template</a>, <a href="#S-28400-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.generate-id,1" class="instruction function"><div class="title"><span class="link" title="Line 400"><a href="#line-d46064e259-400" class="goto-lno">§</a></span>Function f:generate-id($node as element()) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-2">template</a>, <a href="#S-28400-t-3">template</a>, <a href="#S-28400-t-4">template</a>, <a href="#S-28400-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.variable,2" class="instruction function"><div class="title"><span class="link" title="Line 410"><a href="#line-d46064e259-410" class="goto-lno">§</a></span>Function f:variable($context as element(), $ref as xs:string) as element(a:variable)? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-2">template</a>, <a href="#S-28400-t-4">template</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.variable,2">f:variable()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.template-shadows,2" class="instruction function"><div class="title"><span class="link" title="Line 430"><a href="#line-d46064e259-430" class="goto-lno">§</a></span>Function f:template-shadows($context as element(), $ref as xs:string) as element(a:template)? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-2">template</a>, <a href="#S-28400-t-5">template</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.template-shadows,2">f:template-shadows()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div><div id="S-28400-nwalsh.com.ns.xslt.functions.function-shadows,2" class="instruction function"><div class="title"><span class="link" title="Line 451"><a href="#line-d46064e259-451" class="goto-lno">§</a></span>Function f:function-shadows($context as element(), $ref as xs:string) as element(a:function)? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28400-t-2">template</a>, <a href="#S-28400-t-3">template</a>, <a href="#S-28400-nwalsh.com.ns.xslt.functions.function-shadows,2">f:function-shadows()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28400">analyze.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-d46064e259-1">1</span>
<span id="line-d46064e259-2"><span class="lno">2</span></span>
<span id="line-d46064e259-3"><span class="lno">3</span></span>
<span id="line-d46064e259-4"><span class="lno">4</span></span>
<span id="line-d46064e259-5">5</span>
<span id="line-d46064e259-6"><span class="lno">6</span></span>
<span id="line-d46064e259-7"><span class="lno">7</span></span>
<span id="line-d46064e259-8"><span class="lno">8</span></span>
<span id="line-d46064e259-9"><span class="lno">9</span></span>
<span id="line-d46064e259-10">10</span>
<span id="line-d46064e259-11"><span class="lno">11</span></span>
<span id="line-d46064e259-12"><span class="lno">12</span></span>
<span id="line-d46064e259-13"><span class="lno">13</span></span>
<span id="line-d46064e259-14"><span class="lno">14</span></span>
<span id="line-d46064e259-15">15</span>
<span id="line-d46064e259-16"><span class="lno">16</span></span>
<span id="line-d46064e259-17"><span class="lno">17</span></span>
<span id="line-d46064e259-18"><span class="lno">18</span></span>
<span id="line-d46064e259-19"><span class="lno">19</span></span>
<span id="line-d46064e259-20">20</span>
<span id="line-d46064e259-21"><span class="lno">21</span></span>
<span id="line-d46064e259-22"><span class="lno">22</span></span>
<span id="line-d46064e259-23"><span class="lno">23</span></span>
<span id="line-d46064e259-24"><span class="lno">24</span></span>
<span id="line-d46064e259-25">25</span>
<span id="line-d46064e259-26"><span class="lno">26</span></span>
<span id="line-d46064e259-27"><span class="lno">27</span></span>
<span id="line-d46064e259-28"><span class="lno">28</span></span>
<span id="line-d46064e259-29"><span class="lno">29</span></span>
<span id="line-d46064e259-30">30</span>
<span id="line-d46064e259-31"><span class="lno">31</span></span>
<span id="line-d46064e259-32"><span class="lno">32</span></span>
<span id="line-d46064e259-33"><span class="lno">33</span></span>
<span id="line-d46064e259-34"><span class="lno">34</span></span>
<span id="line-d46064e259-35">35</span>
<span id="line-d46064e259-36"><span class="lno">36</span></span>
<span id="line-d46064e259-37"><span class="lno">37</span></span>
<span id="line-d46064e259-38"><span class="lno">38</span></span>
<span id="line-d46064e259-39"><span class="lno">39</span></span>
<span id="line-d46064e259-40">40</span>
<span id="line-d46064e259-41"><span class="lno">41</span></span>
<span id="line-d46064e259-42"><span class="lno">42</span></span>
<span id="line-d46064e259-43"><span class="lno">43</span></span>
<span id="line-d46064e259-44"><span class="lno">44</span></span>
<span id="line-d46064e259-45">45</span>
<span id="line-d46064e259-46"><span class="lno">46</span></span>
<span id="line-d46064e259-47"><span class="lno">47</span></span>
<span id="line-d46064e259-48"><span class="lno">48</span></span>
<span id="line-d46064e259-49"><span class="lno">49</span></span>
<span id="line-d46064e259-50">50</span>
<span id="line-d46064e259-51"><span class="lno">51</span></span>
<span id="line-d46064e259-52"><span class="lno">52</span></span>
<span id="line-d46064e259-53"><span class="lno">53</span></span>
<span id="line-d46064e259-54"><span class="lno">54</span></span>
<span id="line-d46064e259-55">55</span>
<span id="line-d46064e259-56"><span class="lno">56</span></span>
<span id="line-d46064e259-57"><span class="lno">57</span></span>
<span id="line-d46064e259-58"><span class="lno">58</span></span>
<span id="line-d46064e259-59"><span class="lno">59</span></span>
<span id="line-d46064e259-60">60</span>
<span id="line-d46064e259-61"><span class="lno">61</span></span>
<span id="line-d46064e259-62"><span class="lno">62</span></span>
<span id="line-d46064e259-63"><span class="lno">63</span></span>
<span id="line-d46064e259-64"><span class="lno">64</span></span>
<span id="line-d46064e259-65">65</span>
<span id="line-d46064e259-66"><span class="lno">66</span></span>
<span id="line-d46064e259-67"><span class="lno">67</span></span>
<span id="line-d46064e259-68"><span class="lno">68</span></span>
<span id="line-d46064e259-69"><span class="lno">69</span></span>
<span id="line-d46064e259-70">70</span>
<span id="line-d46064e259-71"><span class="lno">71</span></span>
<span id="line-d46064e259-72"><span class="lno">72</span></span>
<span id="line-d46064e259-73"><span class="lno">73</span></span>
<span id="line-d46064e259-74"><span class="lno">74</span></span>
<span id="line-d46064e259-75">75</span>
<span id="line-d46064e259-76"><span class="lno">76</span></span>
<span id="line-d46064e259-77"><span class="lno">77</span></span>
<span id="line-d46064e259-78"><span class="lno">78</span></span>
<span id="line-d46064e259-79"><span class="lno">79</span></span>
<span id="line-d46064e259-80">80</span>
<span id="line-d46064e259-81"><span class="lno">81</span></span>
<span id="line-d46064e259-82"><span class="lno">82</span></span>
<span id="line-d46064e259-83"><span class="lno">83</span></span>
<span id="line-d46064e259-84"><span class="lno">84</span></span>
<span id="line-d46064e259-85">85</span>
<span id="line-d46064e259-86"><span class="lno">86</span></span>
<span id="line-d46064e259-87"><span class="lno">87</span></span>
<span id="line-d46064e259-88"><span class="lno">88</span></span>
<span id="line-d46064e259-89"><span class="lno">89</span></span>
<span id="line-d46064e259-90">90</span>
<span id="line-d46064e259-91"><span class="lno">91</span></span>
<span id="line-d46064e259-92"><span class="lno">92</span></span>
<span id="line-d46064e259-93"><span class="lno">93</span></span>
<span id="line-d46064e259-94"><span class="lno">94</span></span>
<span id="line-d46064e259-95">95</span>
<span id="line-d46064e259-96"><span class="lno">96</span></span>
<span id="line-d46064e259-97"><span class="lno">97</span></span>
<span id="line-d46064e259-98"><span class="lno">98</span></span>
<span id="line-d46064e259-99"><span class="lno">99</span></span>
<span id="line-d46064e259-100">100</span>
<span id="line-d46064e259-101"><span class="lno">101</span></span>
<span id="line-d46064e259-102"><span class="lno">102</span></span>
<span id="line-d46064e259-103"><span class="lno">103</span></span>
<span id="line-d46064e259-104"><span class="lno">104</span></span>
<span id="line-d46064e259-105">105</span>
<span id="line-d46064e259-106"><span class="lno">106</span></span>
<span id="line-d46064e259-107"><span class="lno">107</span></span>
<span id="line-d46064e259-108"><span class="lno">108</span></span>
<span id="line-d46064e259-109"><span class="lno">109</span></span>
<span id="line-d46064e259-110">110</span>
<span id="line-d46064e259-111"><span class="lno">111</span></span>
<span id="line-d46064e259-112"><span class="lno">112</span></span>
<span id="line-d46064e259-113"><span class="lno">113</span></span>
<span id="line-d46064e259-114"><span class="lno">114</span></span>
<span id="line-d46064e259-115">115</span>
<span id="line-d46064e259-116"><span class="lno">116</span></span>
<span id="line-d46064e259-117"><span class="lno">117</span></span>
<span id="line-d46064e259-118"><span class="lno">118</span></span>
<span id="line-d46064e259-119"><span class="lno">119</span></span>
<span id="line-d46064e259-120">120</span>
<span id="line-d46064e259-121"><span class="lno">121</span></span>
<span id="line-d46064e259-122"><span class="lno">122</span></span>
<span id="line-d46064e259-123"><span class="lno">123</span></span>
<span id="line-d46064e259-124"><span class="lno">124</span></span>
<span id="line-d46064e259-125">125</span>
<span id="line-d46064e259-126"><span class="lno">126</span></span>
<span id="line-d46064e259-127"><span class="lno">127</span></span>
<span id="line-d46064e259-128"><span class="lno">128</span></span>
<span id="line-d46064e259-129"><span class="lno">129</span></span>
<span id="line-d46064e259-130">130</span>
<span id="line-d46064e259-131"><span class="lno">131</span></span>
<span id="line-d46064e259-132"><span class="lno">132</span></span>
<span id="line-d46064e259-133"><span class="lno">133</span></span>
<span id="line-d46064e259-134"><span class="lno">134</span></span>
<span id="line-d46064e259-135">135</span>
<span id="line-d46064e259-136"><span class="lno">136</span></span>
<span id="line-d46064e259-137"><span class="lno">137</span></span>
<span id="line-d46064e259-138"><span class="lno">138</span></span>
<span id="line-d46064e259-139"><span class="lno">139</span></span>
<span id="line-d46064e259-140">140</span>
<span id="line-d46064e259-141"><span class="lno">141</span></span>
<span id="line-d46064e259-142"><span class="lno">142</span></span>
<span id="line-d46064e259-143"><span class="lno">143</span></span>
<span id="line-d46064e259-144"><span class="lno">144</span></span>
<span id="line-d46064e259-145">145</span>
<span id="line-d46064e259-146"><span class="lno">146</span></span>
<span id="line-d46064e259-147"><span class="lno">147</span></span>
<span id="line-d46064e259-148"><span class="lno">148</span></span>
<span id="line-d46064e259-149"><span class="lno">149</span></span>
<span id="line-d46064e259-150">150</span>
<span id="line-d46064e259-151"><span class="lno">151</span></span>
<span id="line-d46064e259-152"><span class="lno">152</span></span>
<span id="line-d46064e259-153"><span class="lno">153</span></span>
<span id="line-d46064e259-154"><span class="lno">154</span></span>
<span id="line-d46064e259-155">155</span>
<span id="line-d46064e259-156"><span class="lno">156</span></span>
<span id="line-d46064e259-157"><span class="lno">157</span></span>
<span id="line-d46064e259-158"><span class="lno">158</span></span>
<span id="line-d46064e259-159"><span class="lno">159</span></span>
<span id="line-d46064e259-160">160</span>
<span id="line-d46064e259-161"><span class="lno">161</span></span>
<span id="line-d46064e259-162"><span class="lno">162</span></span>
<span id="line-d46064e259-163"><span class="lno">163</span></span>
<span id="line-d46064e259-164"><span class="lno">164</span></span>
<span id="line-d46064e259-165">165</span>
<span id="line-d46064e259-166"><span class="lno">166</span></span>
<span id="line-d46064e259-167"><span class="lno">167</span></span>
<span id="line-d46064e259-168"><span class="lno">168</span></span>
<span id="line-d46064e259-169"><span class="lno">169</span></span>
<span id="line-d46064e259-170">170</span>
<span id="line-d46064e259-171"><span class="lno">171</span></span>
<span id="line-d46064e259-172"><span class="lno">172</span></span>
<span id="line-d46064e259-173"><span class="lno">173</span></span>
<span id="line-d46064e259-174"><span class="lno">174</span></span>
<span id="line-d46064e259-175">175</span>
<span id="line-d46064e259-176"><span class="lno">176</span></span>
<span id="line-d46064e259-177"><span class="lno">177</span></span>
<span id="line-d46064e259-178"><span class="lno">178</span></span>
<span id="line-d46064e259-179"><span class="lno">179</span></span>
<span id="line-d46064e259-180">180</span>
<span id="line-d46064e259-181"><span class="lno">181</span></span>
<span id="line-d46064e259-182"><span class="lno">182</span></span>
<span id="line-d46064e259-183"><span class="lno">183</span></span>
<span id="line-d46064e259-184"><span class="lno">184</span></span>
<span id="line-d46064e259-185">185</span>
<span id="line-d46064e259-186"><span class="lno">186</span></span>
<span id="line-d46064e259-187"><span class="lno">187</span></span>
<span id="line-d46064e259-188"><span class="lno">188</span></span>
<span id="line-d46064e259-189"><span class="lno">189</span></span>
<span id="line-d46064e259-190">190</span>
<span id="line-d46064e259-191"><span class="lno">191</span></span>
<span id="line-d46064e259-192"><span class="lno">192</span></span>
<span id="line-d46064e259-193"><span class="lno">193</span></span>
<span id="line-d46064e259-194"><span class="lno">194</span></span>
<span id="line-d46064e259-195">195</span>
<span id="line-d46064e259-196"><span class="lno">196</span></span>
<span id="line-d46064e259-197"><span class="lno">197</span></span>
<span id="line-d46064e259-198"><span class="lno">198</span></span>
<span id="line-d46064e259-199"><span class="lno">199</span></span>
<span id="line-d46064e259-200">200</span>
<span id="line-d46064e259-201"><span class="lno">201</span></span>
<span id="line-d46064e259-202"><span class="lno">202</span></span>
<span id="line-d46064e259-203"><span class="lno">203</span></span>
<span id="line-d46064e259-204"><span class="lno">204</span></span>
<span id="line-d46064e259-205">205</span>
<span id="line-d46064e259-206"><span class="lno">206</span></span>
<span id="line-d46064e259-207"><span class="lno">207</span></span>
<span id="line-d46064e259-208"><span class="lno">208</span></span>
<span id="line-d46064e259-209"><span class="lno">209</span></span>
<span id="line-d46064e259-210">210</span>
<span id="line-d46064e259-211"><span class="lno">211</span></span>
<span id="line-d46064e259-212"><span class="lno">212</span></span>
<span id="line-d46064e259-213"><span class="lno">213</span></span>
<span id="line-d46064e259-214"><span class="lno">214</span></span>
<span id="line-d46064e259-215">215</span>
<span id="line-d46064e259-216"><span class="lno">216</span></span>
<span id="line-d46064e259-217"><span class="lno">217</span></span>
<span id="line-d46064e259-218"><span class="lno">218</span></span>
<span id="line-d46064e259-219"><span class="lno">219</span></span>
<span id="line-d46064e259-220">220</span>
<span id="line-d46064e259-221"><span class="lno">221</span></span>
<span id="line-d46064e259-222"><span class="lno">222</span></span>
<span id="line-d46064e259-223"><span class="lno">223</span></span>
<span id="line-d46064e259-224"><span class="lno">224</span></span>
<span id="line-d46064e259-225">225</span>
<span id="line-d46064e259-226"><span class="lno">226</span></span>
<span id="line-d46064e259-227"><span class="lno">227</span></span>
<span id="line-d46064e259-228"><span class="lno">228</span></span>
<span id="line-d46064e259-229"><span class="lno">229</span></span>
<span id="line-d46064e259-230">230</span>
<span id="line-d46064e259-231"><span class="lno">231</span></span>
<span id="line-d46064e259-232"><span class="lno">232</span></span>
<span id="line-d46064e259-233"><span class="lno">233</span></span>
<span id="line-d46064e259-234"><span class="lno">234</span></span>
<span id="line-d46064e259-235">235</span>
<span id="line-d46064e259-236"><span class="lno">236</span></span>
<span id="line-d46064e259-237"><span class="lno">237</span></span>
<span id="line-d46064e259-238"><span class="lno">238</span></span>
<span id="line-d46064e259-239"><span class="lno">239</span></span>
<span id="line-d46064e259-240">240</span>
<span id="line-d46064e259-241"><span class="lno">241</span></span>
<span id="line-d46064e259-242"><span class="lno">242</span></span>
<span id="line-d46064e259-243"><span class="lno">243</span></span>
<span id="line-d46064e259-244"><span class="lno">244</span></span>
<span id="line-d46064e259-245">245</span>
<span id="line-d46064e259-246"><span class="lno">246</span></span>
<span id="line-d46064e259-247"><span class="lno">247</span></span>
<span id="line-d46064e259-248"><span class="lno">248</span></span>
<span id="line-d46064e259-249"><span class="lno">249</span></span>
<span id="line-d46064e259-250">250</span>
<span id="line-d46064e259-251"><span class="lno">251</span></span>
<span id="line-d46064e259-252"><span class="lno">252</span></span>
<span id="line-d46064e259-253"><span class="lno">253</span></span>
<span id="line-d46064e259-254"><span class="lno">254</span></span>
<span id="line-d46064e259-255">255</span>
<span id="line-d46064e259-256"><span class="lno">256</span></span>
<span id="line-d46064e259-257"><span class="lno">257</span></span>
<span id="line-d46064e259-258"><span class="lno">258</span></span>
<span id="line-d46064e259-259"><span class="lno">259</span></span>
<span id="line-d46064e259-260">260</span>
<span id="line-d46064e259-261"><span class="lno">261</span></span>
<span id="line-d46064e259-262"><span class="lno">262</span></span>
<span id="line-d46064e259-263"><span class="lno">263</span></span>
<span id="line-d46064e259-264"><span class="lno">264</span></span>
<span id="line-d46064e259-265">265</span>
<span id="line-d46064e259-266"><span class="lno">266</span></span>
<span id="line-d46064e259-267"><span class="lno">267</span></span>
<span id="line-d46064e259-268"><span class="lno">268</span></span>
<span id="line-d46064e259-269"><span class="lno">269</span></span>
<span id="line-d46064e259-270">270</span>
<span id="line-d46064e259-271"><span class="lno">271</span></span>
<span id="line-d46064e259-272"><span class="lno">272</span></span>
<span id="line-d46064e259-273"><span class="lno">273</span></span>
<span id="line-d46064e259-274"><span class="lno">274</span></span>
<span id="line-d46064e259-275">275</span>
<span id="line-d46064e259-276"><span class="lno">276</span></span>
<span id="line-d46064e259-277"><span class="lno">277</span></span>
<span id="line-d46064e259-278"><span class="lno">278</span></span>
<span id="line-d46064e259-279"><span class="lno">279</span></span>
<span id="line-d46064e259-280">280</span>
<span id="line-d46064e259-281"><span class="lno">281</span></span>
<span id="line-d46064e259-282"><span class="lno">282</span></span>
<span id="line-d46064e259-283"><span class="lno">283</span></span>
<span id="line-d46064e259-284"><span class="lno">284</span></span>
<span id="line-d46064e259-285">285</span>
<span id="line-d46064e259-286"><span class="lno">286</span></span>
<span id="line-d46064e259-287"><span class="lno">287</span></span>
<span id="line-d46064e259-288"><span class="lno">288</span></span>
<span id="line-d46064e259-289"><span class="lno">289</span></span>
<span id="line-d46064e259-290">290</span>
<span id="line-d46064e259-291"><span class="lno">291</span></span>
<span id="line-d46064e259-292"><span class="lno">292</span></span>
<span id="line-d46064e259-293"><span class="lno">293</span></span>
<span id="line-d46064e259-294"><span class="lno">294</span></span>
<span id="line-d46064e259-295">295</span>
<span id="line-d46064e259-296"><span class="lno">296</span></span>
<span id="line-d46064e259-297"><span class="lno">297</span></span>
<span id="line-d46064e259-298"><span class="lno">298</span></span>
<span id="line-d46064e259-299"><span class="lno">299</span></span>
<span id="line-d46064e259-300">300</span>
<span id="line-d46064e259-301"><span class="lno">301</span></span>
<span id="line-d46064e259-302"><span class="lno">302</span></span>
<span id="line-d46064e259-303"><span class="lno">303</span></span>
<span id="line-d46064e259-304"><span class="lno">304</span></span>
<span id="line-d46064e259-305">305</span>
<span id="line-d46064e259-306"><span class="lno">306</span></span>
<span id="line-d46064e259-307"><span class="lno">307</span></span>
<span id="line-d46064e259-308"><span class="lno">308</span></span>
<span id="line-d46064e259-309"><span class="lno">309</span></span>
<span id="line-d46064e259-310">310</span>
<span id="line-d46064e259-311"><span class="lno">311</span></span>
<span id="line-d46064e259-312"><span class="lno">312</span></span>
<span id="line-d46064e259-313"><span class="lno">313</span></span>
<span id="line-d46064e259-314"><span class="lno">314</span></span>
<span id="line-d46064e259-315">315</span>
<span id="line-d46064e259-316"><span class="lno">316</span></span>
<span id="line-d46064e259-317"><span class="lno">317</span></span>
<span id="line-d46064e259-318"><span class="lno">318</span></span>
<span id="line-d46064e259-319"><span class="lno">319</span></span>
<span id="line-d46064e259-320">320</span>
<span id="line-d46064e259-321"><span class="lno">321</span></span>
<span id="line-d46064e259-322"><span class="lno">322</span></span>
<span id="line-d46064e259-323"><span class="lno">323</span></span>
<span id="line-d46064e259-324"><span class="lno">324</span></span>
<span id="line-d46064e259-325">325</span>
<span id="line-d46064e259-326"><span class="lno">326</span></span>
<span id="line-d46064e259-327"><span class="lno">327</span></span>
<span id="line-d46064e259-328"><span class="lno">328</span></span>
<span id="line-d46064e259-329"><span class="lno">329</span></span>
<span id="line-d46064e259-330">330</span>
<span id="line-d46064e259-331"><span class="lno">331</span></span>
<span id="line-d46064e259-332"><span class="lno">332</span></span>
<span id="line-d46064e259-333"><span class="lno">333</span></span>
<span id="line-d46064e259-334"><span class="lno">334</span></span>
<span id="line-d46064e259-335">335</span>
<span id="line-d46064e259-336"><span class="lno">336</span></span>
<span id="line-d46064e259-337"><span class="lno">337</span></span>
<span id="line-d46064e259-338"><span class="lno">338</span></span>
<span id="line-d46064e259-339"><span class="lno">339</span></span>
<span id="line-d46064e259-340">340</span>
<span id="line-d46064e259-341"><span class="lno">341</span></span>
<span id="line-d46064e259-342"><span class="lno">342</span></span>
<span id="line-d46064e259-343"><span class="lno">343</span></span>
<span id="line-d46064e259-344"><span class="lno">344</span></span>
<span id="line-d46064e259-345">345</span>
<span id="line-d46064e259-346"><span class="lno">346</span></span>
<span id="line-d46064e259-347"><span class="lno">347</span></span>
<span id="line-d46064e259-348"><span class="lno">348</span></span>
<span id="line-d46064e259-349"><span class="lno">349</span></span>
<span id="line-d46064e259-350">350</span>
<span id="line-d46064e259-351"><span class="lno">351</span></span>
<span id="line-d46064e259-352"><span class="lno">352</span></span>
<span id="line-d46064e259-353"><span class="lno">353</span></span>
<span id="line-d46064e259-354"><span class="lno">354</span></span>
<span id="line-d46064e259-355">355</span>
<span id="line-d46064e259-356"><span class="lno">356</span></span>
<span id="line-d46064e259-357"><span class="lno">357</span></span>
<span id="line-d46064e259-358"><span class="lno">358</span></span>
<span id="line-d46064e259-359"><span class="lno">359</span></span>
<span id="line-d46064e259-360">360</span>
<span id="line-d46064e259-361"><span class="lno">361</span></span>
<span id="line-d46064e259-362"><span class="lno">362</span></span>
<span id="line-d46064e259-363"><span class="lno">363</span></span>
<span id="line-d46064e259-364"><span class="lno">364</span></span>
<span id="line-d46064e259-365">365</span>
<span id="line-d46064e259-366"><span class="lno">366</span></span>
<span id="line-d46064e259-367"><span class="lno">367</span></span>
<span id="line-d46064e259-368"><span class="lno">368</span></span>
<span id="line-d46064e259-369"><span class="lno">369</span></span>
<span id="line-d46064e259-370">370</span>
<span id="line-d46064e259-371"><span class="lno">371</span></span>
<span id="line-d46064e259-372"><span class="lno">372</span></span>
<span id="line-d46064e259-373"><span class="lno">373</span></span>
<span id="line-d46064e259-374"><span class="lno">374</span></span>
<span id="line-d46064e259-375">375</span>
<span id="line-d46064e259-376"><span class="lno">376</span></span>
<span id="line-d46064e259-377"><span class="lno">377</span></span>
<span id="line-d46064e259-378"><span class="lno">378</span></span>
<span id="line-d46064e259-379"><span class="lno">379</span></span>
<span id="line-d46064e259-380">380</span>
<span id="line-d46064e259-381"><span class="lno">381</span></span>
<span id="line-d46064e259-382"><span class="lno">382</span></span>
<span id="line-d46064e259-383"><span class="lno">383</span></span>
<span id="line-d46064e259-384"><span class="lno">384</span></span>
<span id="line-d46064e259-385">385</span>
<span id="line-d46064e259-386"><span class="lno">386</span></span>
<span id="line-d46064e259-387"><span class="lno">387</span></span>
<span id="line-d46064e259-388"><span class="lno">388</span></span>
<span id="line-d46064e259-389"><span class="lno">389</span></span>
<span id="line-d46064e259-390">390</span>
<span id="line-d46064e259-391"><span class="lno">391</span></span>
<span id="line-d46064e259-392"><span class="lno">392</span></span>
<span id="line-d46064e259-393"><span class="lno">393</span></span>
<span id="line-d46064e259-394"><span class="lno">394</span></span>
<span id="line-d46064e259-395">395</span>
<span id="line-d46064e259-396"><span class="lno">396</span></span>
<span id="line-d46064e259-397"><span class="lno">397</span></span>
<span id="line-d46064e259-398"><span class="lno">398</span></span>
<span id="line-d46064e259-399"><span class="lno">399</span></span>
<span id="line-d46064e259-400">400</span>
<span id="line-d46064e259-401"><span class="lno">401</span></span>
<span id="line-d46064e259-402"><span class="lno">402</span></span>
<span id="line-d46064e259-403"><span class="lno">403</span></span>
<span id="line-d46064e259-404"><span class="lno">404</span></span>
<span id="line-d46064e259-405">405</span>
<span id="line-d46064e259-406"><span class="lno">406</span></span>
<span id="line-d46064e259-407"><span class="lno">407</span></span>
<span id="line-d46064e259-408"><span class="lno">408</span></span>
<span id="line-d46064e259-409"><span class="lno">409</span></span>
<span id="line-d46064e259-410">410</span>
<span id="line-d46064e259-411"><span class="lno">411</span></span>
<span id="line-d46064e259-412"><span class="lno">412</span></span>
<span id="line-d46064e259-413"><span class="lno">413</span></span>
<span id="line-d46064e259-414"><span class="lno">414</span></span>
<span id="line-d46064e259-415">415</span>
<span id="line-d46064e259-416"><span class="lno">416</span></span>
<span id="line-d46064e259-417"><span class="lno">417</span></span>
<span id="line-d46064e259-418"><span class="lno">418</span></span>
<span id="line-d46064e259-419"><span class="lno">419</span></span>
<span id="line-d46064e259-420">420</span>
<span id="line-d46064e259-421"><span class="lno">421</span></span>
<span id="line-d46064e259-422"><span class="lno">422</span></span>
<span id="line-d46064e259-423"><span class="lno">423</span></span>
<span id="line-d46064e259-424"><span class="lno">424</span></span>
<span id="line-d46064e259-425">425</span>
<span id="line-d46064e259-426"><span class="lno">426</span></span>
<span id="line-d46064e259-427"><span class="lno">427</span></span>
<span id="line-d46064e259-428"><span class="lno">428</span></span>
<span id="line-d46064e259-429"><span class="lno">429</span></span>
<span id="line-d46064e259-430">430</span>
<span id="line-d46064e259-431"><span class="lno">431</span></span>
<span id="line-d46064e259-432"><span class="lno">432</span></span>
<span id="line-d46064e259-433"><span class="lno">433</span></span>
<span id="line-d46064e259-434"><span class="lno">434</span></span>
<span id="line-d46064e259-435">435</span>
<span id="line-d46064e259-436"><span class="lno">436</span></span>
<span id="line-d46064e259-437"><span class="lno">437</span></span>
<span id="line-d46064e259-438"><span class="lno">438</span></span>
<span id="line-d46064e259-439"><span class="lno">439</span></span>
<span id="line-d46064e259-440">440</span>
<span id="line-d46064e259-441"><span class="lno">441</span></span>
<span id="line-d46064e259-442"><span class="lno">442</span></span>
<span id="line-d46064e259-443"><span class="lno">443</span></span>
<span id="line-d46064e259-444"><span class="lno">444</span></span>
<span id="line-d46064e259-445">445</span>
<span id="line-d46064e259-446"><span class="lno">446</span></span>
<span id="line-d46064e259-447"><span class="lno">447</span></span>
<span id="line-d46064e259-448"><span class="lno">448</span></span>
<span id="line-d46064e259-449"><span class="lno">449</span></span>
<span id="line-d46064e259-450">450</span>
<span id="line-d46064e259-451"><span class="lno">451</span></span>
<span id="line-d46064e259-452"><span class="lno">452</span></span>
<span id="line-d46064e259-453"><span class="lno">453</span></span>
<span id="line-d46064e259-454"><span class="lno">454</span></span>
<span id="line-d46064e259-455">455</span>
<span id="line-d46064e259-456"><span class="lno">456</span></span>
<span id="line-d46064e259-457"><span class="lno">457</span></span>
<span id="line-d46064e259-458"><span class="lno">458</span></span>
<span id="line-d46064e259-459"><span class="lno">459</span></span>
<span id="line-d46064e259-460">460</span>
<span id="line-d46064e259-461"><span class="lno">461</span></span>
<span id="line-d46064e259-462"><span class="lno">462</span></span>
<span id="line-d46064e259-463"><span class="lno">463</span></span>
<span id="line-d46064e259-464"><span class="lno">464</span></span>
<span id="line-d46064e259-465">465</span>
<span id="line-d46064e259-466"><span class="lno">466</span></span>
<span id="line-d46064e259-467"><span class="lno">467</span></span>
<span id="line-d46064e259-468"><span class="lno">468</span></span>
<span id="line-d46064e259-469"><span class="lno">469</span></span>
<span id="line-d46064e259-470">470</span>
<span id="line-d46064e259-471"><span class="lno">471</span></span>
<span id="line-d46064e259-472"><span class="lno">472</span></span>
<span id="line-d46064e259-473"><span class="lno">473</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:a="http://nwalsh.com/ns/xslt/analysis"
                xmlns:f="http://nwalsh.com/ns/xslt/functions"
                xmlns:fp="http://nwalsh.com/ns/xslt/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://nwalsh.com/ns/xslt/modes"
                xmlns:t="http://nwalsh.com/ns/xslt/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://nwalsh.com/ns/xslt/analysis"
                default-mode="m:analyze"
                exclude-result-prefixes="a f fp h m t xs"
                version="3.0"&gt;

&lt;xsl:key name="fnoarity" match="a:function" use="@noarity-id"/&gt;
&lt;xsl:key name="id" match="*" use="@id"/&gt;
&lt;xsl:key name="xref" match="*" use="@xref"/&gt;

&lt;xsl:template match="/"&gt;
  &lt;summary&gt;
    &lt;xsl:attribute name="xml:base" select="base-uri(/*)"/&gt;
    &lt;xsl:attribute name="imports"
                   select="count(/a:stylesheet//a:stylesheet[@transclusion='import'])"/&gt;
    &lt;xsl:attribute name="includes"
                   select="count(/a:stylesheet//a:stylesheet[@transclusion='include'])"/&gt;
    &lt;xsl:attribute name="variables"
                   select="count(//a:variable[parent::a:stylesheet and @class='variable'])"/&gt;
    &lt;xsl:attribute name="params"
                   select="count(//a:variable[parent::a:stylesheet and @class='param'])"/&gt;
    &lt;xsl:attribute name="templates"
                   select="count(//a:template[parent::a:stylesheet])"/&gt;
    &lt;xsl:attribute name="functions"
                   select="count(//a:function[parent::a:stylesheet])"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/summary&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:stylesheet"&gt;
  &lt;xsl:variable name="stylesheet" select="."/&gt;
  &lt;xsl:variable name="depth" select="count(ancestor::a:stylesheet)+1"/&gt;

  &lt;stylesheet&gt;
    &lt;xsl:copy-of select="@id,@xml:base,@depth,@href,@transclusion"/&gt;

    &lt;xsl:variable name="imports" select="a:stylesheet[@transclusion='import']"/&gt;
    &lt;xsl:variable name="includes" select="a:stylesheet[@transclusion='include']"/&gt;
    &lt;xsl:variable name="vars" select="a:variable[@class='variable']"/&gt;
    &lt;xsl:variable name="params" select="a:variable[@class='param']"/&gt;
    &lt;xsl:variable name="templates" select="a:template"/&gt;
    &lt;xsl:variable name="functions" select="a:function"/&gt;

    &lt;xsl:attribute name="imports" select="count($imports)"/&gt;
    &lt;xsl:attribute name="includes" select="count($includes)"/&gt;
    &lt;xsl:attribute name="variables" select="count($vars)"/&gt;
    &lt;xsl:attribute name="params" select="count($params)"/&gt;
    &lt;xsl:attribute name="templates" select="count($templates)"/&gt;
    &lt;xsl:attribute name="functions" select="count($functions)"/&gt;

    &lt;xsl:variable name="vp-unused" as="element(a:variable)*"
                  select="a:variable[empty(key('xref', @id))]"/&gt;

    &lt;xsl:variable name="vp-shadows"
                  select="a:variable[f:variable(., @name/string())]"/&gt;

    &lt;xsl:variable name="vp-elsewhere" as="element(a:variable)*"&gt;
      &lt;xsl:for-each select="a:variable"&gt;
        &lt;xsl:variable name="used-in"
                      select="key('xref', @id, root($stylesheet))
                                /ancestor::a:stylesheet[not(@transclusion='include')][1]
                              union ()"/&gt;
        &lt;xsl:if test="count($used-in) = 1 and exists($used-in except parent::*)"&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;variables&gt;
      &lt;xsl:for-each select="$vp-unused[@class='variable']"&gt;
        &lt;unused&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/unused&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$vp-shadows[@class='variable']"&gt;
        &lt;shadows&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadows&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$vp-elsewhere[@class='variable']"&gt;
        &lt;elsewhere&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/elsewhere&gt;
      &lt;/xsl:for-each&gt;
    &lt;/variables&gt;

    &lt;params&gt;
      &lt;xsl:for-each select="$vp-unused[@class='param']"&gt;
        &lt;unused&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/unused&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$vp-shadows[@class='param']"&gt;
        &lt;shadows&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadows&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$vp-elsewhere[@class='param']"&gt;
        &lt;elsewhere&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/elsewhere&gt;
      &lt;/xsl:for-each&gt;
    &lt;/params&gt;

    &lt;xsl:variable name="templates-unused" as="element(a:template)*"&gt;
      &lt;xsl:for-each select="a:template[@name]"&gt;
        &lt;xsl:variable name="this" select="."/&gt;
        &lt;xsl:variable name="used-in" as="element()*"&gt;
          &lt;xsl:for-each select="key('xref', @id, root($stylesheet))"&gt;
            &lt;!-- recursion doesn't count as use --&gt;
            &lt;xsl:if test="not($this intersect ancestor::*)"&gt;
              &lt;xsl:sequence select="."/&gt;
            &lt;/xsl:if&gt;
          &lt;/xsl:for-each&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:if test="empty($used-in)"&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;xsl:variable name="templates-shadow"
                  select="a:template[@name and f:template-shadows(., @name/string())]"/&gt;

    &lt;xsl:variable name="templates-elsewhere" as="element(a:template)*"&gt;
      &lt;xsl:for-each select="a:template[@name]"&gt;
        &lt;xsl:variable name="used-by"
                      select="(key('xref', @id)
                              /ancestor::*[parent::a:stylesheet[not(@transclusion='include')]][1])
                              union ()"/&gt;
        &lt;xsl:variable name="used-by-modules"
                      select="$used-by/parent::* union ()"/&gt;
        &lt;xsl:if test="count($used-by-modules) = 1
                      and not(parent::* is $used-by-modules)"&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;templates&gt;
      &lt;xsl:for-each select="$templates-unused"&gt;
        &lt;unused&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/unused&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$templates-shadow"&gt;
        &lt;shadows&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadows&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$templates-elsewhere"&gt;
        &lt;elsewhere&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/elsewhere&gt;
      &lt;/xsl:for-each&gt;
    &lt;/templates&gt;

    &lt;xsl:variable name="functions-shadow"
                  select="a:function[@name and f:function-shadows(., @name/string())]"/&gt;

    &lt;functions&gt;
      &lt;xsl:variable name="functions-unused" as="element(a:function)*"&gt;
        &lt;xsl:for-each select="a:function"&gt;
          &lt;xsl:variable name="this" select="."/&gt;
          &lt;xsl:variable name="used-in" as="element()*"&gt;
            &lt;xsl:for-each select="key('xref', @id, root($stylesheet))"&gt;
              &lt;!-- recursion doesn't count as use --&gt;
              &lt;xsl:if test="not($this intersect ancestor::*)"&gt;
                &lt;xsl:sequence select="."/&gt;
              &lt;/xsl:if&gt;
            &lt;/xsl:for-each&gt;
          &lt;/xsl:variable&gt;
          &lt;xsl:if test="empty($used-in)"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:variable name="functions-elsewhere" as="element(a:function)*"&gt;
        &lt;xsl:for-each select="a:function"&gt;
          &lt;xsl:variable name="used-in"
                        select="key('xref', @id, root($stylesheet))
                                    /ancestor::a:stylesheet[not(@transclusion='include')][1]
                                union ()"/&gt;
          &lt;xsl:if test="count($used-in) = 1 and exists($used-in except parent::*)"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:for-each select="$functions-unused"&gt;
        &lt;unused&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/unused&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$functions-shadow"&gt;
        &lt;shadows&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadows&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:for-each select="$functions-elsewhere"&gt;
        &lt;elsewhere&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/elsewhere&gt;
      &lt;/xsl:for-each&gt;
    &lt;/functions&gt;

    &lt;xsl:apply-templates select="a:variable|a:template|a:function|a:stylesheet"/&gt;
  &lt;/stylesheet&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:function"&gt;
  &lt;xsl:variable name="used-by" as="element()*"&gt;
    &lt;xsl:for-each select="key('xref', @id)"&gt;
      &lt;xsl:sequence
          select="ancestor::*[parent::a:stylesheet[not(@transclusion='include')]][1]"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;!-- remove dups --&gt;
  &lt;xsl:variable name="used-by" select="$used-by union ()"/&gt;

  &lt;xsl:variable name="used-by-modules"
                select="$used-by/parent::* union ()"/&gt;

  &lt;xsl:variable name="used-only-elsewhere"
                select="count($used-by-modules) = 1
                        and not(parent::* is $used-by-modules)"/&gt;

  &lt;xsl:variable name="shadows"
                select="f:function-shadows(., @name/string())"/&gt;

  &lt;xsl:variable name="classes" as="xs:string+"&gt;
    &lt;xsl:sequence select="local-name(.)"/&gt;
    &lt;xsl:sequence select="if (empty($used-by)) then 'unused' else ()"/&gt;
    &lt;xsl:sequence select="if ($shadows) then 'shadows' else ()"/&gt;
    &lt;xsl:sequence select="if ($used-only-elsewhere) then 'elsewhere' else ()"/&gt;
  &lt;/xsl:variable&gt;

  &lt;function id="{f:generate-id(.)}"
            class="{string-join($classes, ' ')}"
            recursive="{exists(. intersect $used-by)}"
            elsewhere="{$used-only-elsewhere}"&gt;
    &lt;xsl:copy-of select="@name,@display-name,@id,@as,@line-number,@column-number"/&gt;
    &lt;xsl:copy-of select="a:param" copy-namespaces="no"/&gt;

    &lt;xsl:for-each select="$shadows"&gt;
      &lt;shadow&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadow&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="key('fnoarity', @noarity-id) except $shadows"&gt;
      &lt;no-arity&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/no-arity&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:variables-referenced(.)"&gt;
      &lt;variable&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/variable&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by/self::a:function except ."&gt;
      &lt;function&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/function&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:template-calls(.)"&gt;
      &lt;template&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/template&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by"&gt;
      &lt;used-by&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/used-by&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by-modules"&gt;
      &lt;used-by-module&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/used-by-module&gt;
    &lt;/xsl:for-each&gt;
  &lt;/function&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:variable"&gt;
  &lt;xsl:variable name="this" select="."/&gt;
  &lt;xsl:variable name="id" select="@id/string()"/&gt;

  &lt;xsl:variable name="used-by" as="element()*"&gt;
    &lt;xsl:for-each select="key('xref', @id)"&gt;
      &lt;xsl:sequence
          select="ancestor::*[parent::a:stylesheet[not(@transclusion='include')]][1]"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;!-- remove dups --&gt;
  &lt;xsl:variable name="used-by" select="$used-by union ()"/&gt;

  &lt;xsl:variable name="used-by-modules"
                select="$used-by/parent::* union ()"/&gt;

  &lt;xsl:variable name="used-only-elsewhere"
                select="count($used-by-modules) = 1
                        and not(parent::* is $used-by-modules)"/&gt;

  &lt;xsl:variable name="shadows" select="f:variable(., @name/string())"/&gt;

  &lt;xsl:variable name="classes" as="xs:string+"&gt;
    &lt;xsl:sequence select="@class/string()"/&gt;
    &lt;xsl:sequence select="if ($shadows) then 'shadows' else ()"/&gt;
    &lt;xsl:sequence select="if (empty($used-by)) then 'unused' else ()"/&gt;
    &lt;xsl:sequence select="if ($used-only-elsewhere) then 'elsewhere' else ()"/&gt;
  &lt;/xsl:variable&gt;

  &lt;variable id="{f:generate-id(.)}"
            class="{string-join($classes, ' ')}"
            type="{@class}"
            elsewhere="{$used-only-elsewhere}"&gt;
    &lt;xsl:copy-of select="@static,@name,@line-number,@column-number,@display-name,@as"/&gt;

    &lt;xsl:for-each select="$shadows"&gt;
      &lt;shadow&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadow&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:variables-referenced(.)"&gt;
      &lt;variable&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/variable&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:function-calls(.)"&gt;
      &lt;function&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/function&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:template-calls(.)"&gt;
      &lt;template&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/template&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by"&gt;
      &lt;used-by class="{local-name(.)}"&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/used-by&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by-modules"&gt;
      &lt;used-by-module&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/used-by-module&gt;
    &lt;/xsl:for-each&gt;
  &lt;/variable&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:template"&gt;
  &lt;xsl:variable name="this" select="."/&gt;

  &lt;xsl:variable name="used-by" as="element()*"&gt;
    &lt;xsl:if test="@name"&gt;
      &lt;xsl:sequence
          select="(key('xref', @id)/ancestor::*
                     [parent::a:stylesheet[not(@transclusion='include')]][1])
                   union ()"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="used-by-modules"
                select="$used-by/parent::* union ()"/&gt;

  &lt;xsl:variable name="used-only-elsewhere"
                select="count($used-by-modules) = 1
                        and not(parent::* is $used-by-modules)"/&gt;

  &lt;xsl:variable name="shadows"
                select="if (@name) then f:template-shadows(., @name/string()) else ()"/&gt;

  &lt;xsl:variable name="classes" as="xs:string+"&gt;
    &lt;xsl:sequence select="local-name(.)"/&gt;
    &lt;xsl:sequence select="if ($shadows) then 'shadows' else ()"/&gt;
    &lt;xsl:sequence select="if (@name and empty($used-by)) then 'unused' else ()"/&gt;
    &lt;xsl:sequence select="if ($used-only-elsewhere) then 'elsewhere' else ()"/&gt;
  &lt;/xsl:variable&gt;

  &lt;template id="{f:generate-id(.)}"
            class="{string-join($classes, ' ')}"
            recursive="{exists(. intersect $used-by)}"
            elsewhere="{$used-only-elsewhere}"&gt;
    &lt;xsl:copy-of select="@name,@display-name,@match,@as,@mode,@display-mode,
                         @priority,@line-number,@column-number"/&gt;

    &lt;xsl:for-each select="$shadows"&gt;
      &lt;shadow&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/shadow&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:variables-referenced(.)"&gt;
      &lt;variable&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/variable&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:function-calls(.)"&gt;
      &lt;function&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/function&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="f:template-calls(.) except ."&gt;
      &lt;template&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/template&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by"&gt;
      &lt;used-by&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/used-by&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:for-each select="$used-by-modules"&gt;
      &lt;used-by-module&gt;&lt;xsl:sequence select="f:generate-id(.)"/&gt;&lt;/used-by-module&gt;
    &lt;/xsl:for-each&gt;
  &lt;/template&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="f:variables-referenced" as="element(a:variable)*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="($node//a:variable-ref ! key('id', @xref))[parent::a:stylesheet] union ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:function-calls" as="element(a:function)*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="($node//a:function-call ! key('id', @xref))[parent::a:stylesheet] union ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:template-calls" as="element(a:template)*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="($node//a:call-template ! key('id', @xref))[parent::a:stylesheet] union ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:generate-id" as="xs:string"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:if test="not($node/@id)"&gt;
    &lt;xsl:message terminate="yes" select="'No id?', $node"/&gt;
  &lt;/xsl:if&gt;
  &lt;xsl:sequence select="$node/@id/string()"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:variable" as="element(a:variable)?"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="ref" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$context/preceding-sibling::a:variable[@name=$ref]"&gt;
      &lt;xsl:sequence select="$context/preceding-sibling::a:variable[@name=$ref][1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$context/self::a:stylesheet"&gt;
      &lt;xsl:sequence select="($context/preceding::a:stylesheet/a:variable[@name=$ref])[last()]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($context)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:variable($context/parent::*, $ref)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:template-shadows" as="element(a:template)?"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="ref" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$context/preceding-sibling::a:template[@name=$ref]"&gt;
      &lt;xsl:sequence select="$context/preceding-sibling::a:template[@name=$ref][1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$context/self::a:stylesheet"&gt;
      &lt;xsl:sequence
          select="($context/preceding::a:stylesheet/a:template[@name=$ref])[last()]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($context)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:template-shadows($context/parent::*, $ref)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:function-shadows" as="element(a:function)?"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="ref" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$context/preceding-sibling::a:function[@name=$ref]"&gt;
      &lt;xsl:sequence select="$context/preceding-sibling::a:function[@name=$ref][1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$context/self::a:stylesheet"&gt;
      &lt;xsl:sequence
          select="($context/preceding::a:stylesheet/a:function[@name=$ref])[last()]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($context)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:function-shadows($context/parent::*, $ref)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-60890"><h2>summarize.xsl</h2><p><span><span class="template all">14 templates</span></span>, <span><span class="function all">4 functions</span></span>, <span><span class="variable all">1 variable</span></span>, <span><span class="param all">5 params</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-60890-..css" class="instruction param"><div class="title"><span class="link" title="Line 15"><a href="#line-d46064e393-15" class="goto-lno">§</a></span>Param <code>$css</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-..js" class="instruction param"><div class="title"><span class="link" title="Line 16"><a href="#line-d46064e393-16" class="goto-lno">§</a></span>Param <code>$js</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-..prismcss" class="instruction param"><div class="title"><span class="link" title="Line 17"><a href="#line-d46064e393-17" class="goto-lno">§</a></span>Param <code>$prismcss</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-..prismjs" class="instruction param"><div class="title"><span class="link" title="Line 18"><a href="#line-d46064e393-18" class="goto-lno">§</a></span>Param <code>$prismjs</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-..title" class="instruction param"><div class="title"><span class="link" title="Line 20"><a href="#line-d46064e393-20" class="goto-lno">§</a></span>Param <code>$title</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-..Z" class="instruction variable"><div class="title"><span class="link" title="Line 22"><a href="#line-d46064e393-22" class="goto-lno">§</a></span>Variable <code>$Z</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-t-1" class="instruction template"><div class="title"><span class="link" title="Line 24"><a href="#line-d46064e393-24" class="goto-lno">§</a></span>Template match ≅ a:summary</div><div class="props"><div class="uses">Uses: <a href="#S-16674-..TITLE">$TITLE</a>, <a href="#S-16674-..VERHASH">$VERHASH</a>, <a href="#S-16674-..VERSION">$VERSION</a>, <a href="#S-60890-..Z">$Z</a>, <a href="#S-60890-..css">$css</a>, <a href="#S-60890-..js">$js</a>, <a href="#S-60890-..prismcss">$prismcss</a>, <a href="#S-60890-..prismjs">$prismjs</a>, <a href="#S-60890-..title">$title</a></div><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.functions.summary-count,2">f:summary-count()</a></div><div class="mode">Mode: <code>m:summarize</code></div><div class="matches">Matches: <code>a:summary</code></div></div></div><div id="S-60890-t-2" class="instruction template"><div class="title"><span class="link" title="Line 147"><a href="#line-d46064e393-147" class="goto-lno">§</a></span>Template match ≅ a:stylesheet</div><div class="props"><div class="uses">Uses: <a href="#S-49518-..source-listings">$source-listings</a></div><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.functions.summary-count,2">f:summary-count()</a>, <a href="#S-60890-nwalsh.com.ns.xslt.functions.summary-details,1">f:summary-details()</a></div><div class="mode">Mode: <code>m:summarize</code></div><div class="matches">Matches: <code>a:stylesheet</code></div></div></div><div id="S-60890-t-3" class="instruction template"><div class="title"><span class="link" title="Line 255"><a href="#line-d46064e393-255" class="goto-lno">§</a></span>Template match ≅ a:function</div><div class="props"><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.functions.line-link,1">f:line-link()</a>, <a href="#S-60890-nwalsh.com.ns.xslt.functions.reference-list,1">f:reference-list()</a></div><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.templates.functions-called">t:functions-called</a>, <a href="#S-60890-nwalsh.com.ns.xslt.templates.templates-called">t:templates-called</a>, <a href="#S-60890-nwalsh.com.ns.xslt.templates.variables-referenced">t:variables-referenced</a></div><div class="mode">Mode: <code>m:summarize</code></div><div class="matches">Matches: <code>a:function</code></div></div></div><div id="S-60890-t-4" class="instruction template"><div class="title"><span class="link" title="Line 338"><a href="#line-d46064e393-338" class="goto-lno">§</a></span>Template match ≅ a:variable</div><div class="props"><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.functions.line-link,1">f:line-link()</a>, <a href="#S-60890-nwalsh.com.ns.xslt.functions.reference-list,1">f:reference-list()</a></div><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.templates.functions-called">t:functions-called</a>, <a href="#S-60890-nwalsh.com.ns.xslt.templates.templates-called">t:templates-called</a>, <a href="#S-60890-nwalsh.com.ns.xslt.templates.variables-referenced">t:variables-referenced</a></div><div class="mode">Mode: <code>m:summarize</code></div><div class="matches">Matches: <code>a:variable</code></div></div></div><div id="S-60890-t-5" class="instruction template"><div class="title"><span class="link" title="Line 402"><a href="#line-d46064e393-402" class="goto-lno">§</a></span>Template match ≅ a:template</div><div class="props"><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.functions.line-link,1">f:line-link()</a>, <a href="#S-60890-nwalsh.com.ns.xslt.functions.reference-list,1">f:reference-list()</a></div><div class="calls">Calls: <a href="#S-60890-nwalsh.com.ns.xslt.templates.functions-called">t:functions-called</a>, <a href="#S-60890-nwalsh.com.ns.xslt.templates.templates-called">t:templates-called</a>, <a href="#S-60890-nwalsh.com.ns.xslt.templates.variables-referenced">t:variables-referenced</a></div><div class="mode">Mode: <code>m:summarize</code></div><div class="matches">Matches: <code>a:template</code></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.templates.variables-referenced" class="instruction template"><div class="title"><span class="link" title="Line 518"><a href="#line-d46064e393-518" class="goto-lno">§</a></span>Template t:variables-referenced  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-3">template</a>, <a href="#S-60890-t-4">template</a>, <a href="#S-60890-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div><div class="mode">Mode: <code>m:summarize</code></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.templates.functions-called" class="instruction template"><div class="title"><span class="link" title="Line 531"><a href="#line-d46064e393-531" class="goto-lno">§</a></span>Template t:functions-called  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-3">template</a>, <a href="#S-60890-t-4">template</a>, <a href="#S-60890-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div><div class="mode">Mode: <code>m:summarize</code></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.templates.templates-called" class="instruction template"><div class="title"><span class="link" title="Line 544"><a href="#line-d46064e393-544" class="goto-lno">§</a></span>Template t:templates-called  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-3">template</a>, <a href="#S-60890-t-4">template</a>, <a href="#S-60890-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div><div class="mode">Mode: <code>m:summarize</code></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.functions.reference-list,1" class="instruction function"><div class="title"><span class="link" title="Line 559"><a href="#line-d46064e393-559" class="goto-lno">§</a></span>Function f:reference-list($refs as element()+)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-3">template</a>, <a href="#S-60890-t-4">template</a>, <a href="#S-60890-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-t-9" class="instruction template"><div class="title"><span class="link" title="Line 569"><a href="#line-d46064e393-569" class="goto-lno">§</a></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:reference</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-60890-t-10" class="instruction template"><div class="title"><span class="link" title="Line 576"><a href="#line-d46064e393-576" class="goto-lno">§</a></span>Template match ≅ a:stylesheet</div><div class="props"><div class="mode">Mode: <code>m:reference</code></div><div class="matches">Matches: <code>a:stylesheet</code></div></div></div><div id="S-60890-t-11" class="instruction template"><div class="title"><span class="link" title="Line 584"><a href="#line-d46064e393-584" class="goto-lno">§</a></span>Template match ≅ a:variable</div><div class="props"><div class="mode">Mode: <code>m:reference</code></div><div class="matches">Matches: <code>a:variable</code></div></div></div><div id="S-60890-t-12" class="instruction template"><div class="title"><span class="link" title="Line 590"><a href="#line-d46064e393-590" class="goto-lno">§</a></span>Template match ≅ a:function</div><div class="props"><div class="mode">Mode: <code>m:reference</code></div><div class="matches">Matches: <code>a:function</code></div></div></div><div id="S-60890-t-13" class="instruction template"><div class="title"><span class="link" title="Line 607"><a href="#line-d46064e393-607" class="goto-lno">§</a></span>Template match ≅ a:template</div><div class="props"><div class="mode">Mode: <code>m:reference</code></div><div class="matches">Matches: <code>a:template</code></div></div></div><div id="S-60890-t-14" class="instruction template"><div class="title"><span class="link" title="Line 622"><a href="#line-d46064e393-622" class="goto-lno">§</a></span>Template match ≅ a:stylesheet</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>a:stylesheet</code></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.functions.line-link,1" class="instruction function"><div class="title"><span class="link" title="Line 638"><a href="#line-d46064e393-638" class="goto-lno">§</a></span>Function f:line-link($node as element()) as element(h:span)?</div><div class="props"><div class="uses">Uses: <a href="#S-49518-..source-listings">$source-listings</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-3">template</a>, <a href="#S-60890-t-4">template</a>, <a href="#S-60890-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.functions.summary-count,2" class="instruction function"><div class="title"><span class="link" title="Line 653"><a href="#line-d46064e393-653" class="goto-lno">§</a></span>Function f:summary-count($count as xs:string, $label as xs:string) as element(h:span)?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-1">template</a>, <a href="#S-60890-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-60890-nwalsh.com.ns.xslt.functions.summary-details,1" class="instruction function"><div class="title"><span class="link" title="Line 674"><a href="#line-d46064e393-674" class="goto-lno">§</a></span>Function f:summary-details($detail as element())</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-d46064e393-1">1</span>
<span id="line-d46064e393-2"><span class="lno">2</span></span>
<span id="line-d46064e393-3"><span class="lno">3</span></span>
<span id="line-d46064e393-4"><span class="lno">4</span></span>
<span id="line-d46064e393-5">5</span>
<span id="line-d46064e393-6"><span class="lno">6</span></span>
<span id="line-d46064e393-7"><span class="lno">7</span></span>
<span id="line-d46064e393-8"><span class="lno">8</span></span>
<span id="line-d46064e393-9"><span class="lno">9</span></span>
<span id="line-d46064e393-10">10</span>
<span id="line-d46064e393-11"><span class="lno">11</span></span>
<span id="line-d46064e393-12"><span class="lno">12</span></span>
<span id="line-d46064e393-13"><span class="lno">13</span></span>
<span id="line-d46064e393-14"><span class="lno">14</span></span>
<span id="line-d46064e393-15">15</span>
<span id="line-d46064e393-16"><span class="lno">16</span></span>
<span id="line-d46064e393-17"><span class="lno">17</span></span>
<span id="line-d46064e393-18"><span class="lno">18</span></span>
<span id="line-d46064e393-19"><span class="lno">19</span></span>
<span id="line-d46064e393-20">20</span>
<span id="line-d46064e393-21"><span class="lno">21</span></span>
<span id="line-d46064e393-22"><span class="lno">22</span></span>
<span id="line-d46064e393-23"><span class="lno">23</span></span>
<span id="line-d46064e393-24"><span class="lno">24</span></span>
<span id="line-d46064e393-25">25</span>
<span id="line-d46064e393-26"><span class="lno">26</span></span>
<span id="line-d46064e393-27"><span class="lno">27</span></span>
<span id="line-d46064e393-28"><span class="lno">28</span></span>
<span id="line-d46064e393-29"><span class="lno">29</span></span>
<span id="line-d46064e393-30">30</span>
<span id="line-d46064e393-31"><span class="lno">31</span></span>
<span id="line-d46064e393-32"><span class="lno">32</span></span>
<span id="line-d46064e393-33"><span class="lno">33</span></span>
<span id="line-d46064e393-34"><span class="lno">34</span></span>
<span id="line-d46064e393-35">35</span>
<span id="line-d46064e393-36"><span class="lno">36</span></span>
<span id="line-d46064e393-37"><span class="lno">37</span></span>
<span id="line-d46064e393-38"><span class="lno">38</span></span>
<span id="line-d46064e393-39"><span class="lno">39</span></span>
<span id="line-d46064e393-40">40</span>
<span id="line-d46064e393-41"><span class="lno">41</span></span>
<span id="line-d46064e393-42"><span class="lno">42</span></span>
<span id="line-d46064e393-43"><span class="lno">43</span></span>
<span id="line-d46064e393-44"><span class="lno">44</span></span>
<span id="line-d46064e393-45">45</span>
<span id="line-d46064e393-46"><span class="lno">46</span></span>
<span id="line-d46064e393-47"><span class="lno">47</span></span>
<span id="line-d46064e393-48"><span class="lno">48</span></span>
<span id="line-d46064e393-49"><span class="lno">49</span></span>
<span id="line-d46064e393-50">50</span>
<span id="line-d46064e393-51"><span class="lno">51</span></span>
<span id="line-d46064e393-52"><span class="lno">52</span></span>
<span id="line-d46064e393-53"><span class="lno">53</span></span>
<span id="line-d46064e393-54"><span class="lno">54</span></span>
<span id="line-d46064e393-55">55</span>
<span id="line-d46064e393-56"><span class="lno">56</span></span>
<span id="line-d46064e393-57"><span class="lno">57</span></span>
<span id="line-d46064e393-58"><span class="lno">58</span></span>
<span id="line-d46064e393-59"><span class="lno">59</span></span>
<span id="line-d46064e393-60">60</span>
<span id="line-d46064e393-61"><span class="lno">61</span></span>
<span id="line-d46064e393-62"><span class="lno">62</span></span>
<span id="line-d46064e393-63"><span class="lno">63</span></span>
<span id="line-d46064e393-64"><span class="lno">64</span></span>
<span id="line-d46064e393-65">65</span>
<span id="line-d46064e393-66"><span class="lno">66</span></span>
<span id="line-d46064e393-67"><span class="lno">67</span></span>
<span id="line-d46064e393-68"><span class="lno">68</span></span>
<span id="line-d46064e393-69"><span class="lno">69</span></span>
<span id="line-d46064e393-70">70</span>
<span id="line-d46064e393-71"><span class="lno">71</span></span>
<span id="line-d46064e393-72"><span class="lno">72</span></span>
<span id="line-d46064e393-73"><span class="lno">73</span></span>
<span id="line-d46064e393-74"><span class="lno">74</span></span>
<span id="line-d46064e393-75">75</span>
<span id="line-d46064e393-76"><span class="lno">76</span></span>
<span id="line-d46064e393-77"><span class="lno">77</span></span>
<span id="line-d46064e393-78"><span class="lno">78</span></span>
<span id="line-d46064e393-79"><span class="lno">79</span></span>
<span id="line-d46064e393-80">80</span>
<span id="line-d46064e393-81"><span class="lno">81</span></span>
<span id="line-d46064e393-82"><span class="lno">82</span></span>
<span id="line-d46064e393-83"><span class="lno">83</span></span>
<span id="line-d46064e393-84"><span class="lno">84</span></span>
<span id="line-d46064e393-85">85</span>
<span id="line-d46064e393-86"><span class="lno">86</span></span>
<span id="line-d46064e393-87"><span class="lno">87</span></span>
<span id="line-d46064e393-88"><span class="lno">88</span></span>
<span id="line-d46064e393-89"><span class="lno">89</span></span>
<span id="line-d46064e393-90">90</span>
<span id="line-d46064e393-91"><span class="lno">91</span></span>
<span id="line-d46064e393-92"><span class="lno">92</span></span>
<span id="line-d46064e393-93"><span class="lno">93</span></span>
<span id="line-d46064e393-94"><span class="lno">94</span></span>
<span id="line-d46064e393-95">95</span>
<span id="line-d46064e393-96"><span class="lno">96</span></span>
<span id="line-d46064e393-97"><span class="lno">97</span></span>
<span id="line-d46064e393-98"><span class="lno">98</span></span>
<span id="line-d46064e393-99"><span class="lno">99</span></span>
<span id="line-d46064e393-100">100</span>
<span id="line-d46064e393-101"><span class="lno">101</span></span>
<span id="line-d46064e393-102"><span class="lno">102</span></span>
<span id="line-d46064e393-103"><span class="lno">103</span></span>
<span id="line-d46064e393-104"><span class="lno">104</span></span>
<span id="line-d46064e393-105">105</span>
<span id="line-d46064e393-106"><span class="lno">106</span></span>
<span id="line-d46064e393-107"><span class="lno">107</span></span>
<span id="line-d46064e393-108"><span class="lno">108</span></span>
<span id="line-d46064e393-109"><span class="lno">109</span></span>
<span id="line-d46064e393-110">110</span>
<span id="line-d46064e393-111"><span class="lno">111</span></span>
<span id="line-d46064e393-112"><span class="lno">112</span></span>
<span id="line-d46064e393-113"><span class="lno">113</span></span>
<span id="line-d46064e393-114"><span class="lno">114</span></span>
<span id="line-d46064e393-115">115</span>
<span id="line-d46064e393-116"><span class="lno">116</span></span>
<span id="line-d46064e393-117"><span class="lno">117</span></span>
<span id="line-d46064e393-118"><span class="lno">118</span></span>
<span id="line-d46064e393-119"><span class="lno">119</span></span>
<span id="line-d46064e393-120">120</span>
<span id="line-d46064e393-121"><span class="lno">121</span></span>
<span id="line-d46064e393-122"><span class="lno">122</span></span>
<span id="line-d46064e393-123"><span class="lno">123</span></span>
<span id="line-d46064e393-124"><span class="lno">124</span></span>
<span id="line-d46064e393-125">125</span>
<span id="line-d46064e393-126"><span class="lno">126</span></span>
<span id="line-d46064e393-127"><span class="lno">127</span></span>
<span id="line-d46064e393-128"><span class="lno">128</span></span>
<span id="line-d46064e393-129"><span class="lno">129</span></span>
<span id="line-d46064e393-130">130</span>
<span id="line-d46064e393-131"><span class="lno">131</span></span>
<span id="line-d46064e393-132"><span class="lno">132</span></span>
<span id="line-d46064e393-133"><span class="lno">133</span></span>
<span id="line-d46064e393-134"><span class="lno">134</span></span>
<span id="line-d46064e393-135">135</span>
<span id="line-d46064e393-136"><span class="lno">136</span></span>
<span id="line-d46064e393-137"><span class="lno">137</span></span>
<span id="line-d46064e393-138"><span class="lno">138</span></span>
<span id="line-d46064e393-139"><span class="lno">139</span></span>
<span id="line-d46064e393-140">140</span>
<span id="line-d46064e393-141"><span class="lno">141</span></span>
<span id="line-d46064e393-142"><span class="lno">142</span></span>
<span id="line-d46064e393-143"><span class="lno">143</span></span>
<span id="line-d46064e393-144"><span class="lno">144</span></span>
<span id="line-d46064e393-145">145</span>
<span id="line-d46064e393-146"><span class="lno">146</span></span>
<span id="line-d46064e393-147"><span class="lno">147</span></span>
<span id="line-d46064e393-148"><span class="lno">148</span></span>
<span id="line-d46064e393-149"><span class="lno">149</span></span>
<span id="line-d46064e393-150">150</span>
<span id="line-d46064e393-151"><span class="lno">151</span></span>
<span id="line-d46064e393-152"><span class="lno">152</span></span>
<span id="line-d46064e393-153"><span class="lno">153</span></span>
<span id="line-d46064e393-154"><span class="lno">154</span></span>
<span id="line-d46064e393-155">155</span>
<span id="line-d46064e393-156"><span class="lno">156</span></span>
<span id="line-d46064e393-157"><span class="lno">157</span></span>
<span id="line-d46064e393-158"><span class="lno">158</span></span>
<span id="line-d46064e393-159"><span class="lno">159</span></span>
<span id="line-d46064e393-160">160</span>
<span id="line-d46064e393-161"><span class="lno">161</span></span>
<span id="line-d46064e393-162"><span class="lno">162</span></span>
<span id="line-d46064e393-163"><span class="lno">163</span></span>
<span id="line-d46064e393-164"><span class="lno">164</span></span>
<span id="line-d46064e393-165">165</span>
<span id="line-d46064e393-166"><span class="lno">166</span></span>
<span id="line-d46064e393-167"><span class="lno">167</span></span>
<span id="line-d46064e393-168"><span class="lno">168</span></span>
<span id="line-d46064e393-169"><span class="lno">169</span></span>
<span id="line-d46064e393-170">170</span>
<span id="line-d46064e393-171"><span class="lno">171</span></span>
<span id="line-d46064e393-172"><span class="lno">172</span></span>
<span id="line-d46064e393-173"><span class="lno">173</span></span>
<span id="line-d46064e393-174"><span class="lno">174</span></span>
<span id="line-d46064e393-175">175</span>
<span id="line-d46064e393-176"><span class="lno">176</span></span>
<span id="line-d46064e393-177"><span class="lno">177</span></span>
<span id="line-d46064e393-178"><span class="lno">178</span></span>
<span id="line-d46064e393-179"><span class="lno">179</span></span>
<span id="line-d46064e393-180">180</span>
<span id="line-d46064e393-181"><span class="lno">181</span></span>
<span id="line-d46064e393-182"><span class="lno">182</span></span>
<span id="line-d46064e393-183"><span class="lno">183</span></span>
<span id="line-d46064e393-184"><span class="lno">184</span></span>
<span id="line-d46064e393-185">185</span>
<span id="line-d46064e393-186"><span class="lno">186</span></span>
<span id="line-d46064e393-187"><span class="lno">187</span></span>
<span id="line-d46064e393-188"><span class="lno">188</span></span>
<span id="line-d46064e393-189"><span class="lno">189</span></span>
<span id="line-d46064e393-190">190</span>
<span id="line-d46064e393-191"><span class="lno">191</span></span>
<span id="line-d46064e393-192"><span class="lno">192</span></span>
<span id="line-d46064e393-193"><span class="lno">193</span></span>
<span id="line-d46064e393-194"><span class="lno">194</span></span>
<span id="line-d46064e393-195">195</span>
<span id="line-d46064e393-196"><span class="lno">196</span></span>
<span id="line-d46064e393-197"><span class="lno">197</span></span>
<span id="line-d46064e393-198"><span class="lno">198</span></span>
<span id="line-d46064e393-199"><span class="lno">199</span></span>
<span id="line-d46064e393-200">200</span>
<span id="line-d46064e393-201"><span class="lno">201</span></span>
<span id="line-d46064e393-202"><span class="lno">202</span></span>
<span id="line-d46064e393-203"><span class="lno">203</span></span>
<span id="line-d46064e393-204"><span class="lno">204</span></span>
<span id="line-d46064e393-205">205</span>
<span id="line-d46064e393-206"><span class="lno">206</span></span>
<span id="line-d46064e393-207"><span class="lno">207</span></span>
<span id="line-d46064e393-208"><span class="lno">208</span></span>
<span id="line-d46064e393-209"><span class="lno">209</span></span>
<span id="line-d46064e393-210">210</span>
<span id="line-d46064e393-211"><span class="lno">211</span></span>
<span id="line-d46064e393-212"><span class="lno">212</span></span>
<span id="line-d46064e393-213"><span class="lno">213</span></span>
<span id="line-d46064e393-214"><span class="lno">214</span></span>
<span id="line-d46064e393-215">215</span>
<span id="line-d46064e393-216"><span class="lno">216</span></span>
<span id="line-d46064e393-217"><span class="lno">217</span></span>
<span id="line-d46064e393-218"><span class="lno">218</span></span>
<span id="line-d46064e393-219"><span class="lno">219</span></span>
<span id="line-d46064e393-220">220</span>
<span id="line-d46064e393-221"><span class="lno">221</span></span>
<span id="line-d46064e393-222"><span class="lno">222</span></span>
<span id="line-d46064e393-223"><span class="lno">223</span></span>
<span id="line-d46064e393-224"><span class="lno">224</span></span>
<span id="line-d46064e393-225">225</span>
<span id="line-d46064e393-226"><span class="lno">226</span></span>
<span id="line-d46064e393-227"><span class="lno">227</span></span>
<span id="line-d46064e393-228"><span class="lno">228</span></span>
<span id="line-d46064e393-229"><span class="lno">229</span></span>
<span id="line-d46064e393-230">230</span>
<span id="line-d46064e393-231"><span class="lno">231</span></span>
<span id="line-d46064e393-232"><span class="lno">232</span></span>
<span id="line-d46064e393-233"><span class="lno">233</span></span>
<span id="line-d46064e393-234"><span class="lno">234</span></span>
<span id="line-d46064e393-235">235</span>
<span id="line-d46064e393-236"><span class="lno">236</span></span>
<span id="line-d46064e393-237"><span class="lno">237</span></span>
<span id="line-d46064e393-238"><span class="lno">238</span></span>
<span id="line-d46064e393-239"><span class="lno">239</span></span>
<span id="line-d46064e393-240">240</span>
<span id="line-d46064e393-241"><span class="lno">241</span></span>
<span id="line-d46064e393-242"><span class="lno">242</span></span>
<span id="line-d46064e393-243"><span class="lno">243</span></span>
<span id="line-d46064e393-244"><span class="lno">244</span></span>
<span id="line-d46064e393-245">245</span>
<span id="line-d46064e393-246"><span class="lno">246</span></span>
<span id="line-d46064e393-247"><span class="lno">247</span></span>
<span id="line-d46064e393-248"><span class="lno">248</span></span>
<span id="line-d46064e393-249"><span class="lno">249</span></span>
<span id="line-d46064e393-250">250</span>
<span id="line-d46064e393-251"><span class="lno">251</span></span>
<span id="line-d46064e393-252"><span class="lno">252</span></span>
<span id="line-d46064e393-253"><span class="lno">253</span></span>
<span id="line-d46064e393-254"><span class="lno">254</span></span>
<span id="line-d46064e393-255">255</span>
<span id="line-d46064e393-256"><span class="lno">256</span></span>
<span id="line-d46064e393-257"><span class="lno">257</span></span>
<span id="line-d46064e393-258"><span class="lno">258</span></span>
<span id="line-d46064e393-259"><span class="lno">259</span></span>
<span id="line-d46064e393-260">260</span>
<span id="line-d46064e393-261"><span class="lno">261</span></span>
<span id="line-d46064e393-262"><span class="lno">262</span></span>
<span id="line-d46064e393-263"><span class="lno">263</span></span>
<span id="line-d46064e393-264"><span class="lno">264</span></span>
<span id="line-d46064e393-265">265</span>
<span id="line-d46064e393-266"><span class="lno">266</span></span>
<span id="line-d46064e393-267"><span class="lno">267</span></span>
<span id="line-d46064e393-268"><span class="lno">268</span></span>
<span id="line-d46064e393-269"><span class="lno">269</span></span>
<span id="line-d46064e393-270">270</span>
<span id="line-d46064e393-271"><span class="lno">271</span></span>
<span id="line-d46064e393-272"><span class="lno">272</span></span>
<span id="line-d46064e393-273"><span class="lno">273</span></span>
<span id="line-d46064e393-274"><span class="lno">274</span></span>
<span id="line-d46064e393-275">275</span>
<span id="line-d46064e393-276"><span class="lno">276</span></span>
<span id="line-d46064e393-277"><span class="lno">277</span></span>
<span id="line-d46064e393-278"><span class="lno">278</span></span>
<span id="line-d46064e393-279"><span class="lno">279</span></span>
<span id="line-d46064e393-280">280</span>
<span id="line-d46064e393-281"><span class="lno">281</span></span>
<span id="line-d46064e393-282"><span class="lno">282</span></span>
<span id="line-d46064e393-283"><span class="lno">283</span></span>
<span id="line-d46064e393-284"><span class="lno">284</span></span>
<span id="line-d46064e393-285">285</span>
<span id="line-d46064e393-286"><span class="lno">286</span></span>
<span id="line-d46064e393-287"><span class="lno">287</span></span>
<span id="line-d46064e393-288"><span class="lno">288</span></span>
<span id="line-d46064e393-289"><span class="lno">289</span></span>
<span id="line-d46064e393-290">290</span>
<span id="line-d46064e393-291"><span class="lno">291</span></span>
<span id="line-d46064e393-292"><span class="lno">292</span></span>
<span id="line-d46064e393-293"><span class="lno">293</span></span>
<span id="line-d46064e393-294"><span class="lno">294</span></span>
<span id="line-d46064e393-295">295</span>
<span id="line-d46064e393-296"><span class="lno">296</span></span>
<span id="line-d46064e393-297"><span class="lno">297</span></span>
<span id="line-d46064e393-298"><span class="lno">298</span></span>
<span id="line-d46064e393-299"><span class="lno">299</span></span>
<span id="line-d46064e393-300">300</span>
<span id="line-d46064e393-301"><span class="lno">301</span></span>
<span id="line-d46064e393-302"><span class="lno">302</span></span>
<span id="line-d46064e393-303"><span class="lno">303</span></span>
<span id="line-d46064e393-304"><span class="lno">304</span></span>
<span id="line-d46064e393-305">305</span>
<span id="line-d46064e393-306"><span class="lno">306</span></span>
<span id="line-d46064e393-307"><span class="lno">307</span></span>
<span id="line-d46064e393-308"><span class="lno">308</span></span>
<span id="line-d46064e393-309"><span class="lno">309</span></span>
<span id="line-d46064e393-310">310</span>
<span id="line-d46064e393-311"><span class="lno">311</span></span>
<span id="line-d46064e393-312"><span class="lno">312</span></span>
<span id="line-d46064e393-313"><span class="lno">313</span></span>
<span id="line-d46064e393-314"><span class="lno">314</span></span>
<span id="line-d46064e393-315">315</span>
<span id="line-d46064e393-316"><span class="lno">316</span></span>
<span id="line-d46064e393-317"><span class="lno">317</span></span>
<span id="line-d46064e393-318"><span class="lno">318</span></span>
<span id="line-d46064e393-319"><span class="lno">319</span></span>
<span id="line-d46064e393-320">320</span>
<span id="line-d46064e393-321"><span class="lno">321</span></span>
<span id="line-d46064e393-322"><span class="lno">322</span></span>
<span id="line-d46064e393-323"><span class="lno">323</span></span>
<span id="line-d46064e393-324"><span class="lno">324</span></span>
<span id="line-d46064e393-325">325</span>
<span id="line-d46064e393-326"><span class="lno">326</span></span>
<span id="line-d46064e393-327"><span class="lno">327</span></span>
<span id="line-d46064e393-328"><span class="lno">328</span></span>
<span id="line-d46064e393-329"><span class="lno">329</span></span>
<span id="line-d46064e393-330">330</span>
<span id="line-d46064e393-331"><span class="lno">331</span></span>
<span id="line-d46064e393-332"><span class="lno">332</span></span>
<span id="line-d46064e393-333"><span class="lno">333</span></span>
<span id="line-d46064e393-334"><span class="lno">334</span></span>
<span id="line-d46064e393-335">335</span>
<span id="line-d46064e393-336"><span class="lno">336</span></span>
<span id="line-d46064e393-337"><span class="lno">337</span></span>
<span id="line-d46064e393-338"><span class="lno">338</span></span>
<span id="line-d46064e393-339"><span class="lno">339</span></span>
<span id="line-d46064e393-340">340</span>
<span id="line-d46064e393-341"><span class="lno">341</span></span>
<span id="line-d46064e393-342"><span class="lno">342</span></span>
<span id="line-d46064e393-343"><span class="lno">343</span></span>
<span id="line-d46064e393-344"><span class="lno">344</span></span>
<span id="line-d46064e393-345">345</span>
<span id="line-d46064e393-346"><span class="lno">346</span></span>
<span id="line-d46064e393-347"><span class="lno">347</span></span>
<span id="line-d46064e393-348"><span class="lno">348</span></span>
<span id="line-d46064e393-349"><span class="lno">349</span></span>
<span id="line-d46064e393-350">350</span>
<span id="line-d46064e393-351"><span class="lno">351</span></span>
<span id="line-d46064e393-352"><span class="lno">352</span></span>
<span id="line-d46064e393-353"><span class="lno">353</span></span>
<span id="line-d46064e393-354"><span class="lno">354</span></span>
<span id="line-d46064e393-355">355</span>
<span id="line-d46064e393-356"><span class="lno">356</span></span>
<span id="line-d46064e393-357"><span class="lno">357</span></span>
<span id="line-d46064e393-358"><span class="lno">358</span></span>
<span id="line-d46064e393-359"><span class="lno">359</span></span>
<span id="line-d46064e393-360">360</span>
<span id="line-d46064e393-361"><span class="lno">361</span></span>
<span id="line-d46064e393-362"><span class="lno">362</span></span>
<span id="line-d46064e393-363"><span class="lno">363</span></span>
<span id="line-d46064e393-364"><span class="lno">364</span></span>
<span id="line-d46064e393-365">365</span>
<span id="line-d46064e393-366"><span class="lno">366</span></span>
<span id="line-d46064e393-367"><span class="lno">367</span></span>
<span id="line-d46064e393-368"><span class="lno">368</span></span>
<span id="line-d46064e393-369"><span class="lno">369</span></span>
<span id="line-d46064e393-370">370</span>
<span id="line-d46064e393-371"><span class="lno">371</span></span>
<span id="line-d46064e393-372"><span class="lno">372</span></span>
<span id="line-d46064e393-373"><span class="lno">373</span></span>
<span id="line-d46064e393-374"><span class="lno">374</span></span>
<span id="line-d46064e393-375">375</span>
<span id="line-d46064e393-376"><span class="lno">376</span></span>
<span id="line-d46064e393-377"><span class="lno">377</span></span>
<span id="line-d46064e393-378"><span class="lno">378</span></span>
<span id="line-d46064e393-379"><span class="lno">379</span></span>
<span id="line-d46064e393-380">380</span>
<span id="line-d46064e393-381"><span class="lno">381</span></span>
<span id="line-d46064e393-382"><span class="lno">382</span></span>
<span id="line-d46064e393-383"><span class="lno">383</span></span>
<span id="line-d46064e393-384"><span class="lno">384</span></span>
<span id="line-d46064e393-385">385</span>
<span id="line-d46064e393-386"><span class="lno">386</span></span>
<span id="line-d46064e393-387"><span class="lno">387</span></span>
<span id="line-d46064e393-388"><span class="lno">388</span></span>
<span id="line-d46064e393-389"><span class="lno">389</span></span>
<span id="line-d46064e393-390">390</span>
<span id="line-d46064e393-391"><span class="lno">391</span></span>
<span id="line-d46064e393-392"><span class="lno">392</span></span>
<span id="line-d46064e393-393"><span class="lno">393</span></span>
<span id="line-d46064e393-394"><span class="lno">394</span></span>
<span id="line-d46064e393-395">395</span>
<span id="line-d46064e393-396"><span class="lno">396</span></span>
<span id="line-d46064e393-397"><span class="lno">397</span></span>
<span id="line-d46064e393-398"><span class="lno">398</span></span>
<span id="line-d46064e393-399"><span class="lno">399</span></span>
<span id="line-d46064e393-400">400</span>
<span id="line-d46064e393-401"><span class="lno">401</span></span>
<span id="line-d46064e393-402"><span class="lno">402</span></span>
<span id="line-d46064e393-403"><span class="lno">403</span></span>
<span id="line-d46064e393-404"><span class="lno">404</span></span>
<span id="line-d46064e393-405">405</span>
<span id="line-d46064e393-406"><span class="lno">406</span></span>
<span id="line-d46064e393-407"><span class="lno">407</span></span>
<span id="line-d46064e393-408"><span class="lno">408</span></span>
<span id="line-d46064e393-409"><span class="lno">409</span></span>
<span id="line-d46064e393-410">410</span>
<span id="line-d46064e393-411"><span class="lno">411</span></span>
<span id="line-d46064e393-412"><span class="lno">412</span></span>
<span id="line-d46064e393-413"><span class="lno">413</span></span>
<span id="line-d46064e393-414"><span class="lno">414</span></span>
<span id="line-d46064e393-415">415</span>
<span id="line-d46064e393-416"><span class="lno">416</span></span>
<span id="line-d46064e393-417"><span class="lno">417</span></span>
<span id="line-d46064e393-418"><span class="lno">418</span></span>
<span id="line-d46064e393-419"><span class="lno">419</span></span>
<span id="line-d46064e393-420">420</span>
<span id="line-d46064e393-421"><span class="lno">421</span></span>
<span id="line-d46064e393-422"><span class="lno">422</span></span>
<span id="line-d46064e393-423"><span class="lno">423</span></span>
<span id="line-d46064e393-424"><span class="lno">424</span></span>
<span id="line-d46064e393-425">425</span>
<span id="line-d46064e393-426"><span class="lno">426</span></span>
<span id="line-d46064e393-427"><span class="lno">427</span></span>
<span id="line-d46064e393-428"><span class="lno">428</span></span>
<span id="line-d46064e393-429"><span class="lno">429</span></span>
<span id="line-d46064e393-430">430</span>
<span id="line-d46064e393-431"><span class="lno">431</span></span>
<span id="line-d46064e393-432"><span class="lno">432</span></span>
<span id="line-d46064e393-433"><span class="lno">433</span></span>
<span id="line-d46064e393-434"><span class="lno">434</span></span>
<span id="line-d46064e393-435">435</span>
<span id="line-d46064e393-436"><span class="lno">436</span></span>
<span id="line-d46064e393-437"><span class="lno">437</span></span>
<span id="line-d46064e393-438"><span class="lno">438</span></span>
<span id="line-d46064e393-439"><span class="lno">439</span></span>
<span id="line-d46064e393-440">440</span>
<span id="line-d46064e393-441"><span class="lno">441</span></span>
<span id="line-d46064e393-442"><span class="lno">442</span></span>
<span id="line-d46064e393-443"><span class="lno">443</span></span>
<span id="line-d46064e393-444"><span class="lno">444</span></span>
<span id="line-d46064e393-445">445</span>
<span id="line-d46064e393-446"><span class="lno">446</span></span>
<span id="line-d46064e393-447"><span class="lno">447</span></span>
<span id="line-d46064e393-448"><span class="lno">448</span></span>
<span id="line-d46064e393-449"><span class="lno">449</span></span>
<span id="line-d46064e393-450">450</span>
<span id="line-d46064e393-451"><span class="lno">451</span></span>
<span id="line-d46064e393-452"><span class="lno">452</span></span>
<span id="line-d46064e393-453"><span class="lno">453</span></span>
<span id="line-d46064e393-454"><span class="lno">454</span></span>
<span id="line-d46064e393-455">455</span>
<span id="line-d46064e393-456"><span class="lno">456</span></span>
<span id="line-d46064e393-457"><span class="lno">457</span></span>
<span id="line-d46064e393-458"><span class="lno">458</span></span>
<span id="line-d46064e393-459"><span class="lno">459</span></span>
<span id="line-d46064e393-460">460</span>
<span id="line-d46064e393-461"><span class="lno">461</span></span>
<span id="line-d46064e393-462"><span class="lno">462</span></span>
<span id="line-d46064e393-463"><span class="lno">463</span></span>
<span id="line-d46064e393-464"><span class="lno">464</span></span>
<span id="line-d46064e393-465">465</span>
<span id="line-d46064e393-466"><span class="lno">466</span></span>
<span id="line-d46064e393-467"><span class="lno">467</span></span>
<span id="line-d46064e393-468"><span class="lno">468</span></span>
<span id="line-d46064e393-469"><span class="lno">469</span></span>
<span id="line-d46064e393-470">470</span>
<span id="line-d46064e393-471"><span class="lno">471</span></span>
<span id="line-d46064e393-472"><span class="lno">472</span></span>
<span id="line-d46064e393-473"><span class="lno">473</span></span>
<span id="line-d46064e393-474"><span class="lno">474</span></span>
<span id="line-d46064e393-475">475</span>
<span id="line-d46064e393-476"><span class="lno">476</span></span>
<span id="line-d46064e393-477"><span class="lno">477</span></span>
<span id="line-d46064e393-478"><span class="lno">478</span></span>
<span id="line-d46064e393-479"><span class="lno">479</span></span>
<span id="line-d46064e393-480">480</span>
<span id="line-d46064e393-481"><span class="lno">481</span></span>
<span id="line-d46064e393-482"><span class="lno">482</span></span>
<span id="line-d46064e393-483"><span class="lno">483</span></span>
<span id="line-d46064e393-484"><span class="lno">484</span></span>
<span id="line-d46064e393-485">485</span>
<span id="line-d46064e393-486"><span class="lno">486</span></span>
<span id="line-d46064e393-487"><span class="lno">487</span></span>
<span id="line-d46064e393-488"><span class="lno">488</span></span>
<span id="line-d46064e393-489"><span class="lno">489</span></span>
<span id="line-d46064e393-490">490</span>
<span id="line-d46064e393-491"><span class="lno">491</span></span>
<span id="line-d46064e393-492"><span class="lno">492</span></span>
<span id="line-d46064e393-493"><span class="lno">493</span></span>
<span id="line-d46064e393-494"><span class="lno">494</span></span>
<span id="line-d46064e393-495">495</span>
<span id="line-d46064e393-496"><span class="lno">496</span></span>
<span id="line-d46064e393-497"><span class="lno">497</span></span>
<span id="line-d46064e393-498"><span class="lno">498</span></span>
<span id="line-d46064e393-499"><span class="lno">499</span></span>
<span id="line-d46064e393-500">500</span>
<span id="line-d46064e393-501"><span class="lno">501</span></span>
<span id="line-d46064e393-502"><span class="lno">502</span></span>
<span id="line-d46064e393-503"><span class="lno">503</span></span>
<span id="line-d46064e393-504"><span class="lno">504</span></span>
<span id="line-d46064e393-505">505</span>
<span id="line-d46064e393-506"><span class="lno">506</span></span>
<span id="line-d46064e393-507"><span class="lno">507</span></span>
<span id="line-d46064e393-508"><span class="lno">508</span></span>
<span id="line-d46064e393-509"><span class="lno">509</span></span>
<span id="line-d46064e393-510">510</span>
<span id="line-d46064e393-511"><span class="lno">511</span></span>
<span id="line-d46064e393-512"><span class="lno">512</span></span>
<span id="line-d46064e393-513"><span class="lno">513</span></span>
<span id="line-d46064e393-514"><span class="lno">514</span></span>
<span id="line-d46064e393-515">515</span>
<span id="line-d46064e393-516"><span class="lno">516</span></span>
<span id="line-d46064e393-517"><span class="lno">517</span></span>
<span id="line-d46064e393-518"><span class="lno">518</span></span>
<span id="line-d46064e393-519"><span class="lno">519</span></span>
<span id="line-d46064e393-520">520</span>
<span id="line-d46064e393-521"><span class="lno">521</span></span>
<span id="line-d46064e393-522"><span class="lno">522</span></span>
<span id="line-d46064e393-523"><span class="lno">523</span></span>
<span id="line-d46064e393-524"><span class="lno">524</span></span>
<span id="line-d46064e393-525">525</span>
<span id="line-d46064e393-526"><span class="lno">526</span></span>
<span id="line-d46064e393-527"><span class="lno">527</span></span>
<span id="line-d46064e393-528"><span class="lno">528</span></span>
<span id="line-d46064e393-529"><span class="lno">529</span></span>
<span id="line-d46064e393-530">530</span>
<span id="line-d46064e393-531"><span class="lno">531</span></span>
<span id="line-d46064e393-532"><span class="lno">532</span></span>
<span id="line-d46064e393-533"><span class="lno">533</span></span>
<span id="line-d46064e393-534"><span class="lno">534</span></span>
<span id="line-d46064e393-535">535</span>
<span id="line-d46064e393-536"><span class="lno">536</span></span>
<span id="line-d46064e393-537"><span class="lno">537</span></span>
<span id="line-d46064e393-538"><span class="lno">538</span></span>
<span id="line-d46064e393-539"><span class="lno">539</span></span>
<span id="line-d46064e393-540">540</span>
<span id="line-d46064e393-541"><span class="lno">541</span></span>
<span id="line-d46064e393-542"><span class="lno">542</span></span>
<span id="line-d46064e393-543"><span class="lno">543</span></span>
<span id="line-d46064e393-544"><span class="lno">544</span></span>
<span id="line-d46064e393-545">545</span>
<span id="line-d46064e393-546"><span class="lno">546</span></span>
<span id="line-d46064e393-547"><span class="lno">547</span></span>
<span id="line-d46064e393-548"><span class="lno">548</span></span>
<span id="line-d46064e393-549"><span class="lno">549</span></span>
<span id="line-d46064e393-550">550</span>
<span id="line-d46064e393-551"><span class="lno">551</span></span>
<span id="line-d46064e393-552"><span class="lno">552</span></span>
<span id="line-d46064e393-553"><span class="lno">553</span></span>
<span id="line-d46064e393-554"><span class="lno">554</span></span>
<span id="line-d46064e393-555">555</span>
<span id="line-d46064e393-556"><span class="lno">556</span></span>
<span id="line-d46064e393-557"><span class="lno">557</span></span>
<span id="line-d46064e393-558"><span class="lno">558</span></span>
<span id="line-d46064e393-559"><span class="lno">559</span></span>
<span id="line-d46064e393-560">560</span>
<span id="line-d46064e393-561"><span class="lno">561</span></span>
<span id="line-d46064e393-562"><span class="lno">562</span></span>
<span id="line-d46064e393-563"><span class="lno">563</span></span>
<span id="line-d46064e393-564"><span class="lno">564</span></span>
<span id="line-d46064e393-565">565</span>
<span id="line-d46064e393-566"><span class="lno">566</span></span>
<span id="line-d46064e393-567"><span class="lno">567</span></span>
<span id="line-d46064e393-568"><span class="lno">568</span></span>
<span id="line-d46064e393-569"><span class="lno">569</span></span>
<span id="line-d46064e393-570">570</span>
<span id="line-d46064e393-571"><span class="lno">571</span></span>
<span id="line-d46064e393-572"><span class="lno">572</span></span>
<span id="line-d46064e393-573"><span class="lno">573</span></span>
<span id="line-d46064e393-574"><span class="lno">574</span></span>
<span id="line-d46064e393-575">575</span>
<span id="line-d46064e393-576"><span class="lno">576</span></span>
<span id="line-d46064e393-577"><span class="lno">577</span></span>
<span id="line-d46064e393-578"><span class="lno">578</span></span>
<span id="line-d46064e393-579"><span class="lno">579</span></span>
<span id="line-d46064e393-580">580</span>
<span id="line-d46064e393-581"><span class="lno">581</span></span>
<span id="line-d46064e393-582"><span class="lno">582</span></span>
<span id="line-d46064e393-583"><span class="lno">583</span></span>
<span id="line-d46064e393-584"><span class="lno">584</span></span>
<span id="line-d46064e393-585">585</span>
<span id="line-d46064e393-586"><span class="lno">586</span></span>
<span id="line-d46064e393-587"><span class="lno">587</span></span>
<span id="line-d46064e393-588"><span class="lno">588</span></span>
<span id="line-d46064e393-589"><span class="lno">589</span></span>
<span id="line-d46064e393-590">590</span>
<span id="line-d46064e393-591"><span class="lno">591</span></span>
<span id="line-d46064e393-592"><span class="lno">592</span></span>
<span id="line-d46064e393-593"><span class="lno">593</span></span>
<span id="line-d46064e393-594"><span class="lno">594</span></span>
<span id="line-d46064e393-595">595</span>
<span id="line-d46064e393-596"><span class="lno">596</span></span>
<span id="line-d46064e393-597"><span class="lno">597</span></span>
<span id="line-d46064e393-598"><span class="lno">598</span></span>
<span id="line-d46064e393-599"><span class="lno">599</span></span>
<span id="line-d46064e393-600">600</span>
<span id="line-d46064e393-601"><span class="lno">601</span></span>
<span id="line-d46064e393-602"><span class="lno">602</span></span>
<span id="line-d46064e393-603"><span class="lno">603</span></span>
<span id="line-d46064e393-604"><span class="lno">604</span></span>
<span id="line-d46064e393-605">605</span>
<span id="line-d46064e393-606"><span class="lno">606</span></span>
<span id="line-d46064e393-607"><span class="lno">607</span></span>
<span id="line-d46064e393-608"><span class="lno">608</span></span>
<span id="line-d46064e393-609"><span class="lno">609</span></span>
<span id="line-d46064e393-610">610</span>
<span id="line-d46064e393-611"><span class="lno">611</span></span>
<span id="line-d46064e393-612"><span class="lno">612</span></span>
<span id="line-d46064e393-613"><span class="lno">613</span></span>
<span id="line-d46064e393-614"><span class="lno">614</span></span>
<span id="line-d46064e393-615">615</span>
<span id="line-d46064e393-616"><span class="lno">616</span></span>
<span id="line-d46064e393-617"><span class="lno">617</span></span>
<span id="line-d46064e393-618"><span class="lno">618</span></span>
<span id="line-d46064e393-619"><span class="lno">619</span></span>
<span id="line-d46064e393-620">620</span>
<span id="line-d46064e393-621"><span class="lno">621</span></span>
<span id="line-d46064e393-622"><span class="lno">622</span></span>
<span id="line-d46064e393-623"><span class="lno">623</span></span>
<span id="line-d46064e393-624"><span class="lno">624</span></span>
<span id="line-d46064e393-625">625</span>
<span id="line-d46064e393-626"><span class="lno">626</span></span>
<span id="line-d46064e393-627"><span class="lno">627</span></span>
<span id="line-d46064e393-628"><span class="lno">628</span></span>
<span id="line-d46064e393-629"><span class="lno">629</span></span>
<span id="line-d46064e393-630">630</span>
<span id="line-d46064e393-631"><span class="lno">631</span></span>
<span id="line-d46064e393-632"><span class="lno">632</span></span>
<span id="line-d46064e393-633"><span class="lno">633</span></span>
<span id="line-d46064e393-634"><span class="lno">634</span></span>
<span id="line-d46064e393-635">635</span>
<span id="line-d46064e393-636"><span class="lno">636</span></span>
<span id="line-d46064e393-637"><span class="lno">637</span></span>
<span id="line-d46064e393-638"><span class="lno">638</span></span>
<span id="line-d46064e393-639"><span class="lno">639</span></span>
<span id="line-d46064e393-640">640</span>
<span id="line-d46064e393-641"><span class="lno">641</span></span>
<span id="line-d46064e393-642"><span class="lno">642</span></span>
<span id="line-d46064e393-643"><span class="lno">643</span></span>
<span id="line-d46064e393-644"><span class="lno">644</span></span>
<span id="line-d46064e393-645">645</span>
<span id="line-d46064e393-646"><span class="lno">646</span></span>
<span id="line-d46064e393-647"><span class="lno">647</span></span>
<span id="line-d46064e393-648"><span class="lno">648</span></span>
<span id="line-d46064e393-649"><span class="lno">649</span></span>
<span id="line-d46064e393-650">650</span>
<span id="line-d46064e393-651"><span class="lno">651</span></span>
<span id="line-d46064e393-652"><span class="lno">652</span></span>
<span id="line-d46064e393-653"><span class="lno">653</span></span>
<span id="line-d46064e393-654"><span class="lno">654</span></span>
<span id="line-d46064e393-655">655</span>
<span id="line-d46064e393-656"><span class="lno">656</span></span>
<span id="line-d46064e393-657"><span class="lno">657</span></span>
<span id="line-d46064e393-658"><span class="lno">658</span></span>
<span id="line-d46064e393-659"><span class="lno">659</span></span>
<span id="line-d46064e393-660">660</span>
<span id="line-d46064e393-661"><span class="lno">661</span></span>
<span id="line-d46064e393-662"><span class="lno">662</span></span>
<span id="line-d46064e393-663"><span class="lno">663</span></span>
<span id="line-d46064e393-664"><span class="lno">664</span></span>
<span id="line-d46064e393-665">665</span>
<span id="line-d46064e393-666"><span class="lno">666</span></span>
<span id="line-d46064e393-667"><span class="lno">667</span></span>
<span id="line-d46064e393-668"><span class="lno">668</span></span>
<span id="line-d46064e393-669"><span class="lno">669</span></span>
<span id="line-d46064e393-670">670</span>
<span id="line-d46064e393-671"><span class="lno">671</span></span>
<span id="line-d46064e393-672"><span class="lno">672</span></span>
<span id="line-d46064e393-673"><span class="lno">673</span></span>
<span id="line-d46064e393-674"><span class="lno">674</span></span>
<span id="line-d46064e393-675">675</span>
<span id="line-d46064e393-676"><span class="lno">676</span></span>
<span id="line-d46064e393-677"><span class="lno">677</span></span>
<span id="line-d46064e393-678"><span class="lno">678</span></span>
<span id="line-d46064e393-679"><span class="lno">679</span></span>
<span id="line-d46064e393-680">680</span>
<span id="line-d46064e393-681"><span class="lno">681</span></span>
<span id="line-d46064e393-682"><span class="lno">682</span></span>
<span id="line-d46064e393-683"><span class="lno">683</span></span>
<span id="line-d46064e393-684"><span class="lno">684</span></span>
<span id="line-d46064e393-685">685</span>
<span id="line-d46064e393-686"><span class="lno">686</span></span>
<span id="line-d46064e393-687"><span class="lno">687</span></span>
<span id="line-d46064e393-688"><span class="lno">688</span></span>
<span id="line-d46064e393-689"><span class="lno">689</span></span>
<span id="line-d46064e393-690">690</span>
<span id="line-d46064e393-691"><span class="lno">691</span></span>
<span id="line-d46064e393-692"><span class="lno">692</span></span>
<span id="line-d46064e393-693"><span class="lno">693</span></span>
<span id="line-d46064e393-694"><span class="lno">694</span></span>
<span id="line-d46064e393-695">695</span>
<span id="line-d46064e393-696"><span class="lno">696</span></span>
<span id="line-d46064e393-697"><span class="lno">697</span></span>
<span id="line-d46064e393-698"><span class="lno">698</span></span>
<span id="line-d46064e393-699"><span class="lno">699</span></span>
<span id="line-d46064e393-700">700</span>
<span id="line-d46064e393-701"><span class="lno">701</span></span>
<span id="line-d46064e393-702"><span class="lno">702</span></span>
<span id="line-d46064e393-703"><span class="lno">703</span></span>
<span id="line-d46064e393-704"><span class="lno">704</span></span>
<span id="line-d46064e393-705">705</span>
<span id="line-d46064e393-706"><span class="lno">706</span></span>
<span id="line-d46064e393-707"><span class="lno">707</span></span>
<span id="line-d46064e393-708"><span class="lno">708</span></span>
<span id="line-d46064e393-709"><span class="lno">709</span></span>
<span id="line-d46064e393-710">710</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:a="http://nwalsh.com/ns/xslt/analysis"
                xmlns:f="http://nwalsh.com/ns/xslt/functions"
                xmlns:fp="http://nwalsh.com/ns/xslt/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://nwalsh.com/ns/xslt/modes"
                xmlns:t="http://nwalsh.com/ns/xslt/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:summarize"
                exclude-result-prefixes="a f fp h m t xs"
                version="3.0"&gt;

&lt;xsl:param name="css" select="'css/xsltexplorer.css'"/&gt;
&lt;xsl:param name="js" select="'js/xsltexplorer.js'"/&gt;
&lt;xsl:param name="prismcss" select="'css/prism.css'"/&gt;
&lt;xsl:param name="prismjs" select="'js/prism.js'"/&gt;

&lt;xsl:param name="title" select="()"/&gt;

&lt;xsl:variable name="Z" select="xs:dayTimeDuration('PT0H')"/&gt;

&lt;xsl:template match="a:summary"&gt;
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;
        &lt;xsl:sequence select="if (exists($title))
                              then $title
                              else $TITLE
                                   || ': '
                                   || tokenize(base-uri(/*), '/')[last()]"/&gt;
      &lt;/title&gt;
      &lt;meta name="viewport" content="width=device-width,initial-scale=1" /&gt;
      &lt;link rel="shortcut icon" href="https://xslt.xmlexplorer.com/img/icon64.png"
            type="image/png" /&gt;
      &lt;link href="https://fonts.googleapis.com/css?family=B612+Mono" rel="stylesheet" /&gt;
      &lt;link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet" /&gt;
      &lt;link href="https://fonts.googleapis.com/css?family=Noto+Serif" rel="stylesheet" /&gt;
      &lt;link rel="stylesheet" href="{$prismcss}"/&gt;
      &lt;link rel="stylesheet" href="{$css}"/&gt;
      &lt;link rel="schema.dc" href="http://purl.org/dc/elements/1.1/"/&gt;
      &lt;meta name="dc.modified"
            content="{format-dateTime(adjust-dateTime-to-timezone(current-dateTime(), $Z),
                                      '[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01]Z')}"/&gt;
      &lt;meta name="generator" content="{$TITLE} {$VERSION} / {$VERHASH}"/&gt;
      &lt;script src="{$prismjs}"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;main&gt;
        &lt;h1&gt;
          &lt;a href="https://xslt.xmlexplorer.com/"&gt;
            &lt;img class="logo" src="https://xslt.xmlexplorer.com/img/logo256.png"/&gt;
          &lt;/a&gt;
          &lt;xsl:sequence select="if (exists($title))
                                then $title
                                else $TITLE
                                     || ': '
                                     || tokenize(base-uri(/*), '/')[last()]"/&gt;
        &lt;/h1&gt;

        &lt;xsl:variable name="details" as="element(h:span)*"&gt;
          &lt;xsl:sequence select="@imports ! f:summary-count(./string(), 'import')"/&gt;
          &lt;xsl:sequence select="@includes ! f:summary-count(./string(), 'include')"/&gt;
          &lt;xsl:sequence select="@templates ! f:summary-count(./string(), 'template')"/&gt;
          &lt;xsl:sequence select="@functions ! f:summary-count(./string(), 'function')"/&gt;
          &lt;xsl:sequence select="@variables ! f:summary-count(./string(), 'variable')"/&gt;
          &lt;xsl:sequence select="@params ! f:summary-count(./string(), 'param')"/&gt;
        &lt;/xsl:variable&gt;

        &lt;xsl:if test="$details"&gt;
          &lt;p&gt;
            &lt;xsl:for-each select="$details"&gt;
              &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
              &lt;!-- strip off the spans so they aren't visible to CSS/JS --&gt;
              &lt;xsl:sequence select="node()"/&gt;
            &lt;/xsl:for-each&gt;
          &lt;/p&gt;
        &lt;/xsl:if&gt;

        &lt;xsl:if test="a:stylesheet/a:stylesheet"&gt;
          &lt;div class="toc"&gt;
            &lt;span class="closed"&gt;List of Imports&lt;/span&gt;
            &lt;xsl:apply-templates select="a:stylesheet" mode="m:toc"/&gt;
          &lt;/div&gt;
        &lt;/xsl:if&gt;

        &lt;xsl:variable name="list" select="//a:stylesheet/a:template[@name]"/&gt;
        &lt;xsl:if test="$list"&gt;
          &lt;div class="lot"&gt;
            &lt;span class="closed"&gt;List of Templates&lt;/span&gt;
            &lt;dl class="columns"&gt;
              &lt;xsl:for-each select="$list"&gt;
                &lt;xsl:sort select="@id"/&gt;
                &lt;dt&gt;
                  &lt;xsl:apply-templates select="." mode="m:reference"/&gt;
                &lt;/dt&gt;
              &lt;/xsl:for-each&gt;
            &lt;/dl&gt;
          &lt;/div&gt;
        &lt;/xsl:if&gt;         

        &lt;xsl:variable name="list" select="//a:stylesheet/a:function"/&gt;
        &lt;xsl:if test="$list"&gt;
          &lt;div class="lof"&gt;
            &lt;span class="closed"&gt;List of Functions&lt;/span&gt;
            &lt;dl class="columns"&gt;
              &lt;xsl:for-each select="$list"&gt;
                &lt;xsl:sort select="@id"/&gt;
                &lt;dt&gt;
                  &lt;xsl:apply-templates select="." mode="m:reference"/&gt;
                &lt;/dt&gt;
              &lt;/xsl:for-each&gt;
            &lt;/dl&gt;
          &lt;/div&gt;
        &lt;/xsl:if&gt;            

        &lt;xsl:apply-templates/&gt;
      &lt;/main&gt;
      &lt;footer&gt;
        &lt;xsl:variable name="now" select="adjust-dateTime-to-timezone(current-dateTime(), $Z)"/&gt;
        &lt;p&gt;
          &lt;xsl:text&gt;Generated by &lt;/xsl:text&gt;
          &lt;a href="https://xslt.xmlexplorer.com/"&gt;
            &lt;xsl:sequence select="$TITLE"/&gt;
          &lt;/a&gt;
          &lt;xsl:text&gt; version &lt;/xsl:text&gt;
          &lt;span title="git hash: {$VERHASH}"&gt;
            &lt;xsl:sequence select="$VERSION"/&gt;
          &lt;/span&gt;
          &lt;xsl:text&gt; at &lt;/xsl:text&gt;
          &lt;xsl:sequence select="format-dateTime($now, '[H01]:[m01]')"/&gt;
          &lt;xsl:text&gt; on &lt;/xsl:text&gt;
          &lt;xsl:sequence select="format-dateTime($now, '[D01] [MNn,*-3] [Y0001]')"/&gt;
          &lt;xsl:text&gt;.&lt;/xsl:text&gt;
        &lt;/p&gt;
        &lt;p&gt;
          &lt;xsl:text&gt;Source: &lt;/xsl:text&gt;
          &lt;xsl:sequence select="@xml:base/string()"/&gt;
        &lt;/p&gt;
      &lt;/footer&gt;
    &lt;/body&gt;
    &lt;script src="{$js}"/&gt;
  &lt;/html&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:stylesheet"&gt;
  &lt;xsl:variable name="stylesheet" select="."/&gt;

  &lt;xsl:variable name="hsize" select="min((count(ancestor::a:stylesheet)+1,4))"/&gt;

  &lt;div class="{local-name(.)}" id="{@id}"&gt;
    &lt;xsl:element name="h{$hsize}" namespace="http://www.w3.org/1999/xhtml"&gt;
      &lt;xsl:value-of select="tokenize(@xml:base, '/')[last()]"/&gt;
      &lt;xsl:message select="'Summarizing', @href/string(), '…'"/&gt;
    &lt;/xsl:element&gt;

    &lt;xsl:variable name="summary" as="element(h:span)*"&gt;
      &lt;xsl:sequence select="f:summary-count(@imports, 'import')"/&gt;
      &lt;xsl:sequence select="f:summary-count(@includes, 'include')"/&gt;
      &lt;xsl:if test="@templates ne '0'"&gt;
        &lt;span&gt;
          &lt;xsl:sequence select="f:summary-count(@templates, 'template')"/&gt;
          &lt;xsl:sequence select="f:summary-details(a:templates)"/&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;          
      &lt;xsl:if test="@functions ne '0'"&gt;
        &lt;span&gt;
          &lt;xsl:sequence select="f:summary-count(@functions, 'function')"/&gt;
          &lt;xsl:sequence select="f:summary-details(a:functions)"/&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;          
      &lt;xsl:if test="@variables ne '0'"&gt;
        &lt;span&gt;
          &lt;xsl:sequence select="f:summary-count(@variables, 'variable')"/&gt;
          &lt;xsl:sequence select="f:summary-details(a:variables)"/&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;          
      &lt;xsl:if test="@params ne '0'"&gt;
        &lt;span&gt;
          &lt;xsl:sequence select="f:summary-count(@params, 'param')"/&gt;
          &lt;xsl:sequence select="f:summary-details(a:params)"/&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;          
    &lt;/xsl:variable&gt;

    &lt;xsl:if test="exists($summary)"&gt;
      &lt;p&gt;
        &lt;xsl:for-each select="$summary"&gt;
          &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:for-each&gt;
      &lt;/p&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:apply-templates select="a:stylesheet"/&gt;

    &lt;div class="instructions"&gt;
      &lt;div class="title closed"&gt;Instructions&lt;/div&gt;
      &lt;div class="body"&gt;
        &lt;xsl:apply-templates select="a:* except (a:stylesheet|a:variables|a:functions
                                                 |a:templates|a:params)"/&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;xsl:if test="string($source-listings) = ('1','true','yes')"&gt;
      &lt;div class="source-code"&gt;
        &lt;div class="title closed"&gt;Source code&lt;/div&gt;
        &lt;div class="body"&gt;
          &lt;div&gt;
            &lt;xsl:try&gt;
              &lt;xsl:variable name="code" select="unparsed-text(@xml:base)"/&gt;
              &lt;table&gt;
                &lt;tr&gt;
                  &lt;td valign="top" align="right"&gt;
                    &lt;pre class="fake-prism"&gt;
                      &lt;xsl:for-each select="tokenize($code,'&amp;#10;')"&gt;
                        &lt;span id="line-{generate-id($stylesheet)}-{position()}"&gt;
                          &lt;xsl:choose&gt;
                            &lt;xsl:when test="position() eq 1 or (position() mod 5 = 0)"&gt;
                              &lt;xsl:sequence select="position()"/&gt;
                            &lt;/xsl:when&gt;
                            &lt;xsl:otherwise&gt;
                              &lt;span class="lno"&gt;
                                &lt;xsl:sequence select="position()"/&gt;
                              &lt;/span&gt;
                            &lt;/xsl:otherwise&gt;
                          &lt;/xsl:choose&gt;
                        &lt;/span&gt;
                        &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
                      &lt;/xsl:for-each&gt;
                    &lt;/pre&gt;
                  &lt;/td&gt;
                  &lt;td valign="top"&gt;
                    &lt;pre&gt;
                      &lt;code class="language-xml"&gt;
                        &lt;xsl:sequence select="$code"/&gt;
                      &lt;/code&gt;
                    &lt;/pre&gt;
                  &lt;/td&gt;
                &lt;/tr&gt;
              &lt;/table&gt;
              &lt;xsl:catch&gt;
                &lt;xsl:message select="'Failed to load source:', @xml:base"/&gt;
                &lt;xsl:sequence select="()"/&gt;
              &lt;/xsl:catch&gt;
            &lt;/xsl:try&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:function"&gt;
  &lt;div id="{@id}"
       class="instruction {@class}"&gt;
    &lt;div class="title"&gt;
      &lt;xsl:sequence select="f:line-link(.)"/&gt;
      &lt;xsl:text&gt;Function &lt;/xsl:text&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="count(a:no-arity) gt 1"&gt;
          &lt;xsl:sequence select="@display-name/string()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="substring-before(@display-name/string(), '#')"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
      &lt;xsl:text&gt;(&lt;/xsl:text&gt;
      &lt;xsl:for-each select="a:param"&gt;
        &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
        &lt;xsl:text&gt;$&lt;/xsl:text&gt;
        &lt;xsl:value-of select="@name/string()"/&gt;
        &lt;xsl:if test="@as"&gt;
          &lt;xsl:text&gt; as &lt;/xsl:text&gt;
          &lt;xsl:value-of select="@as/string()"/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:text&gt;)&lt;/xsl:text&gt;

      &lt;xsl:if test="@as"&gt;
        &lt;xsl:sequence select="' as ' || @as"/&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="@recursive = 'true'"&gt;
        &lt;xsl:text&gt; &lt;/xsl:text&gt;
        &lt;span class="recursive" title="Recursive function"&gt;♻&lt;/span&gt;
      &lt;/xsl:if&gt;
    &lt;/div&gt;

    &lt;div class="props"&gt;
      &lt;xsl:if test="a:shadow"&gt;
        &lt;div class="shadows"&gt;
          &lt;span class="marker"&gt;⚠&lt;/span&gt;
          &lt;xsl:text&gt;Shadows: &lt;/xsl:text&gt;
          &lt;xsl:apply-templates select="key('id', a:shadow)" mode="m:reference"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:call-template name="t:variables-referenced"/&gt;
      &lt;xsl:call-template name="t:functions-called"/&gt;
      &lt;xsl:call-template name="t:templates-called"/&gt;

      &lt;div class="used-by"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="a:used-by"&gt;
            &lt;span class="marker"&gt;
              &lt;xsl:if test="count(a:used-by) = 1 and a:used-by/string() = @id/string()"&gt;
                &lt;span class="marker"&gt;☞&lt;/span&gt;
              &lt;/xsl:if&gt;
            &lt;/span&gt;
            &lt;xsl:text&gt;Used by: &lt;/xsl:text&gt;
            &lt;xsl:sequence select="f:reference-list(a:used-by)"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;span class="marker"&gt;☞&lt;/span&gt;
            &lt;span class="unused"&gt;Unused&lt;/span&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/div&gt;

      &lt;xsl:if test="a:used-by-module"&gt;
        &lt;div class="used-in"&gt;
          &lt;span class="marker"&gt;
            &lt;xsl:if test="@elsewhere = 'true'"&gt;
              &lt;xsl:attribute name="title" select="'Only used in one other module'"/&gt;
              &lt;xsl:text&gt;☝&lt;/xsl:text&gt;
            &lt;/xsl:if&gt;
          &lt;/span&gt;
          &lt;xsl:text&gt;Used in: &lt;/xsl:text&gt;
          &lt;xsl:sequence select="f:reference-list(a:used-by-module)"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:variable"&gt;
  &lt;div id="{@id}"
       class="instruction {@class}"&gt;
    &lt;div class="title"&gt;
      &lt;xsl:sequence select="f:line-link(.)"/&gt;
      &lt;xsl:sequence
          select="if (@type = 'param') then 'Param ' else 'Variable '"/&gt;
      &lt;code&gt;
        &lt;xsl:sequence select="'$'||@display-name/string()"/&gt;
      &lt;/code&gt;
      &lt;xsl:if test="@as"&gt;
        &lt;xsl:text&gt; as &lt;/xsl:text&gt;
        &lt;code&gt;
          &lt;xsl:sequence select="@as/string()"/&gt;
        &lt;/code&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="@static = 'yes'"&gt;
        &lt;xsl:text&gt; [static]&lt;/xsl:text&gt;
      &lt;/xsl:if&gt;
    &lt;/div&gt;

    &lt;div class="props"&gt;
      &lt;xsl:if test="a:shadow"&gt;
        &lt;div class="shadows"&gt;
          &lt;span class="marker"&gt;⚠&lt;/span&gt;
          &lt;xsl:text&gt;Shadows: &lt;/xsl:text&gt;
          &lt;xsl:apply-templates select="key('id', a:shadow)" mode="m:reference"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:call-template name="t:variables-referenced"/&gt;
      &lt;xsl:call-template name="t:functions-called"/&gt;
      &lt;xsl:call-template name="t:templates-called"/&gt;

      &lt;div class="used-by"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="a:used-by"&gt;
            &lt;span class="marker"&gt;&lt;/span&gt;
            &lt;xsl:text&gt;Used by: &lt;/xsl:text&gt;
            &lt;xsl:sequence select="f:reference-list(a:used-by)"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;span class="marker"&gt;☞&lt;/span&gt;
            &lt;span class="unused"&gt;Unused&lt;/span&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/div&gt;

      &lt;xsl:if test="a:used-by-module"&gt;
        &lt;div class="used-in"&gt;
          &lt;span class="marker"&gt;
            &lt;xsl:if test="@elsewhere = 'true'"&gt;
              &lt;xsl:attribute name="title" select="'Only used in one other module'"/&gt;
              &lt;xsl:text&gt;☝&lt;/xsl:text&gt;
            &lt;/xsl:if&gt;
          &lt;/span&gt;
          &lt;xsl:text&gt;Used in: &lt;/xsl:text&gt;
          &lt;xsl:sequence select="f:reference-list(a:used-by-module)"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:template"&gt;
  &lt;div id="{@id}"
       class="instruction {@class}"&gt;
    &lt;div class="title"&gt;
      &lt;xsl:sequence select="f:line-link(.)"/&gt;
      &lt;xsl:text&gt;Template&lt;/xsl:text&gt;

      &lt;xsl:if test="@name"&gt;
        &lt;xsl:sequence select="' ' || @display-name/string()"/&gt;
      &lt;/xsl:if&gt;
      
      &lt;xsl:choose&gt;
        &lt;xsl:when test="@match and string-length(@match) gt 30"&gt;
          &lt;xsl:sequence select="' match ≅ ' || substring(@match, 1, 30) || '…'"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="' match ≅ ' || @match/string()"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;

      &lt;xsl:if test="@as"&gt;
        &lt;xsl:sequence select="' as ' || @as"/&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="@recursive = 'true'"&gt;
        &lt;xsl:text&gt; &lt;/xsl:text&gt;
        &lt;span class="recursive" title="Recursive template"&gt;♻&lt;/span&gt;
      &lt;/xsl:if&gt;
    &lt;/div&gt;

    &lt;div class="props"&gt;
      &lt;xsl:if test="a:shadow"&gt;
        &lt;div class="shadows"&gt;
          &lt;span class="marker"&gt;⚠&lt;/span&gt;
          &lt;xsl:text&gt;Shadows: &lt;/xsl:text&gt;
          &lt;xsl:apply-templates select="key('id', a:shadow)" mode="m:reference"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:call-template name="t:variables-referenced"/&gt;
      &lt;xsl:call-template name="t:functions-called"/&gt;
      &lt;xsl:call-template name="t:templates-called"/&gt;

      &lt;xsl:if test="@name"&gt;
        &lt;div class="used-by"&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="a:used-by"&gt;
              &lt;span class="marker"&gt;
                &lt;xsl:if test="count(a:used-by) = 1 and a:used-by/string() = @id/string()"&gt;
                  &lt;span class="marker"&gt;☞&lt;/span&gt;
                &lt;/xsl:if&gt;
              &lt;/span&gt;
              &lt;xsl:text&gt;Used by: &lt;/xsl:text&gt;
              &lt;xsl:sequence select="f:reference-list(a:used-by)"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;span class="marker"&gt;☞&lt;/span&gt;
              &lt;span class="unused"&gt;
                &lt;xsl:text&gt;Unused&lt;/xsl:text&gt;
                &lt;xsl:if test="@match"&gt;
                  &lt;xsl:text&gt; (by name)&lt;/xsl:text&gt;
                &lt;/xsl:if&gt;
              &lt;/span&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="a:used-by-module"&gt;
        &lt;div class="used-in"&gt;
          &lt;span class="marker"&gt;
            &lt;xsl:if test="@elsewhere = 'true'"&gt;
              &lt;xsl:attribute name="title" select="'Only used in one other module'"/&gt;
              &lt;xsl:text&gt;☝&lt;/xsl:text&gt;
            &lt;/xsl:if&gt;
          &lt;/span&gt;
          &lt;xsl:text&gt;Used in: &lt;/xsl:text&gt;
          &lt;xsl:sequence select="f:reference-list(a:used-by-module)"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="@mode"&gt;
        &lt;div class="mode"&gt;
          &lt;xsl:text&gt;Mode: &lt;/xsl:text&gt;
          &lt;code&gt;
            &lt;xsl:value-of select="@display-mode/string()"/&gt;
          &lt;/code&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="@priority"&gt;
        &lt;div class="priority"&gt;
          &lt;xsl:text&gt;Priority: &lt;/xsl:text&gt;
          &lt;code&gt;
            &lt;xsl:value-of select="@priority/string()"/&gt;
          &lt;/code&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="@match"&gt;
        &lt;div class="matches"&gt;
          &lt;xsl:text&gt;Matches: &lt;/xsl:text&gt;
          &lt;xsl:for-each select="tokenize(@match,'\|')"&gt;
            &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
            &lt;code&gt;
              &lt;xsl:value-of select="."/&gt;
            &lt;/code&gt;
          &lt;/xsl:for-each&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:variables-referenced"&gt;
  &lt;xsl:if test="a:variable"&gt;
    &lt;div class="uses"&gt;
      &lt;xsl:text&gt;Uses: &lt;/xsl:text&gt;
      &lt;xsl:for-each select="a:variable ! key('id', .)"&gt;
        &lt;xsl:sort select="@name"/&gt;
        &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
        &lt;xsl:apply-templates select="." mode="m:reference"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/div&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:functions-called"&gt;
  &lt;xsl:if test="a:function"&gt;
    &lt;div class="calls"&gt;
      &lt;xsl:text&gt;Calls: &lt;/xsl:text&gt;
      &lt;xsl:for-each select="a:function ! key('id', .)"&gt;
        &lt;xsl:sort select="@name"/&gt;
        &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
        &lt;xsl:apply-templates select="." mode="m:reference"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/div&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:templates-called"&gt;
  &lt;xsl:if test="a:template"&gt;
    &lt;div class="calls"&gt;
      &lt;xsl:text&gt;Calls: &lt;/xsl:text&gt;
      &lt;xsl:for-each select="a:template ! key('id', .)"&gt;
        &lt;xsl:sort select="@name"/&gt;
        &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
        &lt;xsl:apply-templates select="." mode="m:reference"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/div&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:reference-list"&gt;
  &lt;xsl:param name="refs" as="element()+"/&gt;

  &lt;xsl:for-each select="$refs ! key('id', .)"&gt;
    &lt;xsl:sort select="@name"/&gt;
    &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="." mode="m:reference"/&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="*" mode="m:reference"&gt;
  &lt;a href="#{@id}" class="error"&gt;
    &lt;xsl:text&gt;???&lt;/xsl:text&gt;
    &lt;xsl:sequence select="local-name(.)"/&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:stylesheet" mode="m:reference"&gt;
  &lt;a href="#{@id}"&gt;
    &lt;xsl:sequence select="if (@href)
                          then string(@href)
                          else '«root»'"/&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:variable" mode="m:reference"&gt;
  &lt;a href="#{@id}"&gt;
    &lt;xsl:sequence select="'$'||@display-name/string()"/&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:function" mode="m:reference"&gt;
  &lt;xsl:variable name="fdefs"
                select="key('fnoarity', @noarity-id)"/&gt;

  &lt;a href="#{@id}"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="count($fdefs) gt 1"&gt;
        &lt;xsl:sequence select="@display-name/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="substring-before(@display-name/string(), '#')"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
    &lt;xsl:text&gt;()&lt;/xsl:text&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="a:template" mode="m:reference"&gt;
  &lt;a href="#{@id}"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@name"&gt;
        &lt;xsl:sequence select="@display-name/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:text&gt;template&lt;/xsl:text&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="a:stylesheet" mode="m:toc"&gt;
  &lt;xsl:if test="a:stylesheet"&gt;
    &lt;ul&gt;
      &lt;xsl:for-each select="a:stylesheet"&gt;
        &lt;li&gt;
          &lt;a href="#{@id}"&gt;
            &lt;xsl:sequence select="@href/string()"/&gt;
          &lt;/a&gt;
          &lt;xsl:apply-templates select="." mode="m:toc"/&gt;
        &lt;/li&gt;
      &lt;/xsl:for-each&gt;
    &lt;/ul&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;
&lt;xsl:function name="f:line-link" as="element(h:span)?"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;span class="link"&gt;
    &lt;xsl:if test="string($source-listings) = ('1','true','yes')
                  and $node/@line-number"&gt;
      &lt;xsl:attribute name="title" select="'Line ' || $node/@line-number/string()"/&gt;
      &lt;a href="#line-{generate-id($node/ancestor::a:stylesheet[1])}-{$node/@line-number}"
         class="goto-lno"&gt;
        &lt;xsl:text&gt;§&lt;/xsl:text&gt;
      &lt;/a&gt;
    &lt;/xsl:if&gt;
  &lt;/span&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:summary-count" as="element(h:span)?"&gt;
  &lt;xsl:param name="count" as="xs:string"/&gt;
  &lt;xsl:param name="label" as="xs:string"/&gt;

  &lt;xsl:if test="$count ne '0'"&gt;
    &lt;span class="{$label} all"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$count = '1'"&gt;
          &lt;xsl:sequence select="$count || ' ' || $label"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="not($count castable as xs:integer)"&gt;
          &lt;xsl:sequence select="$count || ' ' || $label"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="$count || ' ' || $label || 's'"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/span&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:summary-details"&gt;
  &lt;xsl:param name="detail" as="element()"/&gt;

  &lt;!-- hack --&gt;
  &lt;xsl:variable name="class" select="local-name($detail)"/&gt;
  &lt;xsl:variable name="class" select="substring($class, 1, string-length($class) - 1)"/&gt;

  &lt;xsl:variable name="detail" as="element(h:span)*"&gt;
    &lt;xsl:if test="$detail/a:unused"&gt;
      &lt;span class="{$class} unused"&gt;
        &lt;xsl:sequence select="count($detail/a:unused) || ' unused'"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$detail/a:shadows"&gt;
      &lt;span class="{$class} shadows"&gt;
        &lt;xsl:sequence select="count($detail/a:shadows) || ' shadow'"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$detail/a:elsewhere"&gt;
      &lt;span class="{$class} elsewhere"&gt;
        &lt;xsl:sequence select="count($detail/a:elsewhere) || ' used only in one other module'"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:if test="exists($detail)"&gt;
    &lt;xsl:text&gt; (&lt;/xsl:text&gt;
    &lt;xsl:for-each select="$detail"&gt;
      &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-49518-..source-listings" class="instruction param elsewhere"><div class="title"><span class="link" title="Line 18"><a href="#line-d46064e2-18" class="goto-lno">§</a></span>Param <code>$source-listings</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-60890-t-2">template</a>, <a href="#S-60890-nwalsh.com.ns.xslt.functions.line-link,1">f:line-link()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-60890">summarize.xsl</a></div></div></div><div id="S-49518-..debug-parse" class="instruction param"><div class="title"><span class="link" title="Line 20"><a href="#line-d46064e2-20" class="goto-lno">§</a></span>Param <code>$debug-parse</code> [static]</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-49518-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-49518">«root»</a></div></div></div><div id="S-49518-..debug-resolve" class="instruction param"><div class="title"><span class="link" title="Line 21"><a href="#line-d46064e2-21" class="goto-lno">§</a></span>Param <code>$debug-resolve</code> [static]</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-49518-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-49518">«root»</a></div></div></div><div id="S-49518-..debug-analyze" class="instruction param"><div class="title"><span class="link" title="Line 22"><a href="#line-d46064e2-22" class="goto-lno">§</a></span>Param <code>$debug-analyze</code> [static]</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-49518-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-49518">«root»</a></div></div></div><div id="S-49518-..format" class="instruction param"><div class="title"><span class="link" title="Line 23"><a href="#line-d46064e2-23" class="goto-lno">§</a></span>Param <code>$format</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-49518-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-49518">«root»</a></div></div></div><div id="S-49518-..xspec-tests" class="instruction param"><div class="title"><span class="link" title="Line 24"><a href="#line-d46064e2-24" class="goto-lno">§</a></span>Param <code>$xspec-tests</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-49518-t-1">template</a>, <a href="#S-56087-nwalsh.com.ns.xslt.functions.checksum,1">f:checksum()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-49518">«root»</a>, <a href="#S-56087">parse.xsl</a></div></div></div><div id="S-49518-t-1" class="instruction template"><div class="title"><span class="link" title="Line 26"><a href="#line-d46064e2-26" class="goto-lno">§</a></span>Template match ≅ /</div><div class="props"><div class="uses">Uses: <a href="#S-49518-..debug-analyze">$debug-analyze</a>, <a href="#S-49518-..debug-parse">$debug-parse</a>, <a href="#S-49518-..debug-resolve">$debug-resolve</a>, <a href="#S-49518-..format">$format</a>, <a href="#S-49518-..xspec-tests">$xspec-tests</a></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-49518-t-2" class="instruction template"><div class="title"><span class="link" title="Line 73"><a href="#line-d46064e2-73" class="goto-lno">§</a></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:fix-base-uri</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-49518-t-3" class="instruction template"><div class="title"><span class="link" title="Line 79"><a href="#line-d46064e2-79" class="goto-lno">§</a></span>Template match ≅ @xml:base</div><div class="props"><div class="mode">Mode: <code>m:fix-base-uri</code></div><div class="matches">Matches: <code>@xml:base</code></div></div></div><div id="S-49518-t-4" class="instruction template"><div class="title"><span class="link" title="Line 84"><a href="#line-d46064e2-84" class="goto-lno">§</a></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:fix-base-uri</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-d46064e2-1">1</span>
<span id="line-d46064e2-2"><span class="lno">2</span></span>
<span id="line-d46064e2-3"><span class="lno">3</span></span>
<span id="line-d46064e2-4"><span class="lno">4</span></span>
<span id="line-d46064e2-5">5</span>
<span id="line-d46064e2-6"><span class="lno">6</span></span>
<span id="line-d46064e2-7"><span class="lno">7</span></span>
<span id="line-d46064e2-8"><span class="lno">8</span></span>
<span id="line-d46064e2-9"><span class="lno">9</span></span>
<span id="line-d46064e2-10">10</span>
<span id="line-d46064e2-11"><span class="lno">11</span></span>
<span id="line-d46064e2-12"><span class="lno">12</span></span>
<span id="line-d46064e2-13"><span class="lno">13</span></span>
<span id="line-d46064e2-14"><span class="lno">14</span></span>
<span id="line-d46064e2-15">15</span>
<span id="line-d46064e2-16"><span class="lno">16</span></span>
<span id="line-d46064e2-17"><span class="lno">17</span></span>
<span id="line-d46064e2-18"><span class="lno">18</span></span>
<span id="line-d46064e2-19"><span class="lno">19</span></span>
<span id="line-d46064e2-20">20</span>
<span id="line-d46064e2-21"><span class="lno">21</span></span>
<span id="line-d46064e2-22"><span class="lno">22</span></span>
<span id="line-d46064e2-23"><span class="lno">23</span></span>
<span id="line-d46064e2-24"><span class="lno">24</span></span>
<span id="line-d46064e2-25">25</span>
<span id="line-d46064e2-26"><span class="lno">26</span></span>
<span id="line-d46064e2-27"><span class="lno">27</span></span>
<span id="line-d46064e2-28"><span class="lno">28</span></span>
<span id="line-d46064e2-29"><span class="lno">29</span></span>
<span id="line-d46064e2-30">30</span>
<span id="line-d46064e2-31"><span class="lno">31</span></span>
<span id="line-d46064e2-32"><span class="lno">32</span></span>
<span id="line-d46064e2-33"><span class="lno">33</span></span>
<span id="line-d46064e2-34"><span class="lno">34</span></span>
<span id="line-d46064e2-35">35</span>
<span id="line-d46064e2-36"><span class="lno">36</span></span>
<span id="line-d46064e2-37"><span class="lno">37</span></span>
<span id="line-d46064e2-38"><span class="lno">38</span></span>
<span id="line-d46064e2-39"><span class="lno">39</span></span>
<span id="line-d46064e2-40">40</span>
<span id="line-d46064e2-41"><span class="lno">41</span></span>
<span id="line-d46064e2-42"><span class="lno">42</span></span>
<span id="line-d46064e2-43"><span class="lno">43</span></span>
<span id="line-d46064e2-44"><span class="lno">44</span></span>
<span id="line-d46064e2-45">45</span>
<span id="line-d46064e2-46"><span class="lno">46</span></span>
<span id="line-d46064e2-47"><span class="lno">47</span></span>
<span id="line-d46064e2-48"><span class="lno">48</span></span>
<span id="line-d46064e2-49"><span class="lno">49</span></span>
<span id="line-d46064e2-50">50</span>
<span id="line-d46064e2-51"><span class="lno">51</span></span>
<span id="line-d46064e2-52"><span class="lno">52</span></span>
<span id="line-d46064e2-53"><span class="lno">53</span></span>
<span id="line-d46064e2-54"><span class="lno">54</span></span>
<span id="line-d46064e2-55">55</span>
<span id="line-d46064e2-56"><span class="lno">56</span></span>
<span id="line-d46064e2-57"><span class="lno">57</span></span>
<span id="line-d46064e2-58"><span class="lno">58</span></span>
<span id="line-d46064e2-59"><span class="lno">59</span></span>
<span id="line-d46064e2-60">60</span>
<span id="line-d46064e2-61"><span class="lno">61</span></span>
<span id="line-d46064e2-62"><span class="lno">62</span></span>
<span id="line-d46064e2-63"><span class="lno">63</span></span>
<span id="line-d46064e2-64"><span class="lno">64</span></span>
<span id="line-d46064e2-65">65</span>
<span id="line-d46064e2-66"><span class="lno">66</span></span>
<span id="line-d46064e2-67"><span class="lno">67</span></span>
<span id="line-d46064e2-68"><span class="lno">68</span></span>
<span id="line-d46064e2-69"><span class="lno">69</span></span>
<span id="line-d46064e2-70">70</span>
<span id="line-d46064e2-71"><span class="lno">71</span></span>
<span id="line-d46064e2-72"><span class="lno">72</span></span>
<span id="line-d46064e2-73"><span class="lno">73</span></span>
<span id="line-d46064e2-74"><span class="lno">74</span></span>
<span id="line-d46064e2-75">75</span>
<span id="line-d46064e2-76"><span class="lno">76</span></span>
<span id="line-d46064e2-77"><span class="lno">77</span></span>
<span id="line-d46064e2-78"><span class="lno">78</span></span>
<span id="line-d46064e2-79"><span class="lno">79</span></span>
<span id="line-d46064e2-80">80</span>
<span id="line-d46064e2-81"><span class="lno">81</span></span>
<span id="line-d46064e2-82"><span class="lno">82</span></span>
<span id="line-d46064e2-83"><span class="lno">83</span></span>
<span id="line-d46064e2-84"><span class="lno">84</span></span>
<span id="line-d46064e2-85">85</span>
<span id="line-d46064e2-86"><span class="lno">86</span></span>
<span id="line-d46064e2-87"><span class="lno">87</span></span>
<span id="line-d46064e2-88"><span class="lno">88</span></span>
<span id="line-d46064e2-89"><span class="lno">89</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:m="http://nwalsh.com/ns/xslt/modes"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                exclude-result-prefixes="m xs"
                version="3.0"&gt;

&lt;xsl:import href="VERSION.xsl"/&gt;
&lt;xsl:import href="parse.xsl"/&gt;
&lt;xsl:import href="resolve.xsl"/&gt;
&lt;xsl:import href="analyze.xsl"/&gt;
&lt;xsl:import href="summarize.xsl"/&gt;

&lt;xsl:output method="xhtml" encoding="utf-8" indent="no"
            omit-xml-declaration="yes"/&gt;

&lt;xsl:param name="source-listings" select="'true'"/&gt;

&lt;xsl:param name="debug-parse" select="()" static="yes"/&gt;
&lt;xsl:param name="debug-resolve" select="()" static="yes"/&gt;
&lt;xsl:param name="debug-analyze" select="()" static="yes"/&gt;
&lt;xsl:param name="format" select="'visual'"/&gt;
&lt;xsl:param name="xspec-tests" select="'false'"/&gt;

&lt;xsl:template match="/"&gt;
  &lt;xsl:variable name="parsed"&gt;
    &lt;xsl:apply-templates select="/" mode="m:parse"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:result-document use-when="exists($debug-parse)"
                       href="{$debug-parse}" method="xml" indent="yes"&gt;
    &lt;xsl:sequence select="$parsed"/&gt;
  &lt;/xsl:result-document&gt;

  &lt;xsl:variable name="resolved"&gt;
    &lt;xsl:apply-templates select="$parsed" mode="m:resolve"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:result-document use-when="exists($debug-resolve)"
                       href="{$debug-resolve}" method="xml" indent="yes"&gt;
    &lt;xsl:sequence select="$resolved"/&gt;
  &lt;/xsl:result-document&gt;

  &lt;xsl:variable name="analyzed"&gt;
    &lt;xsl:apply-templates select="$resolved" mode="m:analyze"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:result-document use-when="exists($debug-analyze)"
                       href="{$debug-analyze}" method="xml" indent="yes"&gt;
    &lt;xsl:sequence select="$analyzed"/&gt;
  &lt;/xsl:result-document&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$format = 'data'"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$xspec-tests = ('true','yes','1')"&gt;
          &lt;xsl:apply-templates select="$analyzed" mode="m:fix-base-uri"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="$analyzed"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:apply-templates select="$analyzed" mode="m:summarize"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="element()" mode="m:fix-base-uri"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()" mode="m:fix-base-uri"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="@xml:base" mode="m:fix-base-uri"&gt;
  &lt;xsl:attribute name="xml:base" select="'...'"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="m:fix-base-uri"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div></main><footer><p>Generated by <a href="https://xslt.xmlexplorer.com/">XSLT Explorer</a> version <span title="git hash: c9d7078">0.1.0</span> at 20:50 on 02 Jun 2020.</p><p>Source: file:/Users/ndw/Projects/xml/xsltexplorer/build/xslt/explorer.xsl</p></footer></body><script src="js/xsltexplorer.js"></script></html>